{
  "posts": [
    {
      "content": "### æ¦‚è¦\n\nwebpack æ˜¯å‰ç«¯æœ€å¸¸ç”¨çš„**æ¨¡å—æ‰“åŒ…å·¥å…·**äº†ï¼Œå…³äºå®ƒçš„çŸ¥è¯†ï¼Œæˆ‘ä»¬ä»ä½¿ç”¨å’ŒåŸç†ä¸¤æ–¹é¢æ¥è®¨è®ºä¸‹ã€‚\n\n* Webpack ä½¿ç”¨\n\t* åŸºç¡€é…ç½®\n\t* webpack ä¼˜åŒ–\n* Webpack åŸç†\n\t* Loader å’Œ Plugin çš„åŒºåˆ«\n\t* å¦‚ä½•ä¿è¯å„ä¸ª loader æŒ‰ç…§é¢„æƒ³æ–¹å¼å·¥ä½œ\n\t* Webpack æ„å»ºæµç¨‹\n\t* æ–‡ä»¶ç›‘å¬åŸç†\n\t* Webpack çƒ­æ›´æ–°åŸç†\n\t* ä»£ç åˆ†å‰²çš„æœ¬è´¨ä¸æ„ä¹‰\n\t* Babel åŸç†\n* Webpack å®ç°\n\t* å®ç°ä¸€ä¸ªç®€å•çš„ Webpack\n\t* å®ç°ä¸€ä¸ªLoader\n\t* å®ç°ä¸€ä¸ªPlugin\n\n### ä½¿ç”¨\n\n#### åŸºç¡€é…ç½®\n\n* Loader\n\n\t* JavaScript ç›¸å…³\n\t\n\t\t* babel-loader\n\t\t\t\n\t\t\tå°† ES6 + çš„è¯­æ³•è½¬æ¢æˆ ES5\n\t\t\t\n\t\t* ts-loader\n\t\t\n\t\t\tå°† Typescript è½¬æ¢æˆ Javascript\n\t\t\n\t\t* awesome-typescript-loader\n\t\t\t\n\t\t\tå°† TypeScript è½¬æ¢æˆ JavaScriptï¼Œ æ€§èƒ½ä¼˜äº ts-loader\n\t\n\t\t* eslint-loader\n\n\t\t\té€šè¿‡ ESLint æ£€æŸ¥ Javascript ä»£ç \n\t\t\t\n\t\t* tslint-loader\n\n\t\t\té€šè¿‡ tslint æ£€æŸ¥ TypeScript ä»£ç \n\t\t\t\n\t\t* vue-loader\n\n\t\t\tåŠ è½½ Vuejs å•æ–‡ä»¶ç»„ä»¶\n\t\t\t\n\t* CSS ç›¸å…³\n\n\t\t* sass-loader\n\n\t\t\tå°† SCSS/SASS ä»£ç è½¬æ¢æˆ CSS\n\t\t\t\n\t\t* postcss-loader\n\t\t\t\n\t\t\tæ‰©å±• CSS è¯­æ³•ï¼Œä½¿ç”¨ä¸‹ä¸€ä»£ CSSï¼Œä¾‹å¦‚å¯ä»¥é…åˆ autoprefixer æ’ä»¶è‡ªåŠ¨è¡¥é½ CSS3 å‰ç¼€\n\t\t\t\n\t\t* css-loader\n\n\t\t\tåŠ è½½ CSSï¼Œæ”¯æŒæ¨¡å—åŒ–ï¼Œå‹ç¼©ï¼Œæ–‡ä»¶å¯¼å…¥ç­‰ç‰¹æ€§\n\t\t\t\n\t\t* style-loader\n\n\t\t\tå°† CSS ä»£ç é€šè¿‡ style æ ‡ç­¾çš„æ–¹å¼åŠ è½½è¿› html\n\t\t\t\n\t* æ–‡ä»¶ç›¸å…³\n\n\t\t* file-loader\n\n\t\t\tå°†æ–‡ä»¶è¾“å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œåœ¨ä»£ç ä¸­é€šè¿‡ç›¸å¯¹ URL å»å¼•ç”¨è¾“å‡ºçš„æ–‡ä»¶ï¼ˆå¤„ç†å›¾ç‰‡å’Œå­—ä½“ï¼‰\n\n\t\t* url-loader\n\n\t\t\tä¸ file-loader ç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯ç”¨æˆ·å¯ä»¥è®¾ç½®ä¸€ä¸ªé˜ˆå€¼ï¼Œå°äºé˜ˆå€¼æ—¶è¿”å›æ–‡ä»¶çš„ base64 å½¢å¼ç¼–ç ï¼ˆå¤„ç†å›¾ç‰‡å’Œå­—ä½“ï¼‰\n\n\t\t* raw-loader\n\n\t\t\tå°†æ–‡ä»¶å†…å®¹é€šè¿‡å­—ç¬¦ä¸²å½¢å¼è¾“å‡ºï¼ˆutf-8ï¼‰\n\n\t* ä¼˜åŒ–ç›¸å…³\n\n\t\t* cache-loader\n\n\t\t\tå¯ä»¥åœ¨ä¸€äº›æ€§èƒ½å¼€é”€è¾ƒå¤§çš„ Loader ä¹‹å‰æ·»åŠ ï¼Œç›®çš„æ˜¯å°†ç»“æœç¼“å­˜åœ¨ç£ç›˜é‡Œ\n\n\t\t* thread-loader\n\n\t\t\tä¸ cache-loader ä½¿ç”¨æ•ˆæœä¸ä½ç½®ç›¸åŒ\n\t\t\t\t\n* Plugins\n\n\t* é€šç”¨æ’ä»¶\n\t\n\t\t* clean-webpack-plugin \n\t\t\n\t\t\tç›®å½•æ¸…ç†\n\t\t\t\n\t\t* html-webpack-plugin\n\n\t\t\tç®€åŒ– HTML æ–‡ä»¶åˆ›å»ºï¼ˆå¯ä»¥æŒ‡å®š template ä»¥åŠè‡ªåŠ¨å¼•å…¥å…¥å£æ–‡ä»¶ï¼‰\n\t\t\t\n\t\t* webpack.ProvidePlugin\n\n\t\t\tå®šä¹‰å…¨å±€å˜é‡ï¼Œä¸å¿…åˆ°å¤„ require æˆ– import\n\t\t\t\n\t\t* HappyPack\n\n\t\t\tå¤šè¿›ç¨‹æ‰“åŒ…\n\t\t\t\n\t\t* webpack.DefinePlugin\n\n\t\t\tå®šä¹‰ç¯å¢ƒå˜é‡ï¼ˆåœ¨é¡¹ç›®ä»£ç ä¸­å¯èƒ½å­˜åœ¨éœ€è¦ç¯å¢ƒå˜é‡çš„æƒ…å†µï¼‰\n\t\n\t* å¼€å‘æ’ä»¶\n\t\t\t\n\t\t* HotModuleReplacementPlugin\n\n\t\t\twebpack çš„çƒ­æ›´æ–°åˆç§°çƒ­æ›¿æ¢ï¼ˆHMRï¼‰ï¼Œè¿™ä¸ªæœºåˆ¶å¯ä»¥åšåˆ°ä¸ç”¨åˆ·æ–°æµè§ˆå™¨è€Œå°†æ–°å˜æ›´çš„æ¨¡å—æ›¿æ¢æ‰æ—§çš„æ¨¡å—\n\t\t\t\n\t* ç”Ÿäº§æ’ä»¶\n\n\t\t* mini-css-extract-plugin\n\t\t\t\n\t\t\tåˆ†ç¦»æ ·å¼æ–‡ä»¶ï¼ŒCSS æå–ä¸ºç‹¬ç«‹æ–‡ä»¶ï¼Œæ”¯æŒæŒ‰éœ€åŠ è½½\n\t\t\t\n\t\t* workbox-webpack-plugin\n\n\t\t\tä¸ºç½‘é¡µåº”ç”¨å¢åŠ ç¦»çº¿ç¼“å­˜åŠŸèƒ½\n\t\t\t\n\t\t* purifycss-webpack\n\n\t\t\tåˆ©ç”¨è¯¥æ’ä»¶è¿›è¡Œ css treeshaking\n\t\t\t\n\t\t* webpack.DllReferencePlugin\n\n\t\t\tæ ¹æ® DllPlugin ç”Ÿæˆçš„ manifest æ–‡ä»¶ï¼Œå¯¹ bundle æ–‡ä»¶è¿›è¡Œæ˜ å°„\n\t\t\t\n\t\t* add-asset-html-webpack-plugin\n\n\t\t  å°†æŒ‡å®šçš„é™æ€æ–‡ä»¶å†™å…¥ html \n\n\t\t* webpack-bundle-analyzer\n\n\t\t\tå¯è§†åŒ– webpack è¾“å‡ºæ–‡ä»¶çš„ä½“ç§¯ï¼ˆä¸šåŠ¡ç»„ä»¶ï¼Œç¬¬ä¸‰æ–¹ç»„ä»¶ï¼‰\n\t\t\t\n* å…¶ä»–é…ç½®\n\t\t\t\n\t* æ–‡ä»¶æŒ‡çº¹ï¼šæ–‡ä»¶æŒ‡çº¹æ˜¯æ‰“åŒ…è¾“å‡ºçš„æ–‡ä»¶åçš„åç¼€ï¼Œä¸€å…±åˆ†ä¸‰ç§\n\t\t* Hash\n\t\t\tå’Œæ•´ä¸ªé¡¹ç›®çš„æ„å»ºæœ‰å…³ï¼Œåªè¦é¡¹ç›®æ–‡ä»¶æœ‰ä¿®æ”¹ï¼Œæ•´ä¸ªé¡¹ç›®æ„å»ºçš„hashå€¼å°±ä¼šæ›´æ”¹\n\t\t\t\n\t\t\tè®¾ç½® file-loader çš„nameï¼Œä½¿ç”¨hash\n\t\t\t\n\t\t* Chunkhash\n\t\t\tå’Œ webpack æ‰“åŒ…çš„ chunk æœ‰å…³ï¼Œä¸åŒçš„ entry ä¼šç”Ÿå‡ºä¸åŒçš„ chunkhash\n\t\t\t\n\t\t\tè®¾ç½® output çš„ filenameï¼Œ ç”¨ chunkhash\n\t\t\t\n\t\t* Contenthash\n\t\t\tæ ¹æ®æ–‡ä»¶å†…å®¹æ¥å®šä¹‰ hashï¼Œæ–‡ä»¶å†…å®¹ä¸å˜ï¼Œåˆ™ contenthash ä¸å˜\n\t\t\t\n\t\t\tè®¾ç½® MiniCssExtractPlugin çš„ filenameï¼Œ ä½¿ç”¨ contenthash\n\t\t\t\n\t* optimization\n\t\t\n#### webpack ä¼˜åŒ–\n\n* æå‡webpackæ„å»ºé€Ÿåº¦\n\n\t* å¤šè¿›ç¨‹/å¤šå®ä¾‹æ„å»º\n\t\n\t\tHappyPack å’Œ thread-loader\n\t\n\t* å¤šè¿›ç¨‹å‹ç¼©ä»£ç \n\t\t\n\t\tterser-webpack-plugin å¼€å¯ parallel å‚æ•°\n\t\t\n\t* ç¼©å°æ‰“åŒ…ä½œç”¨åŸŸ\n\t\t* exclude/inlcude ï¼ˆç¡®å®š loader è§„åˆ™èŒƒå›´ï¼‰\n\t\t* resolve.modules æŒ‡æ˜ç¬¬ä¸‰æ–¹æ¨¡å—çš„ç»å¯¹è·¯å¾„\n\t\t* resolve.mainFields åªé‡‡ç”¨ main å­—æ®µä½œä¸ºå…¥å£æ–‡ä»¶æè¿°å­—æ®µ\n\t\t* resolve.extensions å°½å¯èƒ½å‡å°‘åç¼€å°è¯•çš„å¯èƒ½æ€§\n\t\t* åˆç†ä½¿ç”¨alias\n\n\t* DLL\n\n\t\tä½¿ç”¨ DllPlugin è¿›è¡Œåˆ†åŒ…ï¼Œä½¿ç”¨ DllReferencePlugin å¯¹ manifest.json å¼•ç”¨ï¼Œè®©ä¸€äº›åŸºæœ¬ä¸ä¼šæ”¹åŠ¨çš„ä»£ç å…ˆæ‰“åŒ…æˆé™æ€èµ„æºï¼Œé¿å…åå¤ç¼–è¯‘\n\t\t\n\t* å……åˆ†åˆ©ç”¨ç¼“å­˜æå‡äºŒæ¬¡æ„å»ºé€Ÿåº¦\n\n\t\t* babel-loader å¼€å¯ç¼“å­˜\n\t\t* terser-webpack-plugin å¼€å¯ç¼“å­˜\n\t\t* cache-loader\n\n* æå‡é¡µé¢åŠ è½½é€Ÿåº¦\n\n\t* åŠ¨æ€ Polyfill\n\t\t[babel polyfill](https://sfmonkey.github.io/post/babel-polyfill/)\n\t* Scope hoisting\n\t\t* æ„å»ºåçš„ä»£ç ä¼šå­˜åœ¨å¤§é‡é—­åŒ…ï¼Œé€ æˆä½“ç§¯å¢å¤§ï¼Œè¿è¡Œä»£ç æ—¶åˆ›å»ºçš„å‡½æ•°ä½œç”¨åŸŸå˜å¤šï¼Œå†…å­˜å¼€é”€å˜å¤§ã€‚Scope hoisting å°†æ‰€æœ‰æ¨¡å—çš„ä»£ç æŒ‰ç…§å¼•ç”¨é¡ºåºæ”¾åœ¨ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸé‡Œï¼Œç„¶åé€‚å½“çš„é‡å‘½åä¸€äº›å˜é‡ä»¥é˜²æ­¢å˜é‡åå†²çªã€‚\n\t\t\t```js\n\t\t\t//å¼€å¯å‰\n\t\t\t[\n\t\t\t\t\t/* 0 */\n\t\t\t\t\tfunction(module, exports, require) {\n\t\t\t\t\t\t\tvar module_a = require(1)\n\t\t\t\t\t\t\tconsole.log(module_a['default'])\n\t\t\t\t\t}\n\n\t\t\t\t\t/* 1 */\n\t\t\t\t\tfunction(module, exports, require) {\n\t\t\t\t\t\t\texports['default'] = 'module A'\n\t\t\t\t\t}\n\t\t\t]\n\n\t\t\t//å¼€å¯å,é€šè¿‡å‡å°‘é—­åŒ…å’Œå‡½æ•°å£°æ˜ï¼Œæ¥å‡å°‘ä»£ç ä½“ç§¯å’Œå†…å­˜å¼€é”€\n\t\t\t[\n\t\t\t\t\tfunction(module, exports, require) {\n\t\t\t\t\t\t\tvar module_a_defaultExport = 'module A'\n\t\t\t\t\t\t\tconsole.log(module_a_defaultExport)\n\t\t\t\t\t}\n\t\t\t]\n\t\t\t```\n\t\t* å¿…é¡»æ˜¯ ES6 çš„è¯­æ³•ï¼Œå› ä¸ºæœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹åº“ä»é‡‡ç”¨ CommonJs è¯­æ³•ï¼Œä¸ºäº†å……åˆ†å‘æŒ¥ Scope hoisting çš„ä½œç”¨ï¼Œéœ€è¦é…ç½® mainFields å¯¹ç¬¬ä¸‰æ–¹æ¨¡å—ä¼˜å…ˆé‡‡ç”¨ main æŒ‡å‘ ES6 æ¨¡å—åŒ–è¯­æ³•\n\t* Tree shaking\n\t\t* æ‰“åŒ…è¿‡ç¨‹ä¸­æ£€æµ‹å·¥ç¨‹ä¸­æ²¡æœ‰å¼•å…¥è¿‡çš„æ¨¡å—è¿›è¡Œæ ‡è®°ï¼Œåœ¨èµ„æºå‹ç¼©æ—¶å°†å®ƒä»¬ä»æœ€ç»ˆçš„ bundle ä¸­å»æ‰ï¼ˆ[åªèƒ½å¯¹ ES6 module ç”Ÿæ•ˆ](https://juejin.im/post/5a5652d8f265da3e497ff3de)ï¼‰ï¼Œå¼€å‘ä¸­å°½å¯èƒ½ä½¿ç”¨ ES6 module çš„æ¨¡å—ï¼Œæé«˜ tree shaking æ•ˆç‡ã€‚\n\t\t* ç¦ç”¨ babel-loader çš„æ¨¡å—ä¾èµ–è§£æï¼Œå¦åˆ™ webpack æ¥æ”¶åˆ°çš„å°±éƒ½æ˜¯è½¬æ¢è¿‡çš„ CommonJS å½¢å¼çš„æ¨¡å—ï¼Œæ— æ³•è¿›è¡Œ tree-shaking\n\t\t* ä½¿ç”¨ PurifyCSSï¼ˆä¸å†ç»´æŠ¤ï¼‰æˆ–è€… uncss å»é™¤æ— ç”¨ css ä»£ç \n\t* æå–é¡µé¢å…¬å…±èµ„æº\n\t\t* å°†åŸºç¡€åŒ…é€šè¿‡ externals æˆ–è€… dll æ–¹å¼ CDN å¼•å…¥ï¼Œä¸æ‰“å…¥ bundle ä¸­\n\t\t* ä½¿ç”¨ SplitChunksPlugin è¿›è¡Œä»£ç åˆ†å‰²\n\t* å›¾ç‰‡å‹ç¼©ï¼Œé…ç½® image-webpack-loader\n\t* æå– CSS æ–‡ä»¶ï¼Œé€šè¿‡css-loaderçš„ minimize é€‰é¡¹å¼€å¯ cssnano å‹ç¼© CSS\n\t\n### webpack åŸç†\n\n* Loader å’Œ Plugin çš„åŒºåˆ«\n\n\t**Loader æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå‡½æ•°**ï¼Œåœ¨è¯¥å‡½æ•°ä¸­å¯¹æ¥æ”¶åˆ°çš„å†…å®¹è¿›è¡Œè½¬æ¢ï¼Œè¿”å›è½¬æ¢åçš„ç»“æœã€‚å› ä¸º webpack åªè®¤è¯† JavaScriptï¼Œæ‰€ä»¥ Loader å°±æˆäº†ç¿»è¯‘å®˜ï¼Œå¯¹å…¶ä»–ç±»å‹çš„èµ„æºè¿›è¡Œè½¬è¯‘çš„é¢„å¤„ç†å·¥ä½œã€‚\n\t\n\t**Plugin å°±æ˜¯æ’ä»¶ï¼Œæ’ä»¶å¯ä»¥æ‰©å±• webpack çš„åŠŸèƒ½**ï¼Œåœ¨ webpack è¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸä¸­ä¼šå¹¿æ’­å‡ºè®¸å¤šäº‹ä»¶ï¼ŒPlugin å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œåœ¨åˆé€‚çš„æ—¶æœºé€šè¿‡ webpack æä¾›çš„ API æ”¹å˜è¾“å‡ºç»“æœã€‚\n\t\n\t**Loader** åœ¨ module.rules ä¸­é…ç½®ï¼Œä½œä¸ºæ¨¡å—çš„è§£æè§„åˆ™ï¼Œç±»å‹ä¸ºæ•°ç»„ã€‚æ¯é¡¹éƒ½æ˜¯ä¸€ä¸ª Objectï¼Œ å†…éƒ¨åŒ…å«äº† testï¼Œloaderï¼Œoptions ç­‰å±æ€§ã€‚\n\t\n\t**Plugin** åœ¨ plugins ä¸­å•ç‹¬é…ç½®ï¼Œç±»å‹ä¸ºæ•°ç»„ï¼Œæ¯ä¸€é¡¹æ˜¯ä¸€ä¸ª Plugin çš„å®ä¾‹ï¼Œå‚æ•°éƒ½é€šè¿‡æ„é€ å‡½æ•°ä¼ å…¥ã€‚\n\t\n* å¦‚ä½•ä¿è¯å„ä¸ª loader æŒ‰ç…§é¢„æƒ³æ–¹å¼å·¥ä½œ\n\n\trules ä¸­çš„æ¯ä¸ª Object éƒ½å¯ä»¥é…ç½®ä¸€ä¸ªkey **enforce**ï¼Œvalue ä¸€èˆ¬æœ‰ä¸¤ä¸ª **pre** **post**ï¼Œpre ä»£è¡¨åœ¨æ‰€æœ‰æ­£å¸¸ loader ä¹‹å‰æ‰§è¡Œï¼Œpost åœ¨æ‰€æœ‰ loader ä¹‹åæ‰§è¡Œã€‚\n\t\n* Webpack æ„å»ºæµç¨‹\n\n\twebpack çš„è¿è¡Œæµç¨‹æ˜¯ä¸€ä¸ªä¸²è¡Œçš„è¿‡ç¨‹ï¼Œä»å¯åŠ¨åˆ°ç»“æŸä¼šä¾æ¬¡æ‰§è¡Œä»¥ä¸‹æµç¨‹ï¼š\n\t\n\t* è¯»å– webpack é…ç½®\n\t\n\t\t* ä»é…ç½®æ–‡ä»¶ä¸­è¯»å–å‚æ•°\n\n\t* åˆ†æå…¥å£æ–‡ä»¶\n\n\t\t* åˆ†æä¾èµ–æ¨¡å—\n\t\t* åˆ†æå…¥å£æ–‡ä»¶å†…å®¹\n\t\t* ç¼–è¯‘å†…å®¹\n\n\t* ä¾èµ–æ¨¡å—\n\n\t\t* åˆ†æä¾èµ–æ¨¡å—\n\t\t* åˆ†ææœ¬æ–‡ä»¶å†…å®¹\n\t\t* ç¼–è¯‘å†…å®¹\n\t\t\n\t* ç”Ÿæˆ bundlejs\n\n* æ–‡ä»¶ç›‘å¬åŸç†\n\n\tæ–‡ä»¶ç›‘å¬æ˜¯æŒ‡ **webpack --watch**  æˆ–è€… config ä¸­é…ç½® **watch å±æ€§ä¸º true**\n\n\tç¼ºç‚¹ï¼š æ¯æ¬¡éƒ½éœ€è¦æ‰‹åŠ¨æ›´æ–°æµè§ˆå™¨\n\t\n\tåŸç†ï¼š è½®è¯¢åˆ¤æ–­æ–‡ä»¶çš„æœ€åç¼–è¾‘æ—¶é—´æ˜¯å¦å˜åŒ–ï¼Œå¦‚æœæŸä¸ªæ–‡ä»¶å‘ç”Ÿå˜åŒ–ï¼Œå¹¶ä¸ä¼šç«‹åˆ»å‘Šè¯‰ç›‘å¬è€…ï¼Œè€Œæ˜¯å…ˆç¼“å­˜èµ·æ¥ï¼Œç­‰ **aggregateTimeout** åå†æ‰§è¡Œã€‚\n\t\n\t```js\n\tmodule.export = {    \n\t\t// é»˜è®¤false,ä¹Ÿå°±æ˜¯ä¸å¼€å¯    \n\t\twatch: true,    \n\t\t// åªæœ‰å¼€å¯ç›‘å¬æ¨¡å¼æ—¶ï¼ŒwatchOptionsæ‰æœ‰æ„ä¹‰    \n\t\twatchOptions: {        \n\t\t// é»˜è®¤ä¸ºç©ºï¼Œä¸ç›‘å¬çš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ï¼Œæ”¯æŒæ­£åˆ™åŒ¹é…       \n\t\tignored: /node_modules/,        \n\t\t// ç›‘å¬åˆ°å˜åŒ–å‘ç”Ÿåä¼šç­‰300mså†å»æ‰§è¡Œï¼Œé»˜è®¤300ms        \n\t\taggregateTimeout:300,        \n\t\t// åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å‘ç”Ÿå˜åŒ–æ˜¯é€šè¿‡ä¸åœè¯¢é—®ç³»ç»ŸæŒ‡å®šæ–‡ä»¶æœ‰æ²¡æœ‰å˜åŒ–å®ç°çš„ï¼Œé»˜è®¤æ¯ç§’é—®1000æ¬¡        \n\t\tpoll:1000    \n\t}}\n\t```\n\t\n\t\n* Webpack çƒ­æ›´æ–°åŸç†\n\n\tHMR å¯ä»¥åšåˆ°åœ¨ä¸åˆ·æ–°æµè§ˆå™¨çš„æƒ…å†µä¸‹ç”¨æ–°å˜æ›´çš„æ¨¡å—æ›¿æ¢æ‰æ—§çš„æ¨¡å—\n\t\n\tHMR çš„æ ¸å¿ƒå°±æ˜¯å®¢æˆ·ç«¯ä»æœåŠ¡å™¨æ‹‰å–æ›´æ–°åçš„æ–‡ä»¶ï¼Œå‡†ç¡®çš„è¯´æ˜¯ chunk diffï¼ˆchunk éœ€è¦æ›´æ–°çš„éƒ¨åˆ†ï¼‰ï¼Œ**å®é™…ä¸Š WDS ä¸æµè§ˆå™¨ä¹‹é—´ç»´æŠ¤äº†ä¸€ä¸ª Websocketï¼Œå½“æœ¬åœ°èµ„æºå‘ç”Ÿå˜åŒ–æ—¶ï¼ŒWDS ä¼šå‘æµè§ˆå™¨å‘é€æ›´æ–°é€šçŸ¥**ï¼Œå¹¶å¸¦ä¸Šæ„å»ºæ—¶çš„ hashï¼Œè®©å®¢æˆ·ç«¯ä¸ä¸Šä¸€æ¬¡èµ„æºè¿›è¡Œå¯¹æ¯”ã€‚**å®¢æˆ·ç«¯å¯¹æ¯”å‡ºå·®å¼‚åä¼šå‘ WDS å‘é€ Ajax è¯·æ±‚æ¥è·å–æ›´æ”¹å†…å®¹**ï¼ˆæ–‡ä»¶åˆ—è¡¨ï¼Œhashï¼‰ï¼Œè¿™æ ·å®¢æˆ·ç«¯å°±å¯ä»¥å†å€ŸåŠ©è¿™äº›ä¿¡æ¯ç»§ç»­å‘ WDS å‘é€ jsonp è¯·æ±‚è·å–è¯¥ chunk çš„å¢é‡æ›´æ–°ã€‚**å®¢æˆ·ç«¯æ‹¿åˆ°å¢é‡æ›´æ–°åï¼Œç”± HotMoudlePlugin æä¾›ç›¸å…³ API ä»¥ä¾›å¼€å‘è€…é’ˆå¯¹è‡ªèº«åœºæ™¯è¿›è¡Œå¤„ç†**ï¼Œreact-hot-loader å’Œ vue-loader éƒ½æ˜¯å€ŸåŠ©è¿™äº› API å®ç°çš„ HMR\n\n\t> WDS->websocket->å®¢æˆ·ç«¯->Ajax->æ›´æ–°å†…å®¹->HotMoudlePlugin->react-hot-loader/vue-loader->HMR\n\n\t* ä»£ç åˆ†å‰²çš„æœ¬è´¨ä¸æ„ä¹‰\n\n\tä»£ç åˆ†å‰²æœ¬è´¨å…¶å®å°±æ˜¯åœ¨ **æºä»£ç ç›´æ¥ä¸Šçº¿** å’Œ **æ‰“åŒ…æˆå”¯ä¸€è„šæœ¬** è¿™ä¸¤ç§æç«¯æ–¹æ¡ˆä¹‹é—´çš„ä¸€ç§æ›´é€‚åˆå®é™…åœºæ™¯çš„ä¸­é—´çŠ¶æ€ã€‚\n\n* Babel åŸç†\n\n\t* è§£æï¼šå°†ä»£ç è½¬æ¢æˆ AST\n\t\t* è¯æ³•åˆ†æï¼šå°†ä»£ç å­—ç¬¦ä¸²åˆ†å‰²ä¸º token æµï¼Œå³è¯­æ³•å•å…ƒç»„æˆçš„æ•°ç»„\n\t\t* è¯­æ³•åˆ†æï¼šåˆ†æ token æµï¼ˆä¸Šé¢ç”Ÿæˆçš„æ•°ç»„ï¼‰å¹¶ç”Ÿæˆ AST\n\t* è½¬æ¢ï¼šè®¿é—® AST çš„èŠ‚ç‚¹è¿›è¡Œå˜æ¢æ“ä½œç”Ÿäº§æ–°çš„ AST\n\t* ç”Ÿæˆï¼šä»¥æ–°çš„ AST ä¸ºåŸºç¡€ç”Ÿæˆä»£ç \n\n### Webpack å®ç°\n\n#### å®ç°ä¸€ä¸ªç®€å•çš„ Webpack\n\nåŸç†ï¼š\n\n1. è¯»å– webpack é…ç½®\n2. åˆ†æå…¥å£æ¨¡å—\n\t* è·å–å…¥å£ä¾èµ–\n\t* è·å–å…¥å£å†…å®¹\n\t* è½¬è¯‘å…¥å£å†…å®¹\n3. åˆ†æä¾èµ–æ¨¡å—\n\t* è·å–æ¨¡å—ä¾èµ–\n\t* è·å–æ¨¡å—å†…å®¹\n\t* è½¬è¯‘æ¨¡å—å†…å®¹\n4. å¾—åˆ° bundle.js\n\nå®ç°ï¼š\n\n```js\nconst path = require('path');\nconst fs = require('fs');\nconst babel = require('@babel/core');\nconst parser = require('@babel/parser');\nconst traverse = require('@babel/traverse').default;\n\n\nclass compiler {\n    constructor(opt) {\n        this.opt = opt;\n    }\n\n    run() {\n        const {entry, output} = this.opt;\n\n        const res = this.generateCode(entry);\n\n        fs.writeFileSync(path.resolve(output.path, output.filename), res);\n    }\n\n    moduleAnalyze(filename) {\n        const content = fs.readFileSync(filename, 'utf-8');\n        // åˆ†æå†…å®¹\n        const ast = parser.parse(content, {\n            sourceType: \"module\"\n        });\n\n        const dependencies = {};\n        // åˆ†æä¾èµ–æ¨¡å—è·¯å¾„\n        traverse(ast, {\n            ImportDeclaration({node}){\n                const dirname = path.dirname(filename);\n                const genFile = './' + path.join(dirname, node.source.value);\n                dependencies[node.source.value] = genFile;\n            }\n        });\n        // ç¼–è¯‘å†…å®¹\n        const {code} = babel.transformFromAst(ast, null, {\n            presets: ['@babel/preset-env']\n        });\n\n        return {\n            filename,\n            dependencies,\n            code\n        }\n    }\n\n    graphAnalyze(entry) {\n        // åˆ†æå…¥å£æ¨¡å—\n        const entryModule = this.moduleAnalyze(entry);\n        const graphArr = [entryModule];\n\n        // åˆ†æä¾èµ–æ¨¡å—\n        graphArr.forEach(v => {\n            const {dependencies} = v;\n\n            if (dependencies) {\n                for(let key in dependencies) {\n                    graphArr.push(this.moduleAnalyze(dependencies[key]));\n                }\n            }\n        });\n        \n        const graph = {};\n\n        graphArr.forEach(v => {\n            graph[v.filename] = {\n                dependencies: v.dependencies,\n                code: v.code\n            }\n        });\n\n        return graph;\n    }\n\n    // ç”Ÿæˆç»“æœä»£ç \n    generateCode(entry) {\n        // å¾—åˆ°æ‰€æœ‰æ¨¡å—å›¾è°±\n        const graph = JSON.stringify(this.graphAnalyze(entry));\n        // è¾“å‡º bundle.js\n        return `(function(graph){\n            // æµè§ˆå™¨æ²¡æœ‰ require ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ª\n            function require(module) {\n                function localRequire(relativePath) {\n                    return require(graph[module].dependencies[relativePath]);\n                }\n\n                var exports = {};\n                (function(require, exports, code){\n                    eval(code);\n                })(localRequire, exports, graph[module].code);\n\n                return exports;\n            }\n\n            require('${entry}')\n        })(${graph})`;\n    }\n}\n\nmodule.exports = compiler;\n```\n\n#### å®ç°ä¸€ä¸ªLoader\n\n```js\nconst chalk = require('chalk');\n\nmodule.exports = function(content) {\n    const warning = chalk.keyword('orange');\n    const { notice } = this.query;\n    let words = ['todo', 'fixme', 'review'];\n\n    if (notice && Array.isArray(notice) && notice.length > 0) {\n        words = notice;\n    }\n\n    const reg = new RegExp(`(\\/\\/\\\\s*(${words.join(\"|\")}).*$)|(\\/\\\\*[\\\\s\\\\S]*(${words.join(\"|\")})[\\\\s\\\\S]*\\\\*\\/)`, \"igm\");\n    const res = content.match(reg)\n\n    if (res && res.length > 0) {\n        const len = res.length;\n\n        this.emitWarning(warning(`\n\n           \n        â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—\n        â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•\n        â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  \n        â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â•  \n        â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—\n        â•šâ•â•  â•šâ•â•â•â• â•šâ•â•â•â•â•â•    â•šâ•â•   â•šâ•â• â•šâ•â•â•â•â•â•â•šâ•â•â•â•â•â•â•\n                                               \n   \n                                        \n        There are ${len} ${len > 1 ? 'comments' : 'comment'} you might to notice in ${chalk.green(this.resourcePath)}\n        \n        `));\n    }\n\n    return content;\n}\n```\n\n#### å®ç°ä¸€ä¸ªPlugin\n\n* ä¸€ä¸ªJavaScriptç±»å‡½æ•°\n* åœ¨å‡½æ•°åŸå‹ (prototype)ä¸­å®šä¹‰ä¸€ä¸ªæ³¨å…¥compilerå¯¹è±¡çš„applyæ–¹æ³•\n* applyå‡½æ•°ä¸­é€šè¿‡compileræ’å…¥æŒ‡å®šçš„äº‹ä»¶é’©å­,åœ¨é’©å­å›è°ƒä¸­æ‹¿åˆ°compilationå¯¹è±¡\n* ä½¿ç”¨compilationæ“çºµä¿®æ”¹webapackå†…éƒ¨å®ä¾‹æ•°æ®\n* å¼‚æ­¥æ’ä»¶ï¼Œæ•°æ®å¤„ç†å®Œåä½¿ç”¨callbackå›è°ƒ\n\n**Compiler å’Œ Compilation çš„åŒºåˆ«åœ¨äºï¼šCompiler ä»£è¡¨äº†æ•´ä¸ª Webpack ä»å¯åŠ¨åˆ°å…³é—­çš„ç”Ÿå‘½å‘¨æœŸï¼Œè€Œ Compilation åªæ˜¯ä»£è¡¨äº†ä¸€æ¬¡æ–°çš„ç¼–è¯‘**\n\n```js\nclass EndPlugin {\n    constructor(options) {\n        const {doneCb, failCb} = options;\n\n        this.doneCallback = doneCb;\n        this.failCallback = failCb;\n    }\n\n    apply(compiler) {\n        compiler.plugin('done', stats => {\n            this.doneCallback && this.doneCallback(stats);\n        });\n\n        compiler.plugin('failed', error => {\n            this.failCallback && this.failCallback(error);\n        });\n    }\n}\n\nmodule.exports = EndPlugin;\n```\n\n\n### å‚è€ƒèµ„æ–™\n\n* [ã€Œåè¡€æ•´ç†ã€å†æ¥ä¸€æ‰“Webpacké¢è¯•é¢˜ğŸ”¥(æŒç»­æ›´æ–°)](https://juejin.im/post/5e6f4b4e6fb9a07cd443d4a5#heading-16)\n* [Webpack 4è¿›é˜¶--ä»å‰çš„æ—¥è‰²å˜å¾—æ…¢ ï¼Œä¸€ä¸‹åˆåªå¤Ÿæ‰“ä¸€æ¬¡åŒ…](https://zhuanlan.zhihu.com/p/35407642)\n* [æ‰‹å†™ä¸€ä¸ªwebpackæ’ä»¶](https://segmentfault.com/a/1190000019010101)\n* [ç©è½¬webpackä¹‹loaderå¼€å‘](https://imweb.io/topic/5d4a94a08db073cf44ca8cd0)\n* [webpack loaderå’Œpluginç¼–å†™](https://juejin.im/post/5bbf190de51d450ea52fffd3)\n\n\n\t\n",
      "data": {
        "title": "Webpack Essay",
        "date": "2020-03-25 08:56:36",
        "tags": [
          "webpack",
          "Essay"
        ],
        "published": true,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "webpack-essay"
    },
    {
      "content": "### æ¦‚è¦\n\nå½“æˆ‘ä»¬äº†è§£ stck reconcilerï¼ˆreact 16.0 ä¹‹å‰çš„ diff ç®—æ³•ï¼‰åï¼Œæˆ‘ä»¬çŸ¥é“ React åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œ setState å¤„ç†æ›´æ–°æ—¶ï¼Œä¼šå› ä¸ºè™šæ‹ŸDOM è¿›è¡Œ diff è€Œ**ä¸€é¼“ä½œæ°”**é•¿æ—¶é—´å ç”¨ä¸»çº¿ç¨‹ï¼Œå»æ¯”è¾ƒè¯¥ç»„ä»¶åŠå…¶å­ç»„ä»¶ï¼Œå¯¼è‡´ä¸€äº›é«˜çº§åˆ«çš„ä»»åŠ¡ï¼Œæ¯”å¦‚ç”¨æˆ·è¾“å…¥å’ŒåŠ¨ç”»æ‰§è¡Œå‡ºç°å»¶è¿Ÿå¡é¡¿ï¼Œè€Œ Fiber åœ¨ react ä¸­çš„å¼•å…¥ï¼Œå°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n\n**å¦‚æœæ˜¯100ç±³çŸ­è·‘ï¼Œæˆ–è€…1000ç±³ç«èµ›ï¼Œå½“ç„¶è¶Šå¿«è¶Šå¥½ã€‚å¦‚æœæ˜¯é©¬æ‹‰æ¾ï¼Œå°±éœ€è¦è€ƒè™‘åˆ°ä¿å­˜ä½“åŠ›äº†ï¼Œéœ€è¦æ³¨æ„ä¼‘æ¯äº†ã€‚æ€§èƒ½æ˜¯ä¸€ä¸ªç³»ç»Ÿæ€§çš„å·¥ç¨‹ã€‚**\n\n\næ—¢ç„¶æˆ‘ä»¬è¦å»å’Œ fiber åšæœ‹å‹äº†ï¼Œé‚£æˆ‘ä»¬å°±éœ€è¦å»å°è¯•äº†è§£ä¸€ä¸‹å®ƒï¼Œå®ƒæ˜¯æ€ä¹ˆåšåˆ°èƒ½å¤Ÿè§£å†³ä¸Šé¢çš„é—®é¢˜çš„\n\n* requestIdleCallback\n\n* vdom æ ‘å½¢ è½¬æ¢åˆ° Fiber é“¾å¼ï¼ˆReconciliation Phaseï¼‰\n\n* ğŸš¢æ–°çš„ diff ç®—æ³•ï¼ˆReconciliation Phaseï¼‰\n\n* Fiber è½¬æ¢ä¸ºçœŸå® DOMï¼ˆCommit Phaseï¼‰\n\n### requestIdleCallback\n\n**requestIdleCallback æ˜¯åœ¨æµè§ˆå™¨ç©ºé—²æ—¶ä¼šæ‰§è¡Œå¯¹åº” callback çš„ API**\n\né¡µé¢ä¸€å¸§ä¸€å¸§ç»˜åˆ¶å‡ºæ¥çš„ï¼Œå½“æ¯ç§’ç»˜åˆ¶çš„å¸§æ•°ï¼ˆFPSï¼‰è¾¾åˆ° 60 æ—¶ï¼Œé¡µé¢æ˜¯æµç•…çš„ï¼Œå°äºè¿™ä¸ªå€¼æ—¶ï¼Œç”¨æˆ·ä¼šæ„Ÿè§‰åˆ°å¡é¡¿ã€‚\n\n1s 60å¸§ï¼Œæ‰€ä»¥æ¯ä¸€å¸§åˆ†åˆ°çš„æ—¶é—´æ˜¯ 1000/60 â‰ˆ 16 msã€‚æ‰€ä»¥æˆ‘ä»¬ä¹¦å†™ä»£ç æ—¶åŠ›æ±‚ä¸è®©ä¸€å¸§çš„å·¥ä½œé‡è¶…è¿‡ 16msã€‚\n\n![](https://sfmonkey.github.io//post-images/1584699602216.jpeg)\n\nè¿™æ˜¯æµè§ˆå™¨ä¸€å¸§å†…çš„å·¥ä½œ\n\nä¸Šé¢å…­ä¸ªæ­¥éª¤å®Œæˆåæ²¡è¶…è¿‡ 16 msï¼Œè¯´æ˜æ—¶é—´æœ‰å¯Œä½™ï¼Œæ­¤æ—¶å°±ä¼šæ‰§è¡Œ requestIdleCallback é‡Œæ³¨å†Œçš„ä»»åŠ¡ã€‚\n\n### Fiber\n\n* å› ä¸º createElement è¿”å›çš„ç»“æœæ˜¯ vnode ï¼Œæˆ‘ä»¬éœ€è¦å°† vnode æ ‘è½¬æ¢ä¸º fiber é“¾è¡¨ã€‚å› ä¸ºé“¾è¡¨çš„ç»“æ„å¤©ç„¶é€‚åˆæˆ‘ä»¬è¿›è¡Œä»»åŠ¡çš„æš‚åœã€‚\n\n\t```js\n\t//ReactDom.js\n\n\t// ä¸‹ä¸€ä¸ªå•å…ƒä»»åŠ¡\n\t// let nextUnitOfWork = null;\n\t// work in progress å·¥ä½œä¸­çš„ fiber root\n\tlet wrokInProgressRoot = null;\n\t// ç°åœ¨çš„æ ¹èŠ‚ç‚¹\n\tlet currentRoot = null;\n\n\tfunction render(vnode, container) {\n\t\twrokInProgressRoot = {\n\t\t\tnode: container,\n\t\t\tprops: {children: [vnode]},\n\t\t\tbase: currentRoot\n\t\t}\n\n\t\tnextUnitOfWork = wrokInProgressRoot;\n\t}\n\n\tfunction reconcilerChilren(workInProgressFiber, children) {\n\t\tlet prevSibling = null;\n\t\tlet oldFiber = workInProgressFiber.base && workInProgressFiber.base.child;\n\t\tfor(let i = 0; i < children.length; i ++) {\n\t\t\tlet child = children[i];\n\t\t\tlet newFiber = null;\n\n\t\t\tnewFiber = {\n\t\t\t\ttype: child.type,\n\t\t\t\tprops: child.props,\n\t\t\t\tnode: null,\n\t\t\t\tbase: null,\n\t\t\t\tparent: workInProgressFiber,\n\t\t\t\teffectTag: PLACEMENT\n\t\t\t}\n\n\t\t\tif (oldFiber) {\n\t\t\t\toldFiber = oldFiber.sibling\n\t\t\t}\n\n\t\t\tif (i === 0) {\n\t\t\t\tworkInProgressFiber.child = newFiber;\n\t\t\t} else {\n\t\t\t\tprevSibling.sibiling = newFiber;\n\t\t\t}\n\n\t\t\tprevSibling = newFiber;\n\t\t}\n\t}\n\n\tfunction updateClassComponent(fiber) {\n\t\tconst {type, props} = fiber;\n\t\tconst cmp = new type(props);\n\t\tconst children = [cmp.render()];\n\t\treconcilerChilren(fiber, children);\n\t}\n\n\tfunction updateFunctionComponent(fiber) {\n\t\tconst {type, props} = fiber;\n\t\tconst children = [type(props)];\n\t\treconcilerChilren(fiber, children);\n\t}\n\n\tfunction updateHostComponent(fiber) {\n\t\tif (!fiber.node) {\n\t\t\tfiber.node = createNode(fiber);\n\t\t}\n\n\t\tconst children = fiber.props;\n\t\treconcilerChilren(fiber, children);\n\t}\n\n\tfunction preformUnitOfWork (fiber) {\n\t\tconst {type} = fiber;\n\t\n\t\tif (typeof type === 'function') {\n\t\t\ttype.isReactComponent ? \n\t\t\t\tupdateClassComponent(fiber) : \n\t\t\t\tupdateFunctionComponent(fiber)\n\t\t} else {\n\t\t\tupdateHostComponent(fiber);\n\t\t}\n\n\t\tif (fiber.child) {\n\t\t\treturn fiber.child;\n\t\t}\n\n\t\tlet nextFiber = fiber;\n\t\twhile(nextFiber) {\n\t\t\tif (nextFiber.sibling) {\n\t\t\t\treturn nextFiber.sibling\n\t\t\t}\n\t\t\tnextFiber = nextFiber.parent;\n\t\t}\n\t}\n\n\tfunction workLoop(deadline) {\n\t\twhile(nextUnitOfWork && deadline.timeRemaining() > 1) {\n\t\t\tnextUnitOfWork = preformUnitOfWork(nextUnitOfWork);\n\t\t}\n\n\t\tif (!nextUnitOfWork && wrokInProgressRoot) {\n\t\t\tcommitRoot();\n\t\t}\n\t}\n\n\trequestIdleCallback(workLoop)\n\t```\n\n* Fiber diffç®—æ³•\n\tå¾…æ›´æ–°\n\t\n* ç„¶åï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Commit Phase é˜¶æ®µï¼Œå°† Fiber è½¬æ¢ä¸ºçœŸå® DOMï¼Œåœ¨ Reconcilition Phase é˜¶æ®µæˆ‘ä»¬å¯ä»¥æš‚åœå»æ‰§è¡Œå…¶ä»–é«˜ä¼˜å…ˆçº§ä»»åŠ¡ï¼Œä½†æ˜¯åœ¨ Commit é˜¶æ®µï¼Œè¿™ä¸ªæ›´æ–°æ˜¯ä¸€æ°”å‘µæˆçš„ï¼Œå› ä¸ºè¿™æ˜¯ç”¨æˆ·è¦çœ‹åˆ°çš„ UI é˜¶æ®µã€‚\n\n\t```js\n\tfunction commitRoot() {\n\t\tcommitWorker(wrokInProgressRoot.child);\n\t\tcurrentRoot = wrokInProgressRoot;\n\t\twrokInProgressRoot = null;\n\t}\n\n\tfunction commitWorker(fiber) {\n\t\tif(!fiber) {\n\t\t\treturn\n\t\t}\n\n\t\tlet parentNodeFiber = fiber.parent;\n\t\twhile (!parentNodeFiber.node) {\n\t\t\tparentNodeFiber = parentNodeFiber.parent;\n\t\t}\n\n\t\tconst parentNode = parentNodeFiber.node;\n\t\t// æ›´æ–° åˆ é™¤ æ–°å¢\n\t\tif (fiber.effectTag === PLACEMENT && fiber.node !== null) {\n\t\t\tparentNode.appendChild(fiber.node);\n\t\t}\n\t\tcommitWorker(fiber.child);\n\t\tcommitWorker(fiber.sibling);\n\t}\n\t```\n\n### å‚è€ƒèµ„æ–™\n\n* [åˆ©ç”¨å¥½æµè§ˆå™¨çš„ç©ºé—²æ—¶é—´ --- requestIdleCallback](https://www.cnblogs.com/Wayou/p/requestIdleCallback.html)\n* [React Fiber](https://juejin.im/post/5ab7b3a2f265da2378403e57)\n* [å®Œå…¨ç†è§£React Fiber](http://www.ayqy.net/blog/dive-into-react-fiber/)\n* [React Fiberæ¶æ„](https://zhuanlan.zhihu.com/p/37095662)\n\n\n\n\n\n",
      "data": {
        "title": "React Fiber Essay",
        "date": "2020-03-20 16:47:23",
        "tags": [
          "React",
          "Essay"
        ],
        "published": true,
        "hideInList": false,
        "feature": "/post-images/react-fiber-essay.jpg"
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "react-fiber-essay"
    },
    {
      "content": "### æ¦‚è¦\næˆ‘ä»¬éƒ½çŸ¥é“ï¼Œreact ä¸­æ˜¯é€šè¿‡ setState æ¥è§¦å‘ç»„ä»¶ render å‡½æ•°ï¼Œå¾—åˆ°è™šæ‹Ÿ DOMï¼Œç„¶å oldVnode ä¸ vnode è¿›è¡Œ diff ï¼Œæœ€åå¾—åˆ°é«˜æ•ˆçš„ DOM æ›´æ–°æ“ä½œã€‚\n\nåœ¨ React diff ä¸­ï¼Œæ›´æ–°ç­–ç•¥æœ‰ä¸‰ç‚¹\n\n1. Web UI ä¸­ DOM èŠ‚ç‚¹è·¨å±‚çº§çš„ç§»åŠ¨æ“ä½œç‰¹åˆ«å°‘ï¼Œå¯ä»¥å¿½ç•¥ä¸è®¡\n2. æ‹¥æœ‰ç›¸åŒç±»çš„ä¸¤ä¸ªç»„ä»¶å°†ä¼šç”Ÿæˆç›¸ä¼¼çš„æ ‘å½¢ç»“æ„ï¼Œæ‹¥æœ‰ä¸åŒç±»çš„ä¸¤ä¸ªç»„ä»¶å°†ä¼šç”Ÿæˆä¸åŒçš„æ ‘å½¢ç»“æ„\n3. å¯¹äºåŒä¸€å±‚çº§çš„ä¸€ç»„å­èŠ‚ç‚¹ï¼Œä»–ä»¬å¯ä»¥é€šè¿‡å”¯ä¸€ id è¿›è¡ŒåŒºåˆ†\n\nåŸºäºè¿™ä¸‰ä¸ªæ›´æ–°ç­–ç•¥ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡º React diff ä¸­ä¸‰ç§ä¸åŒçš„ diff ç±»å‹\n\n1. tree diff\n2. component diff\n3. element diff\n\n### tree diff\n\nReact å¯¹ğŸŒ²çš„ç®—æ³•è¿›è¡Œäº†ç®€æ´æ˜äº†çš„ä¼˜åŒ–ï¼Œå³å¯¹æ ‘è¿›è¡Œåˆ†å±‚æ¯”è¾ƒï¼Œä¸¤æ£µæ ‘åªä¼šå¯¹åŒä¸€å±‚æ¬¡çš„èŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒã€‚\n\n* é¦–å…ˆæˆ‘ä»¬æ¥æ§åˆ¶åŒå±‚æ¯”è¾ƒ\n\n\t```js\n\t_updateChildren: function(      \n\t\tnextNestedChildrenElements,\n\t\ttransaction,\n\t\tcontext,\n\t) {\n\t\t...\n\t\tvar nextChildren = this._reconcilerUpdateChildren(\n\t\t\tprevChildren,\n\t\t\tnextNestedChildrenElements,\n\t\t\tmountImages,\n\t\t\tremovedNodes,\n\t\t\ttransaction,\n\t\t\tcontext,\n\t\t);\n\t}\n\t```\n\n\tprevChildren å’Œ nextChildren å°±æ˜¯å¯¹åº”çš„è™šæ‹Ÿ DOMï¼ŒnextNestedChildrenElements è¿™ç©æ„å„¿æ˜¯ä¸ªæŒ‡é’ˆï¼Œæ¥æ ‡æ˜å½“å‰æ ‘çš„å±‚æ¬¡ï¼Œå¾—åˆ°å½“å‰ prevChildren çš„å±‚æ¬¡ã€‚\n\n* ç„¶å ReactChildReconciler.updateChildren ä¼šå°† prevChildrenã€nextChildrenå°è£…æˆReactDOMComponentç±»å‹ï¼Œå¹¶è¿›è¡Œåç»­æ¯”è¾ƒå’Œæ“ä½œã€‚\n\næ‰€ä»¥å½“å‡ºç°èŠ‚ç‚¹è·¨å±‚çº§ç§»åŠ¨æ—¶ï¼Œå¹¶ä¸ä¼šå‡ºç°æƒ³è±¡ä¸­çš„ç§»åŠ¨æ“ä½œï¼Œè€Œæ˜¯ä»¥ A ä¸ºæ ¹èŠ‚ç‚¹çš„æ ‘è¢«æ•´ä¸ªé‡æ–°åˆ›å»ºï¼Œè¿™æ˜¯ä¸€ç§å½±å“ React æ€§èƒ½çš„æ“ä½œï¼Œå› æ­¤ **React å®˜æ–¹å»ºè®®ä¸å‹è¿«è¿›è¡Œ DOM èŠ‚ç‚¹è·¨å±‚çº§çš„æ“ä½œ**\n\n![](https://sfmonkey.github.io//post-images/1584599830004.jpeg)\n\n### component diff\n\næˆ‘ä»¬éœ€è¦æ¸…æ¥šçš„æ˜¯ï¼ŒcreateElement ç”Ÿæˆçš„è™šæ‹Ÿ DOMï¼Œå¦‚æœèŠ‚ç‚¹æœ¬èº«æ˜¯ç»„ä»¶ï¼Œé‚£ä¹ˆè™šæ‹Ÿ DOM ä¸­çš„ tag å…¶å®å°±æ˜¯å¯¹åº”çš„ class æˆ–è€… functionï¼Œè¿™ä¸ªåœ¨ä¹‹å‰æˆ‘ä»¬å®ç° react çš„æ—¶å€™å°±å·²ç»æœ‰ä½“ç°äº†ã€‚å½“ç„¶è¿™æ˜¯ react è™šæ‹Ÿ DOMï¼Œåœ¨ vue ä¸­ tag ä¸å¤ªä¸€æ ·ï¼Œè¿™æ˜¯åè¯ã€‚\n\n* å¦‚æœæ˜¯åŒä¸€ç±»å‹çš„ç»„ä»¶ï¼ŒæŒ‰ç…§åŸç­–ç•¥ç»§ç»­æ¯”è¾ƒè™šæ‹Ÿ DOM æ ‘\n\n* å¦‚æœä¸æ˜¯ï¼Œåˆ™å°†è¯¥ç»„ä»¶åˆ¤æ–­ä¸º dirty componentï¼Œä»è€Œæ›¿æ¢æ•´ä¸ªç»„ä»¶ä¸‹çš„æ‰€æœ‰å­èŠ‚ç‚¹\n\n* å¯¹äºåŒä¸€ç±»å‹çš„ç»„ä»¶ï¼Œæœ‰å¯èƒ½å…¶ Virtual DOM æ²¡æœ‰ä»»ä½•å˜åŒ–ï¼Œè¿™æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡ shouldComponentUpdate é’©å­æ¥å‘Šè¯‰è¯¥ç»„ä»¶æ˜¯å¦è¿›è¡Œ diffï¼Œä»è€Œæé«˜å¤§é‡çš„æ€§èƒ½ã€‚\n\n\t```\n\t// è¶…ç®€å•ä»£ç å®ç°\n\tconst compareTwoVnodes(oldVnode, newVnode, dom) {\n\t\t\tlet newNode = dom\n\n\t\t\t// å¦‚æœæ–°çš„è™šæ‹ŸDOMæ˜¯nullï¼Œé‚£ä¹ˆå°±å°†å‰ä¸€æ¬¡çš„çœŸå®DOMç§»é™¤æ‰\n\t\t\tif (newVnode == null) {\n\t\t\t\t\tdestroyVnode(oldVnode, dom)\n\t\t\t\t\tdom.parentNode.removeChild(dom)\n\n\t\t\t} else if (oldVnode.type !== newVnode.type || oldVnode.key !== newVnode.key) {\n\t\t\t\t\t// replace\n\t\t\t\t\tdestroyVnode(oldVnode, dom)\n\t\t\t\t\tnewNode = initVnode(newVnode, parentContext, dom.namespaceURI)\n\t\t\t\t\tdom.parentNode.replaceChild(newNode, dom)\n\n\t\t\t} else if (oldVnode !== newVnode || parentContext) {\n\t\t\t\t\t// same type and same key -> update\n\t\t\t\t\tnewNode = updateVNode(oldVnode, newVnode, dom, parentContext)\n\t\t\t}\n\t}\n\t/** \n\t* æ›´æ–°è™šæ‹ŸDOM\n\t* è¿™é‡Œçš„typeéœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œå¦‚æœvnodeæ˜¯ä¸ªhtmlå…ƒç´ ï¼Œä¾‹å¦‚h1ï¼Œé‚£ä¹ˆtypeå°±æ˜¯'h1'\n\t** å¦‚æœvnodeæ˜¯ä¸€ä¸ªå‡½æ•°ç»„ä»¶ï¼Œä¾‹å¦‚const Header = () => <h1>header</h1>ï¼Œé‚£ä¹ˆtypeå°±æ˜¯å‡½æ•°Header\n\t** å¦‚æœvnodeæ˜¯ä¸€ä¸ªclassç»„ä»¶ï¼Œé‚£ä¹ˆtypeå°±æ˜¯é‚£ä¸ªclass\n\t*/\n\tconst updateVNode = (vnode, node) => {\n\t\t\tconst { type } = vnode; // typeæ˜¯æŒ‡è™šæ‹ŸDOMçš„ç±»å‹\n\t\t\t// å¦‚æœæ˜¯classç»„ä»¶\n\t\t\tif (type === VCOMPONENT) {\n\t\t\t\t\treturn updateComponent(vnode, node)\n\t\t\t} else (type === VSTATELESS){\n\t\t\t\t\treturn updateStateLess(vnode, node)\n\t\t\t}\n\t\t\tupdateVChildren(vnode, node)\n\t}\n\t// æ›´æ–°classç»„ä»¶ï¼ˆè°ƒç”¨renderæ–¹æ³•æ‹¿åˆ°æ–°çš„è™šæ‹ŸDOMï¼‰\n\tconst updateComponent = (vnode, node) => {\n\t\t\tconst { type: Component } = vnode; // typeæ˜¯æŒ‡è™šæ‹ŸDOMçš„ç±»å‹\n\t\t\tconst newVNode = new Component().render();\n\t\t\tcompareTwoVnodes(newVNode, vnode, node);\n\t}\n\t// æ›´æ–°æ— çŠ¶æ€ç»„ä»¶ï¼ˆç›´æ¥æ‰§è¡Œå‡½æ•°æ‹¿åˆ°æ–°çš„è™šæ‹ŸDOMï¼‰\n\tconst updateStateLess = (vnode, node) => {\n\t\t\tconst { type: Component } = vnode; // typeæ˜¯æŒ‡è™šæ‹ŸDOMçš„ç±»å‹\n\t\t\tconst newVNode = Component();\n\t\t\tcompareTwoVnodes(newVNode, vnode, node);\n\t}\n\tconst updateVChildren = (vnode, node) => {\n\t\t\tfor (let i = 0; i < node.children.length; i++) {\n\t\t\t\t\tupdateVNode(vnode.children[i], node.children[i])\n\t\t\t}\n\t}\n\t```\n\n### element diff \n\nå½“èŠ‚ç‚¹å¤„äºåŒä¸€å±‚çº§æ—¶ï¼ŒReact diff æä¾›äº†ä¸‰ç§èŠ‚ç‚¹æ“ä½œ\n\n```js\n// oldDomsæ˜¯çœŸå®DOMï¼ŒnewDomsæ˜¯æœ€æ–°çš„è™šæ‹ŸDOM\nconst oldDoms = [A, B, C, D],\n\tnewDoms = [B, A, E, D],\n\tupdates = [],\n\tremoves = [],\n\tcreates = [];\n// è¿›è¡Œä¸¤å±‚éå†ï¼Œè·å–åˆ°å“ªäº›èŠ‚ç‚¹éœ€è¦æ›´æ–°ï¼Œå“ªäº›èŠ‚ç‚¹éœ€è¦ç§»é™¤ã€‚\nfor (let i = 0; i < oldDoms.length; i++) {\n\tconst oldDom = oldDoms[i]\n\tlet shouldRemove = true\n\tfor (let j = 0; j < newDoms.length; j++) {\n\t\tconst newDom = newDoms[j];\n\t\tif (\n\t\t\t\toldDom.key === newDom.key &&\n\t\t\t\toldDom.type === newDom.type\n\t\t) {\n\t\t\t\tupdates[j] = {\n\t\t\t\t\t\tindex: j,\n\t\t\t\t\t\tnode: oldDom,\n\t\t\t\t\t\tparentNode: parentNode // è¿™é‡ŒçœŸå®DOMçš„çˆ¶èŠ‚ç‚¹\n\t\t\t\t}\n\t\t\t\tshouldRemove = false\n\t\t}\n\t}\n\tif (shouldRemove) {\n\t\t\tremoves.push({\n\t\t\t\t\tnode: oldDom\n\t\t\t})\n\t}\n}\n// ä»è™šæ‹ŸDOMèŠ‚ç‚¹æ¥å–å‡ºä¸è¦æ›´æ–°çš„èŠ‚ç‚¹ï¼Œè¿™å°±æ˜¯éœ€è¦æ–°åˆ›å»ºçš„èŠ‚ç‚¹ã€‚\nfor (let j = 0; j < newDoms.length; j++) {\n\tif (!updates[j]) {\n\t\t\tcreates.push({\n\t\t\t\t\tindex: j,\n\t\t\t\t\tvnode: newDoms[j],\n\t\t\t\t\tparentNode: parentNode // è¿™é‡ŒçœŸå®DOMçš„çˆ¶èŠ‚ç‚¹\n\t\t\t})\n\t}\n}\n```\n\n* æ’å…¥\n\n\t```js\n\tconst create = (creates) => {\n\t\t\tcreates.forEach(create => {\n\t\t\t\t\tconst index = create.index,\n\t\t\t\t\t\t\tparentNode = create.parentNode,\n\t\t\t\t\t\t\tvnode = create.vnode,\n\t\t\t\t\t\t\tcurNode = parentNode.children[index],\n\t\t\t\t\t\t\tnode = createNode(vnode); // åˆ›å»ºDOMèŠ‚ç‚¹\n\t\t\t\t\tparentNode.insertBefore(node, curNode)\n\t\t\t})\n\t}\n\t```\n\n* ç§»åŠ¨\n\n\t```js\n\tconst update = (updates) => {\n\t\t\tupdates.forEach(update => {\n\t\t\t\t\tconst index = update.index,\n\t\t\t\t\t\t\tparentNode = update.parentNode,\n\t\t\t\t\t\t\tnode = update.node,\n\t\t\t\t\t\t\tcurNode = parentNode.children[index];\n\t\t\t\t\tif (curNode !== node) {\n\t\t\t\t\t\t\tparentNode.insertBefore(node, curNode)\n\t\t\t\t\t}\n\t\t\t})\n\t}\n\t```\n\n* åˆ é™¤\n\n\t```js\n\tconst remove = (removes) => {\n\t\t\tremoves.forEach(remove => {\n\t\t\t\t\tconst node = remove.node\n\t\t\t\t\tnode.parentNode.removeChild(node)\n\t\t\t})\n\t}\n\t```\n\n### åç»­\n\n* çœ‹åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬é¦–å…ˆèƒ½å¼•å‡ºä¸€ä¸ªæ€è€ƒğŸ¤”ï¼Œé‚£å°±æ˜¯ vue ä¸ React diff ç®—æ³•çš„ä¸åŒ\n\t\n\t* react æœ‰ compnent diffï¼Œè€Œ vue æ²¡æœ‰\n\t\n\t\t> \tåœ¨ React åº”ç”¨ä¸­ï¼Œå½“æŸä¸ªç»„ä»¶çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒä¼šä»¥è¯¥ç»„ä»¶ä¸ºæ ¹ï¼Œé‡æ–°æ¸²æŸ“æ•´ä¸ªç»„ä»¶å­æ ‘ã€‚\n\t\t> \n\t\t> \tå¦‚è¦é¿å…ä¸å¿…è¦çš„å­ç»„ä»¶çš„é‡æ¸²æŸ“ï¼Œä½ éœ€è¦åœ¨æ‰€æœ‰å¯èƒ½çš„åœ°æ–¹ä½¿ç”¨ PureComponentï¼Œæˆ–æ˜¯æ‰‹åŠ¨å®ç° shouldComponentUpdate æ–¹æ³•ã€‚åŒæ—¶ä½ å¯èƒ½ä¼šéœ€è¦ä½¿ç”¨ä¸å¯å˜çš„æ•°æ®ç»“æ„æ¥ä½¿å¾—ä½ çš„ç»„ä»¶æ›´å®¹æ˜“è¢«ä¼˜åŒ–ã€‚\n\t\t> \n\t\t> \tç„¶è€Œï¼Œä½¿ç”¨ PureComponent å’Œ shouldComponentUpdate æ—¶ï¼Œéœ€è¦ä¿è¯è¯¥ç»„ä»¶çš„æ•´ä¸ªå­æ ‘çš„æ¸²æŸ“è¾“å‡ºéƒ½æ˜¯ç”±è¯¥ç»„ä»¶çš„ props æ‰€å†³å®šçš„ã€‚å¦‚æœä¸ç¬¦åˆè¿™ä¸ªæƒ…å†µï¼Œé‚£ä¹ˆæ­¤ç±»ä¼˜åŒ–å°±ä¼šå¯¼è‡´éš¾ä»¥å¯Ÿè§‰çš„æ¸²æŸ“ç»“æœä¸ä¸€è‡´ã€‚è¿™ä½¿å¾— React ä¸­çš„ç»„ä»¶ä¼˜åŒ–ä¼´éšç€ç›¸å½“çš„å¿ƒæ™ºè´Ÿæ‹…ã€‚\n\t\t> \n\t\t> \tåœ¨ Vue åº”ç”¨ä¸­ï¼Œç»„ä»¶çš„ä¾èµ–æ˜¯åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­è‡ªåŠ¨è¿½è¸ªçš„ï¼Œæ‰€ä»¥ç³»ç»Ÿèƒ½ç²¾ç¡®çŸ¥æ™“å“ªä¸ªç»„ä»¶ç¡®å®éœ€è¦è¢«é‡æ¸²æŸ“ã€‚ä½ å¯ä»¥ç†è§£ä¸ºæ¯ä¸€ä¸ªç»„ä»¶éƒ½å·²ç»è‡ªåŠ¨è·å¾—äº† shouldComponentUpdateï¼Œå¹¶ä¸”æ²¡æœ‰ä¸Šè¿°çš„å­æ ‘é—®é¢˜é™åˆ¶ã€‚\n\t\t> \n\t\t> \tVue çš„è¿™ä¸ªç‰¹ç‚¹ä½¿å¾—å¼€å‘è€…ä¸å†éœ€è¦è€ƒè™‘æ­¤ç±»ä¼˜åŒ–ï¼Œä»è€Œèƒ½å¤Ÿæ›´å¥½åœ°ä¸“æ³¨äºåº”ç”¨æœ¬èº«ã€‚\n\n\t\tæ‰€ä»¥è¯´ï¼ŒReact ä¹‹æ‰€ä»¥ä¼šæœ‰ component çš„æ¯”è¾ƒï¼Œè€Œ vue åœ¨è™šæ‹ŸDOM ä¸º component æ—¶ä¼šè·³è¿‡ diff ï¼Œå°±æ˜¯è¿™ä¸ªåŸå› \n\t\n\t* å‰©ä¸‹çš„ tree diff ä¸ element diff ä¸¤è€…éƒ½æœ‰ï¼Œè™½ç„¶å…·ä½“å®ç°ä¸åŒï¼Œä½†éƒ½æ˜¯æœ‰çš„\n\n* å…¶æ¬¡ï¼Œæˆ‘ä»¬æƒ³è¿™ä¹ˆä¸€ç§åœºæ™¯ğŸ¬ï¼Œå› ä¸º React setState ä¼šæ›´æ–°å…¶ç»„ä»¶ä»¥åŠå®ƒçš„æ‰€æœ‰å­ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶ä¼šå…¨éƒ¨è¿›è¡Œ diff ç®—æ³•å¯¹æ¯”ï¼Œé‚£ä¹ˆåœ¨å­˜åœ¨å¤§é‡å­ç»„ä»¶çš„æƒ…å†µä¸‹ï¼Œè¿™ç§ç®—æ³•æ— ç–‘æ˜¯ååˆ†è€—è´¹æ€§èƒ½çš„ï¼Œæ‰€ä»¥ï¼Œè¿™ä¹Ÿå°±æ˜¯ React å›¢é˜Ÿä¼šè€—æ—¶ä¸¤å¹´çš„æ—¶é—´ï¼Œå°† fiber å¼•å…¥ React çš„åŸå› ã€‚\n\n### å‚è€ƒèµ„æ–™\n\n[react diffç®€å•å®ç°](https://zhuanlan.zhihu.com/p/63964441)\n\n[[è¯‘] Reactæ€§èƒ½ä¼˜åŒ–ï¼šVirtual DomåŸç†æµ…æ](https://zhuanlan.zhihu.com/p/36798520)\n\n[React æºç å‰–æç³»åˆ— ï¼ ä¸å¯æ€è®®çš„ react diff](https://zhuanlan.zhihu.com/p/20346379)\n\n[åè°ƒ](https://zh-hans.reactjs.org/docs/reconciliation.html)\n\n[Reactæºç ä¹‹Diffç®—æ³•](https://segmentfault.com/a/1190000010686582)",
      "data": {
        "title": "React diff Essay",
        "date": "2020-03-19 14:19:05",
        "tags": [
          "React",
          "Essay"
        ],
        "published": true,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "react-diff-essay"
    },
    {
      "content": "### æ¦‚è¦\n\nåœ¨ä¹‹å‰å®ç°çš„ Simple Vue é‡Œï¼Œæˆ‘ä»¬åœ¨æ¨¡ç‰ˆçš„ compile ä¾èµ–æ”¶é›†æ—¶å°†æ¯ä¸ªä¾èµ–éƒ½åˆ›å»ºäº†ä¸€ä¸ªwatcherï¼ˆVue 1.0ï¼‰ï¼Œè¿™æ ·æ˜¯æ²¡æ³•æ’‘ä½å¤§åº”ç”¨çš„ï¼Œæ‰€ä»¥åœ¨ 2.0 é‡Œé¢æ¯ä¸€ä¸ªç»„ä»¶åˆ›å»ºä¸€ä¸ª watcherï¼Œä½†é—®é¢˜æ˜¯è¿™ç§ç²’åº¦ä¸‹æˆ‘ä»¬æ— æ³•åˆ¤æ–­ç»„ä»¶ä¸­é‚£äº›å…ƒç´ è¿›è¡Œäº†æ›´æ”¹ï¼Œ**è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦è™šæ‹ŸDOMäº†**ã€‚\n\né‚£ä¹ˆæœ‰äº†è™šæ‹ŸDOMåï¼Œæˆ‘ä»¬å¦‚ä½•è¿›è¡Œé«˜æ•ˆçš„ DOM æ›´æ–°å‘¢ï¼Œ**è¿™æ—¶å€™ diff ç®—æ³•å°±å‡ºç°äº†**ã€‚\n\nä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬éšæ—¶æ¸…æ¥šè‡ªå·±åœ¨diffç®—æ³•çš„å“ªä¸ªæµç¨‹ï¼Œæˆ‘ä»¬é™„ä¸Šä¸‹å›¾\n\n![](https://sfmonkey.github.io//post-images/1584501228011.jpeg)\n\næˆ‘ä»¬æ¥æ ¹æ®è¿™å¼ å›¾ï¼Œé€æ­¥ç†è§£ diff ç®—æ³•\n\n### patch\n\n* patch ä¸»è¦æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œ oldVnode å’Œ Vnodeã€‚**å› ä¸ºæœ‰è¾ƒå¤šæƒ…å†µå­˜åœ¨ç›´æ¥åˆ›å»ºæ–°æ ‘çš„æƒ…å†µï¼Œä¸€èˆ¬ä¹Ÿå¯ä»¥ç†è§£ä¸º patch è¿›è¡Œçš„æ˜¯æ ‘çº§åˆ«çš„æ¯”è¾ƒã€‚**\n\n\t```js\n\tfunction patch() {\n\t\tif (isUndef(oldVnode)) {\n\t\t\t\t// empty mount (likely as component), create new root element\n\t\t\t\tisInitialPatch = true\n\t\t\t\tcreateElm(vnode, insertedVnodeQueue)\n\t\t} else {\n\t\t\tif (sameVnode(oldVnode, vnode)) {\n\t\t\t\tpatchVnode(oldVnode, vnode)\n\t\t\t} else {\n\t\t\t\t...\n\t\t\t\t// create new node\n\t\t\t\tcreateElm(\n\t\t\t\t\tvnode,\n\t\t\t\t\tnodeOps.nextSibling(oldElm)\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t\t\n\t\t...\n\t\tremoveVnodes([oldVnode], 0, 0)\n\t}\n\t```\n\n\t1. å¦‚æœ oldVnode ä¸å­˜åœ¨ï¼Œåˆ™ç›´æ¥æ ¹æ® vnode åˆ›å»º DOM\n\t2. å¦‚æœ oldVnode ä¸ vnode ä¸å±äº sameVnodeï¼Œè¿™ç›´æ¥æ›¿æ¢,å±äº replace æ“ä½œ\n\t3. å¦‚æœå±äº sameVnodeï¼Œé‚£ä¹ˆå¼€å§‹è¿›è¡ŒèŠ‚ç‚¹æ¯”è¾ƒ patchVnode\n\n### sameVnode\n\n* sameVnode ç”¨æ¥åˆ¤æ–­æ˜¯å¦å±äºç›¸åŒçš„èŠ‚ç‚¹ï¼Œå…¶å®å¦‚æœ keyï¼Œtagï¼ŒisCommentï¼ŒisDef(data) ï¼ŒsameInputTypeç›¸åŒï¼Œå°±æ˜¯ç›¸åŒçš„èŠ‚ç‚¹ã€‚å¯ä»¥è¿›è¡Œ patchVnode äº†ã€‚\n\n\t```js\n\tfuncton sameVnode(aï¼Œb) {\n\t\t\treturn (\n\t\t\ta.key === b.key && (\n\t\t\t\t(\n\t\t\t\t\ta.tag === b.tag &&\n\t\t\t\t\ta.isComment === b.isComment &&\n\t\t\t\t\tisDef(a.data) === isDef(b.data) &&\n\t\t\t\t\tsameInputType(a, b)\n\t\t\t\t)\n\t\t\t\t...\n\t\t)\n\t}\n\t```\n\n\t1. \tkeyï¼škeyå€¼\n\t2. \ttagï¼šæ ‡ç­¾å\n\t3. \tisComment æ˜¯å¦ä¸ºæ³¨é‡ŠèŠ‚ç‚¹\n\t4. \tisDef(data)ï¼šæ˜¯å¦å®šä¹‰äº† data\n\t5. \tsameInputTypeï¼šå½“æ ‡ç­¾æ˜¯ input çš„æ—¶å€™ï¼Œtype å¿…é¡»ç›¸åŒ\n\n### patchVnode\n\n* patchVnode ç”¨äºè¿›è¡Œä¸¤ä¸ªç›¸åŒèŠ‚ç‚¹çš„æ¯”è¾ƒ,ç„¶åè¿›è¡Œç›¸å…³DOMæ“ä½œï¼Œæ“ä½œçš„ç±»å‹æœ‰ä¸‰ç§\n\n\t* å±æ€§æ›´æ–°\n\t\t* å½“ data æœ‰å®šä¹‰æ—¶ï¼Œéœ€è¦è¿›è¡Œå±æ€§çš„æ›´æ–°\n\t* æ–‡æœ¬æ›´æ–°\n\t\t* å½“æ–°è€èŠ‚ç‚¹éƒ½æ— å­èŠ‚ç‚¹çš„æ—¶å€™ï¼Œåªæ˜¯æ–‡æœ¬çš„æ›¿æ¢\n\t* å­èŠ‚ç‚¹æ›´æ–°\n\t\t* å¦‚æœè€èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹è€Œæ–°èŠ‚ç‚¹æœ‰å­èŠ‚ç‚¹ï¼Œå…ˆæ¸…ç©ºDOMçš„æ–‡æœ¬å†…å®¹ï¼Œç„¶åä¸º DOM æ–°å¢å­èŠ‚ç‚¹\n\t\t* å¦‚æœæ–°èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹è€Œè€èŠ‚ç‚¹æœ‰å­èŠ‚ç‚¹ï¼Œåˆ™ç§»é™¤DOMçš„æ‰€æœ‰å­èŠ‚ç‚¹ï¼ˆåœ¨å¤–å±‚å·²ç»åˆ¤æ–­æ–°èŠ‚ç‚¹æ²¡æœ‰æ–‡æœ¬äº†ï¼‰\n\t\t* å¦‚æœæ–°è€èŠ‚ç‚¹éƒ½å­˜åœ¨ children å­èŠ‚ç‚¹ï¼Œåˆ™è°ƒç”¨ updateChildrenï¼Œå¯¹å­èŠ‚ç‚¹è¿›è¡Œ diff æ“ä½œ\n\t\n\t```js\n\tfunction patchVnode(odlVnodeï¼Œ vnode) {\n\t\t...\n\t\n\tconst oldCh = oldVnode.children\n\tconst ch = vnode.children\n\t\n\tif (isDef(data) && isPatchable(vnode)) {\n\t\tfor (i = 0; i < cbs.update.length; ++i) cbs.update[i](oldVnode, vnode)\n\t\tif (isDef(i = data.hook) && isDef(i = i.update)) i(oldVnode, vnode)\n\t}\n\t\n\tif (isUndef(vnode.text)) {\n\t\tif (isDef(oldCh) && isDef(ch)) {\n\t\t\tif (oldCh !== ch) updateChildren(elm, oldCh, ch, insertedVnodeQueue, removeOnly)\n\t\t} else if (isDef(ch)) {\n\t\t\tif (isDef(oldVnode.text)) nodeOps.setTextContent(elm, '')\n\t\t\taddVnodes(elm, null, ch, 0, ch.length - 1, insertedVnodeQueue)\n\t\t} else if (isDef(oldCh)) {\n\t\t\tremoveVnodes(oldCh, 0, oldCh.length - 1)\n\t\t} else if (isDef(oldVnode.text)) {\n\t\t\tnodeOps.setTextContent(elm, '')\n\t\t}\n\t} else if (oldVnode.text !== vnode.text) {\n\t\tnodeOps.setTextContent(elm, vnode.text)\n\t}\n\t\t...\n\t}\n\t```\n\n### updateChildren\n\n* updateChildren ç”¨äºåˆ¤æ–­æ–°è€èŠ‚ç‚¹çš„å­èŠ‚ç‚¹\n\n\t```js\n\twhile (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n\t\tif (isUndef(oldStartVnode)) {\n\t\t\toldStartVnode = oldCh[++oldStartIdx] // Vnode has been moved left\n\t\t} else if (isUndef(oldEndVnode)) {\n\t\t\toldEndVnode = oldCh[--oldEndIdx]\n\t\t} else if (sameVnode(oldStartVnode, newStartVnode)) {\n\t\t\tpatchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue, newCh, newStartIdx)\n\t\t\toldStartVnode = oldCh[++oldStartIdx]\n\t\t\tnewStartVnode = newCh[++newStartIdx]\n\t\t} else if (sameVnode(oldEndVnode, newEndVnode)) {\n\t\t\tpatchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue, newCh, newEndIdx)\n\t\t\toldEndVnode = oldCh[--oldEndIdx]\n\t\t\tnewEndVnode = newCh[--newEndIdx]\n\t\t} else if (sameVnode(oldStartVnode, newEndVnode)) { // Vnode moved right\n\t\t\tpatchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue, newCh, newEndIdx)\n\t\t\tcanMove && nodeOps.insertBefore(parentElm, oldStartVnode.elm, nodeOps.nextSibling(oldEndVnode.elm))\n\t\t\toldStartVnode = oldCh[++oldStartIdx]\n\t\t\tnewEndVnode = newCh[--newEndIdx]\n\t\t} else if (sameVnode(oldEndVnode, newStartVnode)) { // Vnode moved left\n\t\t\tpatchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue, newCh, newStartIdx)\n\t\t\tcanMove && nodeOps.insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm)\n\t\t\toldEndVnode = oldCh[--oldEndIdx]\n\t\t\tnewStartVnode = newCh[++newStartIdx]\n\t\t} else {\n\t\t\tif (isUndef(oldKeyToIdx)) oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx)\n\t\t\tidxInOld = isDef(newStartVnode.key)\n\t\t\t\t? oldKeyToIdx[newStartVnode.key]\n\t\t\t\t: findIdxInOld(newStartVnode, oldCh, oldStartIdx, oldEndIdx)\n\t\t\tif (isUndef(idxInOld)) { // New element\n\t\t\t\tcreateElm(newStartVnode, insertedVnodeQueue, parentElm, oldStartVnode.elm, false, newCh, newStartIdx)\n\t\t\t} else {\n\t\t\t\tvnodeToMove = oldCh[idxInOld]\n\t\t\t\tif (sameVnode(vnodeToMove, newStartVnode)) {\n\t\t\t\t\tpatchVnode(vnodeToMove, newStartVnode, insertedVnodeQueue, newCh, newStartIdx)\n\t\t\t\t\toldCh[idxInOld] = undefined\n\t\t\t\t\tcanMove && nodeOps.insertBefore(parentElm, vnodeToMove.elm, oldStartVnode.elm)\n\t\t\t\t} else {\n\t\t\t\t\t// same key but different element. treat as new element\n\t\t\t\t\tcreateElm(newStartVnode, insertedVnodeQueue, parentElm, oldStartVnode.elm, false, newCh, newStartIdx)\n\t\t\t\t}\n\t\t\t}\n\t\t\tnewStartVnode = newCh[++newStartIdx]\n\t\t}\n\t}\n\t```\n\n\tè¿™é‡Œçš„é€»è¾‘ç¨å¾®æœ‰ç‚¹å¤æ‚ï¼Œåœ¨ oldCh å’Œ ch ä¸­ï¼Œæä¾›å››ä¸ªæŒ‡é’ˆ\n\n\t![](https://sfmonkey.github.io//post-images/1584511735002.jpeg)\n\n* oldCh å’Œ ch æŒ‡é’ˆä¸¤ä¸¤è¿›è¡Œ sameVnode æ¯”è¾ƒï¼Œå…±åˆ†å››ç§æƒ…å†µ\n\t* oldS å’Œ S åŒ¹é…ï¼Œé‚£ä¹ˆä¸¤è€…è¿›è¡Œ patchVnodeï¼ŒåŒ¹é…ä¸Šçš„ä¸¤ä¸ªæŒ‡é’ˆå‘ä¸­é—´ç§»åŠ¨\n\t* oldE å’Œ E åŒ¹é…ï¼Œé‚£ä¹ˆä¸¤è€…è¿›è¡Œ patchVnodeï¼ŒåŒ¹é…ä¸Šçš„ä¸¤ä¸ªæŒ‡é’ˆå‘ä¸­é—´ç§»åŠ¨\n\t* oldS å’Œ E åŒ¹é…ï¼Œé‚£ä¹ˆä¸¤è€…è¿›è¡Œ patchVnodeï¼ŒåŒ¹é…ä¸Šçš„ä¸¤ä¸ªæŒ‡é’ˆå‘ä¸­é—´ç§»åŠ¨ï¼ŒçœŸå® DOM ä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä¼šç§»åŠ¨åˆ°æœ€å\n\t* oldE å’Œ S åŒ¹é…ï¼Œé‚£ä¹ˆä¸¤è€…è¿›è¡Œ patchVnodeï¼ŒåŒ¹é…ä¸Šçš„ä¸¤ä¸ªæŒ‡é’ˆå‘ä¸­é—´ç§»åŠ¨ï¼ŒçœŸå® DOM ä¸­çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ä¼šç§»åŠ¨åˆ°æœ€å‰\n\n* å¦‚æœå››ç§åŒ¹é…éƒ½æ²¡æœ‰æˆåŠŸï¼Œåˆ™åˆåˆ†ä¸ºä¸¤ç§æƒ…å†µ\n\n\t* å¦‚æœæ–°æ—§èŠ‚ç‚¹éƒ½å­˜åœ¨keyï¼Œé‚£ä¹ˆä¼šæ ¹æ® oldCh çš„key ç”Ÿæˆä¸€å¼  hashè¡¨ï¼Œç”¨Sçš„keyä¸ hashåŒ¹é…ï¼Œå¦‚æœåŒ¹é…æˆåŠŸå°±åˆ¤æ–­ S å’ŒåŒ¹é…èŠ‚ç‚¹æ˜¯å¦æ˜¯ sameNodeï¼Œå¦‚æœæ˜¯ï¼Œå°±è¿›è¡Œ patchVnodeï¼Œå°† DOM æ”¾åœ¨ oldS å‰é¢ï¼Œç„¶åç§»åŠ¨ Sï¼Œå¦åˆ™å‰©ä¸‹æƒ…å†µå°±åˆ›å»ºæ–°çš„ DOMï¼Œæ’å…¥ oldS çš„ä½ç½®ï¼Œç„¶å S æŒ‡é’ˆå‘ä¸­é—´ç§»åŠ¨ã€‚\n\t* å¦‚æœæ²¡æœ‰keyï¼Œåˆ™ç›´æ¥åˆ›å»ºæ–°DOM æ’å…¥ oldS ä½ç½®\n\n* å½“ç„¶ï¼Œåœ¨æœ€åï¼Œç»“æŸæ¡ä»¶å³ oldS > oldE æˆ–è€… S > E å\n\n\t```js\n\tif (oldStartIdx > oldEndIdx) {\n\t\trefElm = isUndef(newCh[newEndIdx + 1]) ? null : newCh[newEndIdx + 1].elm\n\t\taddVnodes(parentElm, refElm, newCh, newStartIdx, newEndIdx, insertedVnodeQueue)\n\t} else if (newStartIdx > newEndIdx) {\n\t\tremoveVnodes(oldCh, oldStartIdx, oldEndIdx)\n\t}\n\t```\n\t\n\t* å¦‚æœ oldStartIdx > oldEndIdx ï¼Œé‚£ä¹ˆå°† S ä¸ E åŠä¸¤è€…ä¹‹é—´çš„è¿›è¡Œ DOM æ–°å¢\n\t* å¦‚æœ newStartIdx > newEndIdx ï¼Œé‚£ä¹ˆå°† oldS ä¸ oldE åŠä¸¤è€…ä¹‹é—´çš„è¿›è¡Œ DOM åˆ é™¤\n\n### å‚è€ƒèµ„æ–™\n[è¯¦è§£vueçš„diffç®—æ³•](https://juejin.im/post/5affd01551882542c83301da#heading-6)",
      "data": {
        "title": "Vue diff Essay",
        "date": "2020-03-18 11:00:14",
        "tags": [
          "Vue",
          "Essay"
        ],
        "published": true,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "vue-diff-essay"
    },
    {
      "content": "### æ¦‚è¦\n\nå’Œ Vue ä¸€æ ·ï¼Œåœ¨å®ç° React ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å¼„æ¸…æ¥š React åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œè¿™æ ·æ‰æ–¹ä¾¿æˆ‘ä»¬å»å®ç°å®ƒã€‚\n\n* React æ˜¯ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript åº“\n\n* React ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„ MVC æ¡†æ¶ï¼Œæœ€å¤šå¯ä»¥è®¤ä¸ºæ˜¯ MVC ä¸­çš„ Vï¼ˆviewï¼‰\n\næ‰€ä»¥æˆ‘ä»¬å®ç° React çš„æ—¶å€™ï¼Œåªéœ€è¦å…³æ³¨ React å¦‚ä½•å¤„ç† UI å°±å¯ä»¥äº†ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸‰ä¸ª api\n\n* createElement\n\n* render\n\n* component\n\n### createElement\n\n* createElement å‡½æ•°å¸®åŠ©æˆ‘ä»¬ç”Ÿæˆ vnodeï¼ˆè™šæ‹Ÿå‡½æ•°ï¼‰\n\n\t```js\n\t// react.js\n\tfunction createElement(type, props, ...children) {\n\t\tif (props) {\n\t\t\tdetele props.__source,\n\t\t\tdelete props.__self\n\t\t}\n\t\t\n\t\treturn {\n\t\t\ttype: type,\n\t\t\tprops: {\n\t\t\t\t...props,\n\t\t\t\tchildren: children.map(child => {\n\t\t\t\t\ttypeof child === 'object' ? child : createTextNode(child);\n \t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction createTextNode(text) {\n\t\treturn {\n\t\t\ttype: \"TEXT\",\n\t\t\tprops: {\n\t\t\t\tchildren: [],\n\t\t\t\tnodeValue: text\n\t\t\t}\n\t\t}\n\t}\n\t\n\texport default {\n\t\tcreateElement\n\t}\n\t```\n\t\n### render\n\t\n* æˆ‘ä»¬å†ä½¿ç”¨ render å‡½æ•°å°† vnode è½¬æ¢ä¸º node\n\n\t```js\n\t// react-dom.js\n\tfunction render (vnode, container) {\n\t\tconst node = createNode(vnode);\n\n\t\tcontainer.appendChild(node);\n\t}\n\n\tfunction createNode(vnode) {\n\t\tconst {type, props} = vnode;\n\t\tlet node;\n\n\t\tif (typeof type === 'function') {\n\t\t\tnode = type.isReactComponent ? updateClassComponent(vnode) : updateFunctionComponent(vnode)\n\t\t} else if (type === 'TEXT') {\n\t\t\tnode = document.createTextNode(\"\");\n\t\t} else if (type) {\n\t\t\tnode = document.createElement(type);\n\t\t} else {\n\t\t\tnode = document.createDocumentFragment();\n\t\t}\n\t\tupdateNode(node, props);\n\t\treconcilerChildren(props.children, node);\n\n\t\treturn node;\n\t}\n\n\tfunction updateNode(node, props) {\n\t\tObject.keys(props)\n\t\t\t.filter(k => k !== 'children')\n\t\t\t.forEach(k => {\n\t\t\t\tif (k.slice(0,2) === 'on') {\n\t\t\t\t\tlet eventName = k.slice(2).toLocaleLowserCase();\n\t\t\t\t\tnode.addEventListener(eventName, props[K]);\n\t\t\t\t} else {\n\t\t\t\t\tnode[k] = props[k];\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tfunction reconcilerChildren(children, node) {\n\t\tfor (let i =0; i < children.length, i++) {\n\t\t\tlet child = children[i];\n\n\t\t\tif (Array.isArray(child)) {\n\t\t\t\tfor (let i =0; i < child.length, i++){\n\t\t\t\t\trender(child[i], node);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\trender(child, node);\n\t\t\t}\n\t\t}\n\t}\n\n\texport default {\n\t\trender\n\t}\n\t```\n\n* éœ€è¦å¯¹ type ç±»å‹è¿›è¡Œåˆ¤æ–­ï¼Œæ ¹æ®ä¸åŒçš„ type åˆ›å»ºä¸åŒçš„å…ƒç´ ï¼Œæ¯”è¾ƒç‰¹æ®Šçš„æ˜¯å‡½æ•°ç»„ä»¶å’Œ Class ç»„ä»¶\n\n\t```js\n\tfunction updateClassComponent(vnode) {\n\t\tconst {type, props} = vnode;\n\t\tconst cmp = new type(props);\n\t\tconst vvnode = cmp.render();\n\t\tconst node = createNode(vvnode);\n\n\t\treturn node;\n\t}\n\n\tfunction updateFunctionComponent(vnode) {\n\t\tconst {type, props} = vnode;\n\t\tconst vvnode = type(props);\n\t\tconst node = createNode(vvnode);\n\n\t\treturn node;\n\t}\n\t```\n\t\n### component\n\n* ä¸Šé¢ç”¨åˆ°çš„ isReactComponent å±æ€§å°±æ˜¯åœ¨ Component ä¸­å®šä¹‰çš„\n\n\t```js\n\texport default class Component {\n\t\tstatic isReactComponent  = {};\n\t\tconstructor(props) {\n\t\t\tthis.props = props;\n\t\t}\n\t}\n\t```\n\n* å…¶å®ï¼Œå¦‚æœç”¨ä¸Šé¢çš„æ–¹å¼å®ç°ä¸€ä¸ªæ—¶é’Ÿï¼Œæˆ‘ä»¬åªèƒ½æ¯æ¬¡éƒ½åˆ é™¤åŸæ¥çš„æ‰€æœ‰èŠ‚ç‚¹å¹¶é‡æ–°åˆ›å»º\n\n\t```js\n\tconst rootDom = document.getElementById(\"root\");\n\n\tfunction tick() {\n\t\tconst time = new Date().toLocaleTimeString();\n\t\tconst clockElement = <h1>{time}</h1>;\n\t\trender(clockElement, rootDom);\n\t}\n\n\ttick();\n\tsetInterval(tick, 1000);\n\t```\n\n\tå¾ˆæ˜æ˜¾çš„ï¼Œè¿™ä¸ªåœ¨æ€§èƒ½ä¸Šæ˜¯ä¸å¯æ¥å—çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ diff ç®—æ³•ï¼Œè¿™ä¸ªä¸åœ¨æœ¬æ–‡è®¨è®ºã€‚\n\n\n### æ€»ç»“\n\n1. babel å°† jsx è½¬æ¢ä¸º cleateElement\n2. cleateElement å‡½æ•°å¾—åˆ° vnode\n3. render å‡½æ•°å°† vnode è½¬æ¢ä¸º node\n\n\n\n\n\n",
      "data": {
        "title": "Simple React Essay",
        "date": "2020-03-16 11:20:13",
        "tags": [
          "React",
          "Essay"
        ],
        "published": true,
        "hideInList": false,
        "feature": "/post-images/simple-react-essay.jpg"
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "simple-react-essay"
    },
    {
      "content": "### æ¦‚è¦\n\nåœ¨å®ç° Vue ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¦æ¸…æ¥š Vue çš„æ¦‚å¿µï¼ŒçœŸæ­£çš„çŸ¥é“å®ƒæ˜¯ä»€ä¹ˆï¼Œç„¶åæ‰èƒ½çŸ¥é“æ€ä¹ˆå»å®ç°ã€‚\n\n* Vue æ˜¯ä¸€å¥—ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰çš„æ¸è¿›å¼æ¡†æ¶ï¼Œå®ƒçš„æ ¸å¿ƒåº“åªå…³æ³¨è§†å›¾å±‚ã€‚\n\n* Vue æ˜¯ä¸€ä¸ª MVVM æ¡†æ¶ã€‚\n\n\tå®ç° MVVM ä¸»è¦æœ‰ä¸‰ä¸ªæ ¸å¿ƒç‚¹ï¼š\n\n\t* æ•°æ®å“åº”å¼ï¼šç›‘å¬æ•°æ®å˜åŒ–å¹¶åœ¨è§†å›¾ä¸­æ›´æ–°\n\n\t\t* Object.defineProperty()\n\t\t\n\t\t* Proxy\n\t\n\t* æ¨¡ç‰ˆå¼•æ“ï¼šæä¾›æè¿°è§†å›¾çš„æ¨¡ç‰ˆè¯­æ³•\n\n\t\t* æ’å€¼ï¼š{{}}\n\n\t\t* æŒ‡ä»¤ï¼šv-bindï¼Œv-onï¼Œv-modelï¼Œv-forï¼Œv-if\n\n\t* æ¨¡ç‰ˆæ¸²æŸ“ï¼šå¦‚ä½•å°†æ¨¡ç‰ˆè½¬æ¢ä¸º html\n\n\t\t* æ¨¡ç‰ˆ -> vdom -> dom\n\n\tæ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬å»å®ç°ï¼Œå¯ä»¥ä» MVVM ç»“æ„ï¼Œä¸‰ä¸ªæ ¸å¿ƒç‚¹å»ç€åŠ›å®ç°ã€‚\n\t\n### æ•°æ®å“åº”å¼\n\nè¿™é‡Œæˆ‘ä»¬åªè®² defineProperty å®ç°çš„æ•°æ®å“åº”å¼ã€‚\n\n* é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå‡½æ•°ï¼Œå»å¸®åŠ©æˆ‘ä»¬ç»™æ•°æ®èµ‹äºˆå“åº”å¼çš„èƒ½åŠ›\n\n\t```js\n\tfunction defineReactive(obj,key,val) {\n\t\tObject.defineProperty(obj, key, {\n\t\t\tget() {\n\t\t\t\tconsole.log(`get ${key}:${val}`);\n\t\t\t\treturn val;\n\t\t\t},\n\t\t\tset(newVal) {\n\t\t\t\tif (newVal !== val) {\n\t\t\t\t\tconsole.log(`set ${key}:${newVal}`);\n\t\t\t\t\tval = newVal;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\t```\n\t\n* å½“æˆ‘ä»¬ç»“åˆè§†å›¾æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªæ›´æ–°å‡½æ•°äº†\n\n\t```html\n\t<html>\n\t\t<head></head>\n\t\t<body>\n\t\t\t<div id=\"app\"></div>\n\t\t\t<script>\n\t\t\t\t\tfunction defineReactive(obj,key,val) {\n\t\t\t\t\t\tObject.defineProperty(obj, key, {\n\t\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\t\tconsole.log(`get ${key}:${val}`);\n\t\t\t\t\t\t\t\treturn val;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tset(newVal) {\n\t\t\t\t\t\t\t\tif (newVal !== val) {\n\t\t\t\t\t\t\t\t\tconsole.log(`set ${key}:${newVal}`);\n\t\t\t\t\t\t\t\t\tval = newVal;\n\t\t\t\t\t\t\t\t\tupdate();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tconst obj = {};\n\t\t\t\t\tdefineReactive(obj, 'foo', '');\n\t\t\t\t\tobj.foo = new Date().toLocaleTimeString();\n\t\t\t\t\n\t\t\t\t\t//! æ›´æ–°å‡½æ•°\n\t\t\t\t\tfunction update(val) {\n\t\t\t\t\t\tapp.innerText = obj.foo;\n\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\tsetInterval(() => {\n\t\t\t\t\t\tobj.foo = new Date().toLocaleTimeString();\n\t\t\t\t\t}, 1000);\n\t\t\t</script>\n\t\t</body>\n\t</html>\n\t```\n\n* å½“ç„¶ï¼Œç”¨æˆ·ä¸å¯èƒ½åªä¼ å…¥ä¸€ä¸ªå±æ€§ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ä¼ å…¥çš„æ•°æ®è¿›è¡Œéå†\n\n\t```js\n\tfunction observe(obj) {\n\t\t// å½“ä¼ å…¥çš„æ•°æ®ä¸æ˜¯å¯¹è±¡æˆ–è€…ä¸ºç©ºæ—¶ï¼Œè¿”å›\n\t\tif (typeof obj !== 'object' || obj == null) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tObject.keys().forEach(key= > defineReactive(obj, key, obj[key]));\n\t}\n\n\tfunction defineReactive(obj,key,val) {\n\t\tobserve(val); //! val æ˜¯å¯¹è±¡çš„æƒ…å†µ\n\t\tObject.defineProperty(obj, key, {\n\t\t\tget() {\n\t\t\t\tconsole.log(`get ${key}:${val}`);\n\t\t\t\treturn val;\n\t\t\t},\n\t\t\tset(newVal) {\n\t\t\t\tif (newVal !== val) {\n\t\t\t\t\tconsole.log(`set ${key}:${newVal}`);\n\t\t\t\t\tobserve(newVal)//! èµ‹å€¼æ˜¯å¯¹è±¡çš„æƒ…å†µ\n\t\t\t\t\tval = newVal;\n\t\t\t\t\tupdate();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\t```\n\t\n* è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œå°±æ˜¯æˆ‘ä»¬ç»™å¯¹è±¡æ·»åŠ æ–°çš„å±æ€§,è¿™æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨ä¸ºå…¶èµ‹äºˆå“åº”å¼èƒ½åŠ›\n\n\t```js\n\tfunction set(obj, key, val) {\n\t\tdefineReactive(obj, key, val)\n\t}\n\t```\n\n### æ¨¡ç‰ˆå¼•æ“ä»¥åŠæ¸²æŸ“\n\n* è¿™é‡Œæˆ‘ä»¬ä¸å»è€ƒè™‘å¦‚ä½•å®ç°æ¨¡ç‰ˆå¼•æ“ï¼Œä»¥åŠ æ¨¡ç‰ˆ-> vnode -> dom çš„è¿‡ç¨‹ä¸­ vnode çš„éƒ¨åˆ†ï¼Œåªè€ƒè™‘ æ¨¡ç‰ˆ -> domã€‚\n\n\t```js\n\tclass Compile {\n\t\tconstructor(el, vm) {\n\t\t\tthis.$vm = vm;\n\t\t\tthis.$el = document.querySelector(el);\n\n\t\t\tif (this.$el) {\n\t\t\t\tthis.compile(this.$el);\n\t\t\t}\n\t\t}\n\n\t\tcompile(el) {\n\t\t\tconst childNodes = el.childNodes;\n\n\t\t\tArray.from(childNodes).forEach(node => {\n\t\t\t\tif (this.isElement(node)) {\n\t\t\t\t\tthis.compileElement(node);\n\t\t\t\t} else if (this.isInterpolation(node)) {\n\t\t\t\t\tthis.compileText(node);\n\t\t\t\t}\n\n\t\t\t\tif(node.childNodes && node.childNodes.length > 0) {\n\t\t\t\t\tthis.compile(node);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t```\n\t\n* å…³äº isElementï¼ŒisInterpolation, compileElement, compileText å‡½æ•°\n\n\t```js\n\tfunction isElement(node) {\n\t\treturn node.nodeType === 1;\n\t}\n\n\tfunction isInterpolation(node) {\n\t\treturn node.nodeType === 3 && /\\{\\{(.*)\\}\\}/.test(node.textContent);\n\t}\n\n\tfunction compileElement(node) {\n\t\tlet nodeAttrs = node.attributes;\n\t\tArray.from(nodeAttrs).forEach(attr => {\n\t\t\tlet name = attr.name;\n\t\t\tlet value = attr.value;\n\t\t\tif (this.isDirective(name)) {\n\t\t\t\tlet dir = name.substring(2);\n\t\t\t\tthis[dir] && this[dir](node, value)\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction compileText(node) {\n\t\tnode.textContent = this.$vm[RegExp.$1]\n\t}\n\n\tfunction isDirective(attr) {\n\t\treturn attr.indexOf(\"k-\") === 0\n\t}\n\t```\n\t\n* å½“ç„¶ï¼ŒæŒ‡ä»¤å°±å¾ˆå¤šï¼Œæˆ‘ä»¬ç®€å•å†™ä¸¤ä¸ª\n\n\t```js\n\tfunction text(node, value) {\n\t\tnode.textContent = this.$vm[value];\n\t}\n\tfunction html(node, value) {\n\t\tnode.innerHTML = this.$vm[value];\n\t}\n\t```\n\n* åœ¨ compile çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œä¾èµ–æ”¶é›†ï¼Œè¿™é‡Œæˆ‘ä»¬å®ç°çš„æ˜¯ Vue1.0 æ—¶å€™çš„ä¾èµ–æ”¶é›†ï¼Œä¸€ä¸ªä¾èµ–ä¸€ä¸ªwatcherï¼Œä¸€ä¸ªæ•°æ®å“åº”å¼çš„ Key ä¸€ä¸ª Dep\n\t\n\t*  watcher ç±»\n\t\n\t\t```js\n\t\t// watcher\n\t\tclass watcher {\n\t\t\tconstructor(vm, key, updateFn) {\n\t\t\t\tthis.vm = vm;\n\t\t\t\tthis.key = key;\n\t\t\t\tthis.updateFn = updateFn;\n\n\t\t\t\t// è®¢é˜…åˆ° dep\n\t\t\t\tDep.target = this;\n\t\t\t\tthis.vm[this.key];\n\t\t\t\tDep.target = null;\n\t\t\t}\n\n\t\t\tupdate() {\n\t\t\t\tthis.updateFn.call(this.vm, this.vm[this.key]);\n\t\t\t}\n\t\t}\n\t\t```\n\t\n\t* åœ¨ç”Ÿæˆ dom æ—¶è®¢é˜… watcher\n\t\n\t\t```js\n\t\tcompileText(node) {\n\t\t\tthis.update(node, RegExp.$1, 'text');\n\t\t}\n\n\t\tupdate(node, exp, 'text') {\n\t\t\tconst fn = this[dir + 'Updater']\n\t\t\tfn && fn(node, this.vm[exp])\n\n\t\t\tnew watcher(this.vm, exp, function(val) {\n\t\t\t\tfn && fn(node, val)\n\t\t\t})\n\t\t}\n\t\t```\n\t\n\t* Dep ç±»\n\t\n\t\t```js\n\t\t//Dep\n\t\tclass Dep {\n\t\t\tconstructor() {\n\t\t\t\tthis.deps = []\n\t\t\t}\n\n\t\t\taddDep(watcher) {\n\t\t\t\tthis.deps.push(watcher);\n\t\t\t}\n\n\t\t\tnotify() {\n\t\t\t\tthis.deps.forEach(watcher => watcher.update());\n\t\t\t}\n\t\t}\n\t\t```\n\n\t* åœ¨æ•°æ®å“åº”å¼æ—¶ï¼Œå®ä¾‹åŒ– Dep\n\n\t```js\n\tdefineReactive() {\n\t\t...\n\t\t\n\t\tconst dep = new Dep();\n\t\t\n\t\tObject.defineProperty(obj, key, {\n\t\t\tget() {\n\t\t\t\tDep.target && dep.addDep(Dep.target);\n\t\t\t\treturn val;\n\t\t\t},\n\t\t\tset(newVal) {\n\t\t\t\tif (newVal !== val) {\n\t\t\t\t\tobserve(newVal)//! èµ‹å€¼æ˜¯å¯¹è±¡çš„æƒ…å†µ\n\t\t\t\t\tval = newVal;\n\t\t\t\t\tdep.notify();\n\t\t\t\t}\n\t\t\t}\n\t}\n\t```\n\t\n### æ€»ç»“\n\n1. \tdefineReactive ä¸ºæ¯ä¸€ä¸ª key åˆ›å»ºä¸€ä¸ª dep\n2. \tåˆå§‹åŒ–è§†å›¾çš„æ—¶å€™è¯»å–æŸä¸ªæ•°æ®ï¼Œåˆ›å»ºä¸€ä¸ªwatcher\n3. \tç”±äºåœ¨watcherä¸­è¯»å–äº†keyï¼Œä¾¿å°† watcher è®¢é˜…åˆ°äº† dep ä¸­\n4. \tå½“æŸä¸ªkeyæ›´æ–°æ—¶ï¼Œè§¦å‘setterï¼Œç›¸å…³dep é€šçŸ¥æ‰€æœ‰watcheræ›´æ–°\n\n\t![](https://sfmonkey.github.io//post-images/1584324343056.jpg)\n\n\n\t\n\n",
      "data": {
        "title": "Simple Vue Essay",
        "date": "2020-03-13 10:05:16",
        "tags": [
          "Vue",
          "Essay"
        ],
        "published": true,
        "hideInList": false,
        "feature": "/post-images/simple-vue-essay.jpeg"
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "simple-vue-essay"
    },
    {
      "content": "### æ¦‚è¦\n\n* vuex **é›†ä¸­å¼**å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥**å¯é¢„æµ‹**çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚\n\n\t> \tvuex ä¸ vue-router å› ä¸ºéƒ½é‡‡ç”¨ vue çš„å“åº”å¼æœºåˆ¶æ¥å®ç°äº†å¯¹åº” view å±‚çš„æ›´æ–°ï¼Œæ‰€ä»¥ä¸¤ä¸ªéƒ½ä¾èµ– vue æ‰èƒ½ä½¿ç”¨\n\n* æ ¸å¿ƒæ¦‚å¿µ\n\t* state çŠ¶æ€æ•°æ®\n\t* mutations æ›´æ”¹çŠ¶æ€çš„å‡½æ•°ï¼Œcommit è§¦å‘\n\t* actions å¼‚æ­¥æ“ä½œï¼Œdispatch è§¦å‘\n\t* store åŒ…å«ä»¥ä¸Šæ¦‚å¿µçš„å®¹å™¨\n\n### æ’ä»¶æœºåˆ¶\n\n* è¿™ä¸ªä¹‹å‰ vue-router å†™è¿‡ï¼Œç›´æ¥ä¸Šä»£ç \n\n\t```js\n\tconst install = (_vue) => {\n\t\tlet vue = _vue;\n\n\t\tvue.mixin({\n\t\t\tbeforeCreate() {\n\t\t\t\tif (this.$options.store) {\n\t\t\t\t\tvue.prototype.$store = this.$options.store;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tif (type window === 'object' && window.vue) {\n\t\tinstall(window.vue);\n\t}\n\t```\n\n### state\n\n* ä½¿ç”¨\n\n\t```js\n\t// store.js\n\texport default new Vuex.store({\n\t\tstate: {counter: 0}\n\t});\n\t\n\t// page.vue\n\tconsole.log(this.$store.state.counter)\n\t```\n\t\n* å®ç°\n\n\t```js\n\tclass Store {\n\t\tconstructor(options = {}){\n\t\t\tthis._vm = new Vue({\n\t\t\t\tdata: {\n\t\t\t\t\t$$state: options.state\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tget state() {\n\t\t\treturn this._vm._data.$$state\n\t\t}\n\n\t\tset state(v) {\n\t\t\tconsole.error('you can not set state immediately');\n\t\t}\n\t}\n\t```\n\n### mutations\n\n* ä½¿ç”¨\n\n\t```js\n\texport default new vuex.store({\n\t\tmutations: {\n\t\t\tadd(state,payload) {\n\t\t\t\tstate.counter ++\n\t\t\t}\n\t\t}\n\t});\n\t```\n\n* å®ç°\n\n\t```js\n\tclass Store {\n\t\tconstructor(options = {}) {\n\t\t\tthis._mutations = options.mutations || {};\n\t\t}\n\n\t\tcommit(type, payload) {\n\t\t\tconst entry = this._mutations[type];\n\n\t\t\tif (!entry) {\n\t\t\t\tconsole.error(`unknown mutation type: ${type}`);\n\t\t\t\treturn ;\n\t\t\t}\n\n\t\t\tentry(this.state, payload);\n\t\t}\n\t}\n\t```\n\n### actions\n\n* ä½¿ç”¨\n\n\t```js\n\texport default new vuex.Store({\n\t\tactions: {\n\t\t\tadd({commit}, payload) {\n\t\t\t\tsetTimeout(()=> {\n\t\t\t\t\tcommit('add');\n\t\t\t\t}, 1000);\n\t\t\t}\n\t\t}\n\t});\n\t```\n\n* å®ç°\n\n\t```js\n\tclass Store {\n\t\tconstructor(options = {}) {\n\t\t\tthis._actions = options.actions || {}\n\n\t\t\tthis.commit = this.commit.bind(this);\n\t\t\tthis.action = this.action.bind(this);\n\t\t}\n\n\t\tdispatch(type, payload) {\n\t\t\tconst entry = this._actions[type];\n\n\t\t\tif (!entry) {\n\t\t\t\tconsole.error(`unknown action type: ${type}`);\n\t\t\t\treturn ;\n\t\t\t}\n\n\t\t\treturn entry(this, payload);\n\t\t}\n\t}\n\t```\n\t\n### getters\n\n* ä½¿ç”¨\n\n\t```js\n\texport default new vuex.Store({\n\t\tgetters: {\n\t\t\tdoubleCounter(state) {\n\t\t\t\treturn state.counter * 2;\n\t\t\t}\n\t\t}\n\t});\n\t```\n\n* å®ç°\n\n\t```js\n\tclass Store {\n\t\tconstructor(options = {}) {\n\t\t\tconst _getters = options.getters || {}\n\t\t\tthis._vm = new vue({\n\t\t\t\tcomputed: _getters\n\t\t\t});\n\n\t\t\tfor(key in _getters) {\n\t\t\t\tObject.defineProperty(this.getters, key, {\n\t\t\t\t\tget: () => this._vm[key],\n\t\t\t\t\tenumerable: true // for local getters\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\t```\n\n\n\n",
      "data": {
        "title": "Vuex Essay",
        "date": "2020-03-11 14:24:36",
        "tags": [
          "Vue",
          "Essay"
        ],
        "published": true,
        "hideInList": false,
        "feature": "/post-images/vuex-essay.jpg"
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "vuex-essay"
    },
    {
      "content": "### æ¦‚è¦\n\nReact-redux æ˜¯ React çš„çŠ¶æ€åº”ç”¨ï¼Œå¯ä»¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ä¸”æ˜“äºè¿½æº¯å’Œæµ‹è¯•ã€‚å…³äº React-reduxï¼Œå‰ç½®çŸ¥è¯†æœ‰ï¼š\n\n* context\n* redux\n\næ¥ç€æ‰æ˜¯ä¸»èœ\n\n* react-redux\n\n### Context\n\nè¿™é‡Œçš„ Context æŒ‡çš„æ˜¯ React çš„ä¸Šä¸‹æ–‡ï¼Œå±äº React çš„é«˜çº§éƒ¨åˆ†ï¼Œè™½ç„¶å®˜æ–¹è®¤ä¸ºä¸€ä¸ªç¨³å®šçš„ React åº”ç”¨ä¸åº”è¯¥ä½¿ç”¨ Contextï¼Œä½†æ˜¯è®¸å¤šçš„ä¼˜ç§€çš„ React åº“éƒ½ä½¿ç”¨äº† Contextï¼Œæ¯”å¦‚ React-router ä»¥åŠ React-reduxã€‚\n\nContext çš„ API æœ‰ä¸‰ä¸ª (hooks ç›¸å…³çš„è¿™é‡Œä¸åšè®¨è®º)\n\n* CreateContext ï¼ˆå¯ä»¥ç†è§£ä¸ºç§èœçš„ï¼‰\n\n\t```js\n\t// å‚æ•°å¯ä»¥æ¥æ”¶åˆå§‹å€¼\n\tconst UserContext = React.CreateContext({name: \"potter\"});\n\t```\n\n* Provider ï¼ˆå¯ä»¥ç†è§£ä¸ºæ”¶èœçš„ä¾›è´§å•†ï¼‰\n\n\t```js\n\tconst UserProvider = UserContext.Provider;\n\t```\n\n\tä½¿ç”¨æ–¹å¼ï¼š\n\n\t```jsx\n\trender() {\n\t\treturn <UserProvider></UserProvider>\n\t}\n\t```\n\n* Cosumer ï¼ˆå¯ä»¥ç†è§£ä¸ºæ¶ˆè´¹è€…ï¼‰\n\n\t```js\n\tconst UserCosumer = UserContext.Cosumer;\n\t```\n\n\tä½¿ç”¨æ–¹å¼ï¼š\n\n\t```jsx\n\trender() {\n\t\treturn <UserCosumer>{\n\t\t\tcontext => {}\n\t\t}</UserCosumer>\n\t}\n\t```\n\n\tè¿™é‡Œæ¥æ”¶ Context è¿˜æœ‰å¦å¤–ä¸€ç§æ–¹å¼ï¼Œå³åœ¨ Class ç»„ä»¶ä¸­\n\n\t```js\n\t// è¿™ç§æ¥æ”¶æ–¹å¼åªèƒ½è·å–å•ä¸€ Contextï¼Œé€šè¿‡ this.context è·å–ä¼ é€’å†…å®¹\n\tClass User extend Component {\n\t\tstatic contextType = UserContext\n\t}\n\t```\n\t\n### Redux\n\nRedux æ˜¯ Js åº”ç”¨çš„çŠ¶æ€å®¹å™¨ã€‚\n\t\n* ä½¿ç”¨æ–¹å¼\n\n\tredux åœ¨ä½¿ç”¨æ—¶ï¼Œå¤§æ¦‚åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š\n\n\t* reducer çº¯å‡½æ•°åˆ¶å®šä¿®æ”¹è§„åˆ™\n\t* createStore åˆ›å»º store\n\t* store.getState å¾—åˆ°æ•°æ®\n\t* store.dispatch æ›´æ”¹æ•°æ®\n\t* store.subscribe è®¢é˜…æ•°æ®æ”¹åŠ¨\n\n* å®ç°\n\n\t* redux çš„å®ç°ä¸»è¦è€ƒè™‘çš„æ˜¯ createStore ï¼Œ è¿”å›çš„ store ä¸­åŒ…å«å‰©ä¸‹çš„ getStateï¼Œdispath ä¸ subscribeã€‚\n\n\t```js\n\tconst createStore = (reducer, enhancer) => {\n\t\t\n\t\tif(enhancer) { // è¿™é‡Œæ˜¯åˆ¤æ–­æ˜¯å¦æœ‰ redux ä¸­é—´ä»¶ï¼Œå¦‚æœæœ‰ï¼Œå°† createStore ä¸ reducer ä¼ å…¥\n\t\t\treturn enhancer(createStore)(reducer)\n\t\t}\n\t\t\n\t\tlet currentState;\n\t\tlet currentListener = [];\n\t\t\n\t\tfunction getStore() {\n\t\t\treturn currentState;\n\t\t}\n\t\t\n\t\tfunction  dispatch(action) {\n\t\t\tconst currentState = reducer(currentState, action);\n\t\t\tcurrentListener.forEach( v=> v());\n\t\t}\n\t\t\n\t\tfunction subscribe(v) {\n\t\t\tcurrentListener.push(v);\n\t\t}\n\t\t\n\t\t// å¤„ç†åˆå§‹å€¼çš„æƒ…å†µ\n\t\tdispatch({type: '@@INIT'});\n\t\t\n\t\treturn {\n\t\t\tgetState,\n\t\t\tdispatch,\n\t\t\tsubscribe\n\t\t}\n\t}\n\t```\n\t\n\t* redux åªæ˜¯ä¸€ä¸ªçº¯ç²¹çš„çŠ¶æ€ç®¡ç†å™¨ï¼Œé»˜è®¤åªæ”¯æŒåŒæ­¥ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ä¸­é—´ä»¶æ¥æ”¯æŒå¼‚æ­¥ã€‚æ‰€æœ‰çš„ä¸­é—´ä»¶éƒ½æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œé€šè¿‡å¯¹ dispatch çš„æ”¹é€ ï¼Œåœ¨ action ä¸ reducer ä¹‹é—´ï¼Œæ·»åŠ äº†å…¶ä»–çš„åŠŸèƒ½ã€‚\n\n\t\tè¿™é‡Œæˆ‘ä»¬éœ€è¦åšä¸¤ä»¶äº‹ï¼š\n\t\t\n\t\t* createStore å¢åŠ  enhancer å‚æ•°ï¼Œå¢åŠ  applyMiddleware å‡½æ•°\n\n\t\t```js\n\t\tconst applyMiddleware = (...middlewares) => {\n\t\t\treturn createStore => ï¼ˆ...argsï¼‰=> {\n\t\t\t\tconst store = createStore(...args);\n\t\t\t\tconst middleApi = {\n\t\t\t\t\tgetState: store.getState,\n\t\t\t\t\tdispatch: store.dispatch\n\t\t\t\t};\n\t\t\t\tconst middlewaresChain = middlewares.map(middleware => middleware(middleApi))\n\t\t\t\t\n\t\t\t\tlet dispatch = compose(middlewaresChain)(store.dispatch);\n\t\t\t\t\n\t\t\t\treturn {\n\t\t\t\t\t...store,\n\t\t\t\t\tdispatch\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t```\n\t\t\n\t\tè¿™é‡Œé¢è¿˜æ¶‰åŠåˆ°ä¸€ä¸ª compose å‡½æ•°\n\t\t\n\t\t```js\n\t\tconst compose = (...funs) => {\n\t\t\tif (funs.length === 0) {\n\t\t\t\treturn arg => arg;\n\t\t\t}\n\t\t\tif (funs.length === 1) {\n\t\t\t\treturn funs[0];\n\t\t\t}\n\t\t\t\n\t\t\treturn funs.reduce((a,b) => (...args) => a(b(...args)));\n\t\t}\n\t\t```\n\n\t\t* å¤–éƒ¨å…¶ä»–åº“å®ç° redux-thunk ï¼Œ redux-logger ç­‰ä¸­é—´ä»¶\n\n\t\t```js\n\t\t// redux-thunk\n\t\tfunction thunk({dispatch, getState}) {\n\t\t\treturn dispatch  => action => {\n\t\t\t\tif (typeof action === \"function\") {\n\t\t\t\t\treturn action(dispatch, getState);\n\t\t\t\t} else {\n\t\t\t\t\treturn dispatch(action)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t// redux-logger\n\t\tfunction logger() {\n\t\t\treturn dispath => action => {\n\t\t\t\tconsole.log(action.type + 'æ‰§è¡Œäº†');\n\t\t\t\treturn dispatch(action);\n\t\t\t}\n\t\t}\n\t\t```\n\t\t\n### react-redux\n\n* å‡ºç°åŸå› \n\n\tRedux å’Œ React ä¸€èµ·ç”¨çš„æ—¶å€™æœ‰ä¸¤ä¸ªä¸å¤ªå®Œç¾çš„åœ°æ–¹\n\n\t* store æ¯ä¸ªç»„ä»¶éƒ½éœ€è¦å¼•å…¥\n\t* æ¯æ¬¡éƒ½éœ€è¦è°ƒç”¨è®¢é˜…å‡½æ•°ï¼Œåœ¨é‡Œé¢è§¦å‘ render\n\n  React-redux å¸®åŠ©æˆ‘ä»¬è§£å†³äº†è¿™ä¸¤ä¸ªç—›ç‚¹ï¼Œæä¾›äº†ä¸¤ä¸ª API\n\n\t* Provider ä¸ºåä»£ç»„ä»¶æä¾› store\n\t* connect ä¸ºç»„ä»¶æä¾›æ•°æ®å’Œå˜æ›´æ–¹æ³•\n\n* ä½¿ç”¨\n\n\t* Provider\n\n\t```js\n\t//ä¸€èˆ¬æ”¾åœ¨æ ¹ç»„ä»¶å¤–å±‚ï¼Œæ–¹ä¾¿åä»£ç»„ä»¶è°ƒç”¨\n\tReactDOM.render(\n\t<Provider store={store}>\n\t\t<App/>\n\t</Provider>,\n\tdocument.getElementById('root')\n\t);\n\t```\n\t\n\t* connect\n\n\t```js\n\texport default connect(\n\t\t// mapStateToProps Function (state, ownProps)\n\t\t// ! ownProps éœ€è¦è°¨æ…ä½¿ç”¨ï¼Œå¦‚æœå®ƒå‘ç”Ÿå˜åŒ–ï¼ŒmapStateToProps å°±ä¼šæ‰§è¡Œï¼Œé‡Œé¢çš„ state ä¼šè¢«é‡æ–°è®¡ç®—\n\t\t// ! å®¹æ˜“å½±å“æ€§èƒ½\n\t\tstate => ({num: state.num}),\n\t\t\n\t\t// mapDispatchToProps Object/Function/undefined \n\t\t// ! å¦‚æœä¸å®šä¹‰ï¼Œé»˜è®¤æŠŠ dispatch æ³¨å…¥ç»„ä»¶\n\t\t// ! å¦‚æœæ˜¯å¯¹è±¡çš„è¯ï¼ŒåŸç‰ˆçš„ dispatch å°±æ²¡æœ‰è¢«æ³¨å…¥äº†\n\t\t{\n\t\t\tadd: () => ({type: 'ADD'})\n\t\t},\n\t\t// ! å¦‚æœæ˜¯Function (dispatch, ownProps) çš„è¯ï¼ŒåŒæ ·è°¨æ…ä½¿ç”¨ ownProps\n\t\t(dispatch) => {\n\t\t\tlet res = {add: ()=> ({type: 'ADD'}), minus: ()=> ({type: 'MINUS'})};\n\t\t\t\n\t\t\t// bindActionCreators å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç”¨ dispatch å¯¹ action creator è¿›è¡ŒåŒ…è£…\n\t\t\tres = bindActionCreators(res, dispatch);\n\t\t\t\n\t\t\treturn {dispatch, ...res}\n\t\t}\n\t\t\n\t\t// mergeProps Function (mapStateToProps, mapDispatchToProps, ownProps)\n\t\t// ! mapStateToProps, mapDispatchToProps çš„æ‰§è¡Œç»“æœï¼Œä»¥åŠç»„ä»¶è‡ªèº«çš„ prop éƒ½å°†ä½œä¸ºå‚æ•°ä¼ å…¥è¿™ä¸ªå‡½æ•°\n\t\t(mapStateToProps,mapDispatchToProps,ownProps) => {\n\t\t\treturn {omg:\"omg\",...mapStateToProps,...mapDispatchToProps,...ownProps}\n\t\t}\n\t\t\n\t)(<SomePage></SomePage>);\n\t```\n\n*  å®ç°\n\n\t* Provider\n\n\t```js\n\tclass Provider extends Component {\n\t\trender () {\n\t\t\treturn <ValueContext.Provider value={this.props.store}>{this.props.children}</ValueContext.Provider>\n\t\t}\n\t}\n\t```\n\t\n\t* connect\n\n\t```js\n\tconst connect = (mapStateToProps = state =>state , mapDispatchToProps) => WrappedComponent => {\n\t\treturn class extends Component {\n\t\t\tstatic contextType = ValueContext;\n\t\t\tconstructor(props) {\n\t\t\t\tsuper(props);\n\t\t\t\tthis.state = {\n\t\t\t\t\tprops: {}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tcomponentDidMount() {\n\t\t\t\tthis.update();\n\t\t\t\tconst {subscribe} = this.context;\n\t\t\t\tsubscribe(() => {\n\t\t\t\t\tthis.update();\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tupdate() {\n\t\t\t\tconst {getState, dispatch} = this.context;\n\t\t\t\t\n\t\t\t\tconst stateProps = mapStateToProps(getState());\n\t\t\t\tlet dispatchProps;\n\t\t\t\tif (typeof mapDispatchToProps === 'object') {\n\t\t\t\t\tdispatchProps = bindActionCreators(mapDispatchToProps, dispatch);\n\t\t\t\t}else if (typeof mapDispatchToProps === 'function') {\n\t\t\t\t\tdispatchProps = mapDispatchToProps(dispatch, this.props);\n\t\t\t\t}else {\n\t\t\t\t\tdispatchProps = {dispatch};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.setState({\n\t\t\t\t\tprops: {\n\t\t\t\t\t\t...stateProps,\n\t\t\t\t\t\t...dispatchProps\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\treturn <WrappedComponent {...this.props} {...this.state.props}></WrappedComponent>\n\t\t}\n\t}\n\t```\n\t\n\t* bindActionCreators\n\n\t```js\n\tconst bindActionCreator = (creator, dispatch) => {\n\t\treturn (...args) => dispatch(creator(...args));\n\t}\n\n\tconst bindActionCreators = (creators, dispatch) => {\n\t\tconst obj = {};\n\t\tfor(const key in creators){\n\t\t\tobj[key] = bindActionCreator(creators[key], dispatch)\n\t\t}\n\t\treturn obj;\n\t}\n\t```\n\n\n\n\t\n\t\n\t\n\t\n\t",
      "data": {
        "title": "React-redux Essay",
        "date": "2020-03-10 11:58:34",
        "tags": [
          "React",
          "Essay"
        ],
        "published": true,
        "hideInList": false,
        "feature": "/post-images/react-redux-essay.jpg"
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "react-redux-essay"
    },
    {
      "content": "### æ¦‚è¦\n\nVue Router çš„å®ç°å¤§è‡´åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†\n\n* æ’ä»¶æœºåˆ¶\n* router-link\n* router-view\n\nVue Router ä¸€å…±æœ‰ä¸‰ç§æ¨¡å¼ï¼Œ hashï¼ˆé»˜è®¤ï¼‰ï¼Œhistory ä»¥åŠ abstractï¼ˆæ”¯æŒ Nodejs è¿è¡Œç¯å¢ƒï¼‰ ï¼Œæˆ‘ä»¬è¿™é‡Œæš‚ä¸”åªè°ˆ hash æ¨¡å¼ã€‚\n\n### æ’ä»¶æœºåˆ¶\n\nVue Router æ˜¯ä½œä¸º**æ’ä»¶**çš„å½¢å¼æ¥å…¥åˆ° Vue ä¸­çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å®ç° Vue Router çš„å…·ä½“åŠŸèƒ½å‰ï¼Œéœ€è¦å…ˆå®ç° Vue æ’ä»¶æœºåˆ¶ã€‚\n\n* æ’ä»¶ä¸»è¦çš„æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ª install å‡½æ•°\n\n\t```js\n\texport const install = () => {\n\t\tVue.mixin({\n\t\t\tbeforeCreate() {\n\t\t\t\tif (this.$options.router) {\n\t\t\t\t\tVue.prototype.$router = this.$options.router;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tVue.component('RouterView', RouterView);\n\t\tVue.component('RouterLink', RouterLink);\n\t}\n\t```\n\t\n\t> \tè¿™é‡Œä¹‹æ‰€ä»¥è¦æ··å…¥ä¸€ä¸ª beforeCreate ï¼Œæ˜¯æƒ³è¦åˆ¤æ–­ä¸€ä¸‹ new Vue æ—¶æ˜¯å¦æ·»åŠ äº† Router å®ä¾‹ï¼Œä»è€Œæ·»åŠ å…¨å±€ Router å®ä¾‹\n\t\n* å½“ç„¶ä¸ºäº†åº”å¯¹ Vue å¯èƒ½ Script æ ‡ç­¾å¼•å…¥çš„æ–¹å¼ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åˆ¤æ–­å¤„ç†ä¸‹è¿™ç§æƒ…å†µ\n\n\t```js\n\tif (typeof window !== undefined && window.vue) {\n\t\tinstall(window.vue);\n\t}\n\t```\n\t\n### router-link\n\n* **Router-LInk** åº•å±‚å…¶å®ä¹Ÿå°±æ˜¯ä¸ª a æ ‡ç­¾ï¼Œå› ä¸ºæ˜¯ hash æ¨¡å¼ï¼Œto å±æ€§æˆ‘ä»¬ä¼šç›´æ¥ä¼ ç»™ a æ ‡ç­¾çš„ hrefã€‚\n\n* æ ¸å¿ƒä»£ç å¦‚ä¸‹\n\n\t```js\n\tvue.component('RouterLink', {\n\t\tprops: {\n\t\t\t\tto: String, // è¿˜å¯èƒ½æ˜¯ Object\n\t\t\t\trequired: true\n\t\t},\n\t\t//è¿™é‡Œä¸èƒ½ä½¿ç”¨ template ï¼Œå› ä¸ºæˆ‘ä»¬å¼•å…¥çš„ Vue ä¸€èˆ¬æ˜¯ runtime ç‰ˆæœ¬ï¼Œæ²¡æœ‰ compilerï¼Œæ— æ³•è§£æ template\n\t\t//å› ä¸ºè¿™é‡Œæ˜¯ä¸ªjsæ–‡ä»¶ï¼Œå¦‚æœæ˜¯ vue æ–‡ä»¶çš„è¯ï¼Œvue-loader è¿˜å¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£æ template\n\t\trender(h) { \n\t\t\treturn h('a', {attrs: {href: this.to}}, this.$slots.default);\n\t\t}\n\t});\n\t```\n\t\n### router-view\n\n* **router-view** æ˜¯å¸®åŠ©æˆ‘ä»¬æ ¹æ®è·¯ç”±è¿›è¡Œé€‰æ‹©æ€§å±•ç¤º UI çš„ç»„ä»¶ã€‚\n\n\n* å› ä¸º Vue Router æ˜¯æ ¹æ® routes è¡¨æ¥è¿›è¡Œè·¯ç”±é…ç½®çš„ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®å½“å‰çš„ hash æ¥ä¸è·¯ç”±è¡¨è¿›è¡ŒåŒ¹é…ã€‚\n\n\t```js\n\t// VueRouter.js\n\tmatch(routes) {\n\t\troutes = routes || this.$options.routes;\n\n\t\tfor (const route of routes) {\n\t\t\tif (route.path === \"/\" && this.current === \"/\") {\n\t\t\t\tthis.matched.push(route);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (route.path !== \"/\" && this.current.indexOf(route.path) !== -1) {\n\t\t\t\tthis.matched.push(route);\n\t\t\t\tif (route.children) {\n\t\t\t\t\tthis.match(route.children);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\t```\n\t\n\t> \tä¹‹æ‰€ä»¥ç”¨æ•°ç»„æ¥å­˜å‚¨åŒ¹é…çš„è·¯ç”±ï¼Œæ˜¯å› ä¸ºåµŒå¥—è·¯ç”±çš„å­˜åœ¨\n\n* åŒæ ·æ˜¯åµŒå¥—è·¯ç”±çš„å…³ç³»ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª depth å˜é‡ï¼Œæ¥å¸®åŠ©æˆ‘ä»¬æ‰¾åˆ°å¯¹åº”çš„å­è·¯ç”±\n\n\t```js\n\texport default {\n\t\trender () {\n\t\t\t// æ ‡è®°è¯¥ç»„ä»¶æ˜¯å¦ä¸º Router View ç»„ä»¶\n\t\t\tthis.$vode.data.routerView = true\n\n\t\t\tlet depth = 0;\n\t\t\t\n\t\t\tconst parent = this.$parent;\n\t\t\twhile(parent) {\n\t\t\t\tconst vnodeData = parent.$vnode && parent.$vnode.data;\n\t\t\t\tif (vnodeData && vnodeData.routerView) {\n\t\t\t\t\tdepth++\n\t\t\t\t}\n\t\t\t\tparent = parent.$parent;\n\t\t\t}\n\t\n\t\t\tlet component = null;\n\t\t\tconst route = this.$router.matched[depth];\n\t\t\n\t\t\tif (route) {\n\t\t\t\tcomponent = route.component;\n\t\t\t}\n\n\t\t\treturn h(component);\n\t\t}\t\t\n\t}\n\t```\n\t\n* å¦‚æœ match æœ‰äº†å˜åŒ–ï¼Œæˆ‘ä»¬å°±é€šçŸ¥è§†å›¾é‡æ–°æ¸²æŸ“ï¼Œè¿™å°±éœ€è¦ match æ˜¯ä¸€ä¸ªå“åº”å¼æ•°æ®\n\n\t```\n\t// VueRouter.js\n\tVue.until.defineReactive(this, 'matched', []);\n\t```\n\n\n\n\n\n",
      "data": {
        "title": "Vue Router Essay",
        "date": "2020-03-09 08:44:00",
        "tags": [
          "Vue",
          "Essay"
        ],
        "published": true,
        "hideInList": false,
        "feature": "/post-images/vue-router-essay.jpeg"
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "vue-router-essay"
    },
    {
      "content": "### æ¦‚è¦\n\nå…³äº [react-router](http://react-router.docschina.org/) æˆ‘ä»¬æœ€å¸¸ç”¨çš„ API æœ‰ï¼š\n\n* Router\n* Link\n* Route\n* Switch\n* Redirect\n\nè¿™äº”ä¸ª API åŸºæœ¬å°±å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ„å»ºä¸€ä¸ªåŸºç¡€çš„å‰ç«¯è·¯ç”±ç³»ç»Ÿäº†\n\n### Router\n\n* å…¶ä¸­ Router åˆ†ä¸º BrowserRouterï¼ŒHashRouter ä»¥åŠ MemoryRouter ä¸‰ç§ã€‚\n\n\t**BrowserRouter** æ˜¯å®˜æ–¹æœ€ä¸ºæ¨èçš„ä¸€ç§æ–¹å¼ï¼Œå®ƒçš„ä¼˜ç‚¹åœ¨äº URL åœ°å€æŒ‰ç…§è·¯å¾„åˆ’åˆ†ï¼Œè¾ƒä¸ºç®€æ´ä¸ç¾è§‚ï¼Œä½¿ç”¨ HTML5 history API æ¥ä¿æŒé¡µé¢çš„UIä¸URLåŒæ­¥ã€‚ç¼ºç‚¹åœ¨äº BrowserRouter éœ€è¦åç«¯çš„æ”¯æŒï¼Œå› ä¸ºæŒ‰ç…§è·¯å¾„åˆ’åˆ†ï¼Œå°±ä¼šå¯¼è‡´ç”¨æˆ·å¯èƒ½ç›´æ¥è®¿é—®æŸä¸€è·¯å¾„ï¼Œè¿™å°±éœ€è¦æœåŠ¡ç«¯æœ‰ç›¸åº”çš„è·¯ç”±æ”¯æŒã€‚\n\n\t**HashRouter** çš„ä¼˜ç‚¹åœ¨äºç®€å•æ–¹ä¾¿ï¼Œå®ƒåˆ©ç”¨æµè§ˆå™¨ URL Hash æ¥åŒºåˆ†é¡µé¢ pathï¼Œä¸éœ€è¦åç«¯çš„æ”¯æŒã€‚ç¼ºç‚¹åœ¨äº Hash Router ä¸ç®¡åœ¨ URL çš„ç®€æ´æ€§ï¼Œlocation.keyï¼Œlocation.stateçš„æ”¯æŒï¼ŒåŠ¨æ€è·¯ç”±ä»¥åŠå…¶ä»–é—®é¢˜ï¼ˆhash æ˜¯æ²¡æ³•ä¼ ç»™åç«¯çš„ï¼Œå…¶ä»–é¡µé¢æ‹¼æ¥å‚æ•°ä¹Ÿéœ€è¦æ³¨æ„ï¼‰ä¸Šï¼Œéƒ½æ²¡æœ‰ BrowserRouter å¥½ç”¨ã€‚\n\n\t**MemoryRouter** å°† location çš„æ”¹å˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œæˆ‘ä»¬åœ¨ URL ä¸Šæ˜¯æ²¡æœ‰çœ‹åˆ°å˜åŒ–çš„ï¼Œè¿™åœ¨æµ‹è¯•æˆ–éæµè§ˆå™¨ç¯å¢ƒä¸‹éå¸¸é€‚ç”¨ï¼Œæ¯”å¦‚ RNã€‚\n\n* è¿™é‡Œåªè®°å½•ä¸‹ BrowserRouter çš„å®ç°\n\n\tæˆ‘ä»¬éœ€è¦æ˜ç™½ BrowserRouter éœ€è¦æä¾›çš„åŠŸèƒ½æ˜¯ä»€ä¹ˆ\n\n\t* æ²¡å¾—è¯´ï¼Œå±•ç¤º children\n\n\t\t```js\n\t\treturn this.props.chilren\n\t\t```\n\n\t* æä¾›ä¸€ä¸ªcontextï¼Œå°† historyï¼Œlocation ä¼ é€’ä¸‹å»\n\n\t\t```jsx\n\t\t<RouterContext value={{history: this.history, location: this.state.location}}></RouterContext>\n\t\t```\n\n### Link\n\n* Link API åˆ†ä¸º Linkï¼ŒNavLink ä¸¤ç§\n\n\t**Link** å¸®åŠ©æˆ‘ä»¬æä¾›å£°æ˜å¼çš„ï¼Œå¯è®¿é—®çš„å¯¼èˆªã€‚\n\n\t**NavLink** æ˜¯ Link çš„ä¸€ç§ç‰¹æ®Šç‰ˆæœ¬ï¼Œåœ¨ä¸ URL ç›¸åŒ¹é…æ—¶ï¼Œç»™æ¸²æŸ“å…ƒç´ æä¾›ä¸€äº›æ ·å¼ã€‚\n\n* è¿™é‡Œæˆ‘ä»¬æƒ³ä¸€ä¸‹ Link çš„å®ç°\n\n\t* æœ¬è´¨ä¸Šè¿˜æ˜¯ a æ ‡ç­¾\n\n\t```js\n\t<a onClick={handleClick}>{this.props.children}</a>\n\t```\n\t\n\t* æä¾›è·³è½¬åŠŸèƒ½\n\n\tå½“ç„¶æˆ‘ä»¬ä¸èƒ½ä½¿ç”¨åŸç”Ÿçš„ href å±æ€§äº†ï¼Œå› ä¸ºä¼šå¯¼è‡´é¡µé¢çš„åˆ·æ–°ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ HTML history API æ¥å¸®åŠ©æˆ‘ä»¬å®ç°è·¯ç”±è·³è½¬\n\n\t\t```js\n\t\thandleClick(e, history) {\n\t\t\te.preventDefault();\n\t\t\tconst {to} = this.props;\n\t\t\thistory.push(to);\n\t\t}\n\t\t```\n\t\t\n### Route\n\n* **Route** ç»„ä»¶æ˜¯ React Router ä¸­æœ€é‡è¦çš„ç»„ä»¶ï¼Œå®ƒçš„ä½œç”¨æ˜¯åœ¨ location ä¸ Route çš„ path åŒ¹é…æ—¶å‘ˆç°ä¸€äº› UIã€‚\n\n* æˆ‘ä»¬æ¥æƒ³ä¸€ä¸‹å®ç°ï¼Œå®ƒéƒ½æä¾›äº†é‚£äº›åŠŸèƒ½\n\t\n\t* path å±æ€§ï¼Œæˆ‘ä»¬åœ¨å†…éƒ¨åˆ¤æ–­ path ä¸ location æ˜¯å¦ match ï¼Œæ¥æ˜¾ç¤ºå¯¹åº”çš„ UI\n\n\t```js\n\tconst match = matchPath(location.path, {...this.props, path});\n\t```\n\t\n\t* Route çš„ UI å‘ˆç°ï¼Œä¸€å…±æœ‰ä¸‰ç§æ–¹å¼ï¼šchildren > component > render\n\t\n\t\t* å¦‚æœ match åˆ°äº†ï¼Œé‚£ä¹ˆå°±å±•ç¤º childrenï¼Œ component ï¼Œrender æˆ–è€… null\n\t\n\t\t* å¦‚æœæ²¡æœ‰matchåˆ°ï¼Œé‚£ä¹ˆå°±å±•ç¤º children æˆ–è€… null\n\t\n\t\t```js\n\t\tmatch\n\t\t\t\t? children\n\t\t\t\t\t? typeof children === 'function'\n\t\t\t\t\t\t? children(props)\n\t\t\t\t\t\t: children\n\t\t\t\t\t: component\n\t\t\t\t\t ? React.createElement(component, props)\n\t\t\t\t\t\t: render\n\t\t\t\t\t\t\t? render(props)\n\t\t\t\t\t\t\t: null\n\t\t\t\t: typeof children === 'function'\n\t\t\t\t\t? children(props)\n\t\t\t\t\t: null\n\t\t```\n\n\t* Route å¯èƒ½ä¼šä¼ å…¥ä¸€ä¸ª location å±æ€§ï¼Œè¿™æ—¶å€™å°±ä¼šé¦–å…ˆä½¿ç”¨ä¼ å…¥çš„ï¼Œè€Œä¸æ˜¯ URL çš„ã€‚\n\n### Switch\n\t\t\n * **Switch** å³ç‹¬å è·¯ç”±ï¼Œæ¸²æŸ“ä¸ location åŒ¹é…çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹\n \n * å®ç°çš„å¤§ä½“æ€è·¯\n\n\t* æ‹¿åˆ°æ‰€æœ‰çš„å­èŠ‚ç‚¹è¿›è¡Œéå†ï¼Œéœ€è¦ä¸€ä¸ªå˜é‡æ¥è®°å½•æ˜¯å¦å·²ç»æœ‰åŒ¹é…çš„èŠ‚ç‚¹\n\n\t```js\n\tReact.children.forEach(children, (child)=> {\n\t\tif (match === null && React.isVaildElement) {\n\t\tmatch = path ? matchPath(location.pathname, child.props) : context.match\n\t})\n\treturn match ? React.cloneElement(child, {location, computedMatch: match}) : null;\n\t```\n\t* å¦‚æœæ‰¾åˆ°äº† location ä¸ path ç›¸åŒ¹é…çš„è·¯ç”±ï¼Œå°±å°†å®ƒæ¸²æŸ“å‡ºæ¥ï¼Œå¦åˆ™è¿”å› null\n\t \n### Redirect\n\n* **Redirect**å°†URLå¯¼èˆªåˆ°ä¸€ä¸ªæ–°çš„åœ°å€\n\n* å®ç°çš„å¤§ä½“æ€è·¯ï¼š\n\n\t* æ¥å— to å±æ€§ï¼Œåˆ©ç”¨ history API å°†åœ°å€å‹å…¥æ ˆå†…\n\n\t```js\n\trender() {\n\t\tconst {to} = this.props;\n\t\treturn <RouterContext>{\n\t\tcontext => {\n\t\t\tconst {history} = context;\n\t\t\treutrn <LifeCycle isMounted={(history)=>{history.push(to)}}></LifeCycle>\n\t\t\t}\n\t\t}</RouterContext>\n\t}\n\t```\n\t\n\t* è¿™é‡Œéœ€è¦ LifeCycle ç»„ä»¶çš„åŸå› æ˜¯æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç»„ä»¶ mounted çš„æ—¶æœºï¼Œæ¥å¸®åŠ©æˆ‘ä»¬å®Œæˆå…¥æ ˆæ“ä½œï¼Œå¹¶ä¸” redirect è¿˜å¯ä»¥åœ¨ render ä¸­é¡ºåˆ©æ‰§è¡Œ return\n\n\n\t \n\t\t\n",
      "data": {
        "title": "React Router Essay",
        "date": "2020-03-08 10:51:31",
        "tags": [
          "React",
          "Essay"
        ],
        "published": true,
        "hideInList": false,
        "feature": "/post-images/react-router-essay.jpg"
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "react-router-essay"
    },
    {
      "content": "1. å¦‚æœæˆ‘ä»¬æƒ³è¦å®ç°ä¸€ä¸ªè£å‰ªç»„ä»¶ï¼Œæœ€æ ¸å¿ƒçš„æ–¹æ³•å°±æ˜¯è£å‰ªå‡½æ•°\n\n\t**è£å‰ªå‡½æ•°éœ€è¦ç”¨åˆ° Html Canvas API** \n\n\t-  åˆ›å»ºç”»å¸ƒ\n\n\t\t```js\n\t\tconst canvas = document.createElement(\"canvas\");\n\t\tconst ctx = canvas.getContext(\"2d\");\n\t\t```\n\n\t-  ç»˜åˆ¶å›¾åƒ\n\n\t\t```js\n\t\tctx.drawImage(img, dx, dy, width, height);\n\t\t```\n\t\t\t\t\n\t-  è¾“å‡ºè£å‰ªå›¾åƒ\n\t\n\t\t```js\n\t\t// è¾“å‡ºä¸º blob æ ¼å¼\n\t\tcanvas.toBlob(blob=>{}, type, encoderOptions)\n\t\t// è¾“å‡ºä¸º dataUrl æ ¼å¼\n\t\tcanvas.toDataURL(type, encoderOptions)\n\t\t```\n\t\t\t\t\n\t- è°ƒæ•´ç”»å¸ƒ\n\n\t\t```js\n\t\t// æ—‹è½¬\n\t\tctx.rotate()\n\t\t// æ‹‰ä¼¸\n\t\tctx.translate()\n\t\t//ç¼©æ”¾\n\t\tctx.scale()\n\t\t// ! save åªæ˜¯ä¿å­˜çš„ CanvasRenderingContext2D å¯¹è±¡çš„çŠ¶æ€ä»¥åŠå¯¹è±¡çš„æ‰€æœ‰å±æ€§\n\t\tctx.save() / ctx.restore()\n\t\t```\n\t\t\n2. å½“ç„¶è£å‰ªç»„ä»¶ä¸å¯èƒ½è¿™ä¹ˆç®€å•ï¼Œæˆ‘ä»¬è¿˜å¾—éœ€è¦ä¸€ä¸ªå®¹å™¨ï¼Œè®©ä½¿ç”¨è€…åœ¨é‡Œé¢è¿›è¡Œå›¾ç‰‡çš„è£å‰ª\n\n\t-  åœ¨å®¹å™¨å†…æ”¾ç½®ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡ï¼Œç»™å›¾ç‰‡è®¾ç½® scale tanslate rotate å±æ€§\n\t\n\t```html\n\t\t<div\n\t\t\tclass=\"cropper-box\"\n\t\t\t:style=\"{\n\t\t\ttransform: 'scale(' + scale + ',' + scale + ') ' + 'translate3d('+ x / scale + 'px,' + y / scale + 'px,' + '0)' +  'rotateZ('+ rotate * 90 +'deg)'\n\t\t}\"\n\t\t>\n\t\t\t<img :src=\"imgs\" />\n\t\t</div>\n\t```\n\t\t\n\t-  è®¾ç½®å›¾ç‰‡å¯æ‹–æ‹½åŒºåŸŸï¼Œä¸€èˆ¬ä¸å®¹å™¨å¤§å°ç›¸åŒï¼Œå…¶ä¸­äº§ç”Ÿçš„x ï¼Œ y å°±æ˜¯å›¾ç‰‡åœ¨å®¹å™¨å·¦ä¸Šè§’ç§»åŠ¨çš„è·ç¦»\n\n\t```html\n\t    <div\n      class=\"cropper-drag-box\"\n      :class=\"{'cropper-move': canMove,'cropper-modal': cropping}\"\n      @mousedown=\"startMove\"\n      @touchstart=\"startMove\"\n    ></div>\n\t```\n\t\n3. æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªè£å‰ªæ¡†å®¹å™¨ï¼Œè£å‰ªæ¡†å†…å‡ºç°çš„å°±æ˜¯è£å‰ªå‡ºçš„å†…å®¹\n\n\t-  åœ¨è£å‰ªæ¡†å®¹å™¨å†…åŒæ ·æ”¾ç½®ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡ï¼Œç»™å›¾ç‰‡è®¾ç½® scale tanslate rotate å±æ€§\n\t\t\t\n\t```html\n\t<div class=\"cropper-view-box\">\n        <img\n          :src=\"imgs\"\n          :style=\"{\n\t\t\t\t\t\t'transform': 'scale(' + scale + ',' + scale + ') ' + 'translate3d('+ (x - cropOffsertX) / scale  + 'px,' + (y - cropOffsertY) / scale + 'px,' + '0)'\n\t\t\t\t\t\t+ 'rotateZ('+ rotate * 90 +'deg)'\n\t\t\t\t\t\t}\"\n        />\n\t</div>\n\t```\n\t\n\t**è¿™é‡Œçš„ x - cropOffsertX ä¸ y - cropOffsertY å°±æ˜¯è£å‰ªæ¡†å†…å›¾ç‰‡ç›¸å¯¹äºè£å‰ªæ¡†å·¦ä¸Šè§’çš„ä½ç½®**\n\n\t-  è®¾ç½®å›¾ç‰‡å¯æ‹–æ‹½åŒºåŸŸï¼Œä¸€èˆ¬ä¸å®¹å™¨å¤§å°ç›¸åŒï¼Œå…¶ä¸­äº§ç”Ÿçš„changeX, changeYå°±æ˜¯è£å‰ªæ¡†å®¹å™¨è·å¤–å±‚å®¹å™¨å·¦ä¸Šè§’ç§»åŠ¨çš„è·ç¦»ï¼Œæ³¨æ„è£å‰ªæ¡†ä¸è¦è¶…å‡ºå¤–å±‚å®¹å™¨å³å¯ã€‚\n\n\t```html\n\t<span class=\"cropper-face cropper-move\" @mousedown=\"cropMove\" @touchstart=\"cropMove\"></span>\n\t```\n\n\t- è¿™é‡Œä¹‹æ‰€ä»¥è¿˜è¦æ”¾ç½®ä¸€ä¸ªä¸å¤–é¢ç›¸åŒçš„å›¾ç‰‡ï¼Œæ˜¯ä¸ºäº†è®©å›¾ç‰‡è¿›å…¥è£å‰ªæ¡†æ—¶é«˜äº®æ˜¾ç¤ºï¼Œæˆ‘ä»¬éœ€è¦æ˜ç™½ä¸¤å¼ å›¾ç‰‡å…¶å®åœ¨è§†è§‰ä¸Šåœ¨åŒä¸€ä½ç½®\n\n\t\t-  é¦–å…ˆå› ä¸ºä¸¤å¼ å›¾ç‰‡éƒ½æ˜¯åŸºäºå„è‡ªå®¹å™¨è®¾ç½®çš„ç»å¯¹ä½ç½®\n\n\t\t```css\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\t```\n\t\n\t\t-  æ‰€ä»¥å½“ translate æ—¶ï¼Œå¤–å±‚è£å‰ªå®¹å™¨æ ¹æ®è‡ªèº«ç§»åŠ¨æ—¶ï¼Œç§»åŠ¨ä¸º x ä¸ y é‚£ä¹ˆå†…å±‚è£å‰ªæ¡†çš„æ ¹æ®è‡ªèº«ç§»åŠ¨ translate å°±æ˜¯ x- x - cropOffsertX ä¸ y - cropOffsertYï¼ŒcropOffsertX ä¸ cropOffsertY ä¸ºè£å‰ªæ¡†è·ç¦»å¤–å±‚è£å‰ªå®¹å™¨çš„è·ç¦»\n\n\t-  è¿˜æœ‰ä¸€ä¸ªé€»è¾‘è¾ƒä¸ºå¤æ‚çš„åœ°æ–¹æ˜¯ï¼Œè£å‰ªæ¡†ä¼šè¢«æ‹‰ä¼¸ï¼Œéšæ„æ”¹å˜å¤§å°\n\n\t\t- é¦–å…ˆåˆ¤æ–­æ”¹å˜çš„æ˜¯ X è¿˜æ˜¯ Y\n\n\t\t- åœ¨é‡Œå±‚ç»§ç»­åˆ¤æ–­äº§ç”Ÿçš„ changeX å’Œ changeY æ˜¯æ­£æ•°è¿˜æ˜¯è´Ÿæ•°ï¼Œç»“åˆä¸‹å±‚æ¥åˆ¤æ–­è£å‰ªæ¡†æ˜¯å¢å¤§è¿˜æ˜¯å‡å°\n\n\t\t- ç»§ç»­åœ¨ç¬¬ä¸‰å†…å±‚åˆ¤æ–­ change ä¸ crop çš„å¤§å°ï¼Œ å› ä¸ºå­˜åœ¨ä¸¤æåè½¬çš„æƒ…å†µ\n\n\t\t**æ¯”è¾ƒç»•ï¼Œä½†æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆæƒ³ï¼Œé¦–å…ˆç¬¬ä¸€å±‚æˆ‘ä»¬éœ€è¦çŸ¥é“æ­¤æ—¶æ‹–æ‹½æ”¹å˜çš„æ˜¯ X è¿˜æ˜¯ Y è½´ï¼Œå…¶æ¬¡åœ¨ X è½´ä¸Šè£å‰ªæ¡†ï¼ˆæ­£æ–¹å½¢ï¼‰å­˜åœ¨ä¸¤æ¡è¾¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¦ç¬¬äºŒå±‚æ¥çŸ¥é“äº§ç”Ÿçš„ change (æ‹–æ‹½è·ç¦») ä¸ºæ­£è¿˜æ˜¯ä¸ºè´Ÿï¼Œæ¥åˆ†åˆ«å¤„ç†ä¸¤æ¡è¾¹çš„æƒ…å†µï¼Œæ¯”å¦‚å·¦è¾¹é‚£æ¡è¾¹ change ä¸ºè´Ÿè£å‰ªæ¡†å¢åŠ ï¼Œä½†æ˜¯å³è¾¹é‚£æ¡è¾¹å´æ˜¯å‡å°ã€‚**\n\t\t\n\t\t**ç¬¬ä¸‰å±‚ if é€»è¾‘å­˜åœ¨çš„ç†ç”±æ˜¯å­˜åœ¨å·¦è¾¹å› ä¸ºæ‹–æ‹½å˜æˆå³è¾¹çš„æƒ…å†µï¼ˆä¸¤æåè½¬ï¼‰ï¼Œåœ¨ç¬¬ä¸‰å±‚é‡Œé¢ï¼Œæˆ‘ä»¬å°±å»åš crop å¤§å°å’Œä¸å¤–å±‚å®¹å™¨è·ç¦»çš„è®¡ç®—äº†ï¼ˆä½ç½® + å¤§å° å°±èƒ½ç¡®å®š crop çš„æƒ…å†µäº†ï¼‰**\n\t\t\n\t\t- ä»£ç å¦‚ä¸‹\n\n\t\t```js\n\t\tconst changeW = nowX - this.cropX;\n        const changeH = nowY - this.cropY;\n\n        if (this.canChangeX) {\n          if (this.changeCropTypeX === 1) {\n            // åˆ¤æ–­ã€Œä¸¤æåè½¬ã€çš„æƒ…å†µ\n            if (this.cropOldW - changeW > 0) {\n              this.cropW =\n                this.containerWidth - this.cropPositionX - changeW <=\n                this.containerWidth\n                  ? this.cropOldW - changeW\n                  : this.cropOldW + this.cropPositionX;\n              this.cropOffsertX =\n                this.containerWidth - this.cropPositionX - changeW <=\n                this.containerWidth\n                  ? this.cropPositionX + changeW\n                  : 0;\n            } else {\n              // å·¦åæ ‡çº¿ä¸å³åæ ‡çº¿ä¸¤æåè½¬\n              this.cropW =\n                Math.abs(changeW) + this.cropPositionX <= this.containerWidth\n                  ? Math.abs(changeW) - this.cropOldW\n                  : this.containerWidth - this.cropW - this.cropPositionX;\n              this.cropOffsertX = this.cropPositionX + this.cropOldW;\n            }\n          } else if (this.changeCropTypeX === 2) {\n            if (this.cropOldW + changeW > 0) {\n              this.cropW =\n                this.cropOldW + changeW + this.cropPositionX <=\n                this.containerWidth\n                  ? this.cropOldW + changeW\n                  : this.containerWidth - this.cropPositionX;\n              this.cropOffsertX = this.cropPositionX;\n            } else {\n              // å·¦åæ ‡çº¿ä¸å³åæ ‡çº¿ä¸¤æåè½¬\n              this.cropW =\n                Math.abs(changeW + this.cropOldW) <= this.cropPositionX\n                  ? Math.abs(changeW + this.cropOldW)\n                  : this.cropPositionX;\n              this.cropOffsertX =\n                Math.abs(changeW + this.cropOldW) <= this.cropPositionX\n                  ? this.cropPositionX - Math.abs(changeW + this.cropOldW)\n                  : 0;\n            }\n          }\n        }\n\n        if (this.canChangeY) {\n          if (this.changeCropTypeY === 1) {\n            // åˆ¤æ–­ã€Œä¸¤æåè½¬ã€\n            if (this.cropOldH - changeH > 0) {\n              this.cropH =\n                this.cropPositionY + changeH >= 0\n                  ? this.cropOldH - changeH\n                  : this.cropPositionY + this.cropOldH;\n\n              this.cropOffsertY =\n                this.cropPositionY + changeH >= 0\n                  ? this.cropPositionY + changeH\n                  : 0;\n            } else {\n              this.cropH =\n                changeH - this.cropOldH <=\n                this.containerHeight - this.cropPositionY - this.cropOldH\n                  ? changeH - this.cropOldH\n                  : this.containerHeight - this.cropPositionY - this.cropOldH;\n\n              this.cropOffsertY = this.cropPositionY + this.cropOldH;\n            }\n          } else if (this.changeCropTypeY === 2) {\n            if (changeH + this.cropOldH > 0) {\n              this.cropH =\n                changeH <=\n                this.containerHeight - this.cropOldH - this.cropPositionY\n                  ? this.cropOldH + changeH\n                  : this.containerHeight - this.cropPositionY;\n\n              this.cropOffsertY = this.cropPositionY;\n            } else {\n              this.cropH =\n                Math.abs(changeH + this.cropOldH) <= this.cropPositionY\n                  ? Math.abs(changeH + this.cropOldH)\n                  : this.cropPositionY;\n\n              this.cropOffsertY =\n                Math.abs(changeH + this.cropOldH) <= this.cropPositionY\n                  ? this.cropPositionY - Math.abs(changeH + this.cropOldH)\n                  : 0;\n            }\n          }\n        }\n\t\t```\n\t\t\n**éšç¬”çœŸçš„å¾ˆé‡è¦å“‡ï½**\n\t\n\t\t\n\t\t\n\n\t\t\n\t\t\t\t\n\t\t\n",
      "data": {
        "title": "Cropper Component Essay",
        "date": "2020-03-06 16:01:00",
        "tags": [
          "component",
          "Essay"
        ],
        "published": true,
        "hideInList": false,
        "feature": "/post-images/cropper-component-essay.jpg"
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "cropper-component-essay"
    },
    {
      "content": "vue ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œæœ‰å¹³æ—¶å¸¸å¸¸ç”¨åˆ°çš„ï¼Œä¹Ÿæœ‰ä¸€äº›æ¯”è¾ƒè¾¹ç•Œå†·é—¨çš„ï¼Œæ‰€ä»¥æœ‰å¿…è¦æ€»ç»“å½’çº³ä¸€ä¸‹ï¼Œå½¢æˆçŸ¥è¯†å›¾è°±ï¼Œæ–¹ä¾¿è®°å¿†ã€‚\n\næˆ‘ä»¬å¯ä»¥ç”¨ä¼ é€’å±‚çº§æ¥åŒºåˆ†è®°å¿†ï¼š\n\n* çˆ¶ä¼ å­\n* å­ä¼ çˆ¶\n* å…„å¼Ÿä¼ é€’\n* ä»»æ„ç»„ä»¶é—´\n* ç¥–å…ˆä¼ åä»£\n\n### çˆ¶ä¼ å­\n\n1. props\n2. $parent\n3. $attrsä¸$listener\n\n### å­ä¼ çˆ¶\n\n1. $emit\n2. $children\n3. ref\n\n### å…„å¼Ÿä¼ é€’\n\n1. $parent\n2. $root\n\n### ä»»æ„ç»„ä»¶é—´\n\n1. bus ï¼ˆå¸¸ç”¨ vue å®ä¾‹ï¼Œbus çš„ç‰¹ç‚¹æ˜¯è°ç›‘å¬è°è§¦å‘ï¼‰\n2. vuex\n\n### ç¥–å…ˆä¼ åä»£\n\n1. provide/inject\n\n\n#### å‚è€ƒèµ„æ–™\n[Vue ç»„ä»¶é—´é€šä¿¡å…­ç§æ–¹å¼ï¼ˆå®Œæ•´ç‰ˆï¼‰](https://juejin.im/post/5cde0b43f265da03867e78d3)",
      "data": {
        "title": "Vue ç»„ä»¶é—´é€šä¿¡",
        "date": "2020-01-01 13:15:36",
        "tags": [],
        "published": true,
        "hideInList": false,
        "feature": "/post-images/vue-zu-jian-jian-tong-xin.jpg"
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "vue-zu-jian-jian-tong-xin"
    },
    {
      "content": "åœ¨å‰ç«¯ä»£ç æ„å»ºä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ babel å°† ES2015 + çš„ä»£ç è½¬æ¢ä¸ºä½ç‰ˆæœ¬çš„ä»£ç ï¼Œæ¥ä¿è¯å„ä¸ªæµè§ˆå™¨ç«¯çš„æ­£å¸¸è¿è¡Œã€‚ä½†æ˜¯åœ¨æ²¡æœ‰ä»»ä½•æ’ä»¶çš„æƒ…å†µä¸‹ï¼Œbabel åªä¼šå¸®æˆ‘ä»¬è½¬æ¢è¯­æ³•ï¼Œä¸ä¼šè½¬æ¢ç±»å’Œæ–¹æ³•ã€‚\n\nå¦‚æœéœ€è¦è½¬æ¢ç±»å’Œæ–¹æ³•ï¼Œå°±éœ€è¦ polyfill äº†ã€‚å¼•å…¥ polyfill ï¼Œä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼š\n\n### @babel/polyfill\n\nå¯ä»¥å•ç‹¬å¼•å…¥ @babel/polyfill, `import '@babel/polyfill'`ï¼Œç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼Œ**æ‰€æœ‰çš„ polyfill éƒ½å¼•è¿›é¡¹ç›®é‡Œäº†ï¼Œå¯èƒ½ä¼šæœ‰å‡ åKçš„å¤§å°ï¼Œè¿™ä¸ªæ˜¯æ²¡æ³•å¿çš„**\n\n### @babel/preset-env\n\n@babel/preset-env æ­é… @babel/polyfill ä½¿ç”¨ï¼Œå¯ä»¥æ ¹æ® browserlists æ¥çµæ´»çš„å¼•ç”¨ polyfillã€‚\n\n@babel/preset-env é‡Œé¢æœ‰ä¸ª option æ˜¯ useBuiltinsï¼š\n\n* flase\n\tä¸å¯ç”¨ polyfill ï¼Œå¦‚æœ `import '@babel/polyfill'`ï¼Œä¼šæ— è§† browserlist å°†æ‰€æœ‰çš„ polyfill åŠ è½½è¿›æ¥ã€‚\n* entry\n\tå¯ç”¨ï¼Œéœ€è¦æ‰‹åŠ¨ `import '@babel/polyfill'`ï¼Œè¿™æ ·ä¼šæ ¹æ® browserlist è¿‡æ»¤å‡ºéœ€è¦çš„ polyfill\n* usage\n\tä¸éœ€è¦æ‰‹åŠ¨ `import '@babel/polyfill'`ï¼Œä¼šæ ¹æ® browserlist + ä¸šåŠ¡ä»£ç ä½¿ç”¨åˆ°çš„æ–° API æŒ‰éœ€è¿›è¡Œ polyfill\n\t\n\t**é—®é¢˜ä¹Ÿæœ‰ï¼Œé‚£å°±æ˜¯ polyfill ä¾æ—§æ˜¯å…¨å±€æ±¡æŸ“çš„ï¼Œå¯¹äºåº“æˆ–è€…ç»„ä»¶ä»£ç ï¼Œè¿™æ ·åšæ˜¯æœ‰é£é™©çš„**\n\t\n### @babel/plugin-transform-runtime (æš‚æ—¶æœ‰é—®é¢˜)\n\n@babel/plugin-transform-runtime éœ€è¦æ­é… @babel/runtime ä½¿ç”¨ï¼Œå½“ç„¶ä¹Ÿæ˜¯æ ¹æ® preset æ¥åˆ¤æ–­ã€‚\n\n@babel/plugin-transform-runtime ç”¨äºæ„å»ºè¿‡ç¨‹ä¸­ï¼Œ@babel/runtime æ˜¯å®é™…å¯¼å…¥é¡¹ç›®ä»£ç çš„åŠŸèƒ½æ¨¡å—ã€‚\n\n@babel/plugin-transform-runtime åšäº†ä¸‰ä»¶äº‹ï¼š\n\n* è‡ªåŠ¨è¯·æ±‚ @babel/runtime/regenerator å½“ä½ ä½¿ç”¨ generators/async æ–¹æ³•æ—¶\n* ä½¿ç”¨ core-js å‡è®¾ç”¨æˆ·ä½¿ç”¨äº†ç›¸å…³çš„ polyfill\n* ç§»é™¤å†…è”çš„ helpers ï¼Œå°†ä½¿ç”¨çš„ helpers æŠ½æˆä¸€ä¸ªæ¨¡å—å¹¶ require å¼•å…¥\n\nå¥½å¤„æ˜¯å¾ˆæ˜æ˜¾çš„ï¼Œæ­¤è½¬æ¢å™¨å°†å¸®åŠ©ä½ çš„ä»£ç åˆ›å»ºæ²™ç›’ç¯å¢ƒï¼Œä¸ä¼šæ±¡æŸ“å…¨å±€ã€‚\n\nä½†é—®é¢˜ä¹Ÿæœ‰ï¼Œ**@babel/plugin-transform-runtime ä¸ä¼šè½¬æ¢å®ä¾‹æ–¹æ³•**ï¼Œå› ä¸ºå¦‚æœè½¬æ¢å®ä¾‹æ–¹æ³•ï¼ŒåŠ¿å¿…è¦ä¿®æ”¹åŸå‹é“¾ï¼Œè¿™å’Œä¸æ±¡æŸ“å…¨å±€çš„åˆè¡·ç›¸æ‚–ã€‚è€Œä¸”åœ¨æˆ‘ä¸ªäººçœ‹æ¥ï¼Œ**æ ¹æ® preset æ¥åˆ¤æ–­ï¼Œä¹Ÿæ²¡æœ‰ bowerlists é‚£ä¹ˆç²¾ç¡®**ã€‚\n\n### polyfill.io\n\nä»¥ä¸Šçš„æ–¹æ¡ˆå…¶å®éƒ½æœ‰ç‰ºç‰²ä½¿ç”¨æœ€æ–°æµè§ˆå™¨çš„ç”¨æˆ·çš„ä½“éªŒï¼Œè€Œ polyfill.io åªéœ€å¼•å…¥ä¸€ä¸ªæ–‡ä»¶ï¼Œå°±ä¼šæ ¹æ®å½“å‰æµè§ˆå™¨æ¥åŠ è½½éœ€è¦çš„ polyfill æ–‡ä»¶ï¼Œ**ä½†æ˜¯è€ƒè™‘åˆ°é¢å¯¹å›½å†…æµè§ˆå™¨å„ç§å¥‡è‘©çš„ UAï¼Œä¼šæœ‰ä¸€äº›é£é™©å­˜åœ¨**ã€‚\n\n### å‚è€ƒèµ„æ–™ï¼š\n* [@babel/polyfill ä¸ @babel/plugin-transform-runtime è¯¦è§£](https://github.com/SunshowerC/blog/issues/4)\n* [babelèƒ½ä¸èƒ½åˆ†æä»£ç ç„¶åæŒ‰éœ€polyfill ï¼Ÿ](https://juejin.im/post/5c09d6d35188256d9832df9d)\n* [21 åˆ†é’Ÿç²¾é€šå‰ç«¯Polyfillæ–¹æ¡ˆ](https://segmentfault.com/a/1190000010106158)\n* [babel-runtimeä½¿ç”¨ä¸æ€§èƒ½ä¼˜åŒ–](https://juejin.im/entry/5b108f4c6fb9a01e5868ba3d)\n* [@babel/plugin-transform-runtime](https://babeljs.io/docs/en/babel-plugin-transform-runtime#technical-details)\n* [ES6å’ŒBabelä½ ä¸çŸ¥é“çš„äº‹å„¿](https://juejin.im/entry/5a290988f265da43062aa986)\n\n",
      "data": {
        "title": "babel polyfill",
        "date": "2019-07-17 13:33:48",
        "tags": [
          "Babel"
        ],
        "published": true,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "babel-polyfill"
    },
    {
      "content": "## å®šä¹‰\n\n**è™šæ‹Ÿ DOM ç›¸å½“äºæ˜¯çœŸå® DOM å’Œ js ä¹‹é—´çš„ä¸€å±‚ç¼“å­˜ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬è¿›è¡Œæœ€å°åŒ–çš„ DOM æ“ä½œï¼Œæ¥ä¿è¯è§†å›¾æ›´æ–°çš„æ‰§è¡Œæ•ˆç‡ã€‚**\n\nè™šæ‹Ÿ DOM ç®—æ³•ä¸»è¦åˆ†ä¸‰éƒ¨åˆ†\n\n* ç”¨ JS å¯¹è±¡æ¨¡æ‹Ÿ DOMæ ‘\n* æ¯”è¾ƒä¸¤æ£µè™šæ‹Ÿ DOM æ ‘çš„å·®å¼‚\n* å°†å·®å¼‚åº”ç”¨åˆ°çœŸæ­£çš„ DOM æ ‘ä¸Š\n\nä¹‹å‰æˆ‘ä»¬åœ¨[ã€Šé«˜æ€§èƒ½ javascriptã€‹æ€»ç»“](https://sfmonkey.github.io/post/2018-12-18-js-highPreformance/) ä¸­æåˆ°è¿‡ï¼Œjs å¼•æ“ä¸ DOM åˆ†å±äºä¸¤å¤„ä¸åŒçš„åœ°æ–¹ï¼Œåœ¨è¿™ä¸­é—´çš„äº¤äº’æ“ä½œæ˜¯ååˆ†æ¶ˆè€—æ€§èƒ½çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»æœ€å°åŒ– DOM è®¿é—®æ¬¡æ•°ã€‚Virtual DOM æ­£æ˜¯å¸®åŠ©æˆ‘ä»¬åšåˆ°äº†è¿™ä¸€ç‚¹ï¼ŒVritual DOM å¹¶ä¸æ˜¯åŠ å¿«äº† DOM æ“ä½œçš„é€Ÿåº¦ï¼Œè€Œæ˜¯è®©é¡µé¢åœ¨ä¸åŒçŠ¶æ€ä¹‹é—´å˜åŒ–æ—¶ï¼Œä½¿ç”¨æ¬¡æ•°å°½é‡å°‘çš„ DOM æ“ä½œæ¥å®Œæˆã€‚\n\nä¹Ÿç”±äºåŒ…å«è¿™å¯¹æ¯”å‰åå·®å¼‚çš„è¿‡ç¨‹ï¼ŒReact æ¯æ¬¡çš„ DOM æ“ä½œå®é™…è€—æ—¶æ˜¯ä¸€å®šæ¯”æˆ‘ä»¬æ‰§è¡ŒåŸç”Ÿ DOM æ“ä½œè¦é•¿çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ React æ˜¯ä»˜å‡ºäº†é¢å¤–çš„è®¡ç®—è¿‡ç¨‹ï¼Œæ¥å°½å¯èƒ½ä¿æŒ DOM æ“ä½œçš„é«˜æ•ˆã€‚\n\n## ç®—æ³•å®ç°\n\nä»¥ä¸‹çš„ä»£ç æ¥è‡ªäº [livoras](https://github.com/livoras/blog/issues/13) çš„å®ç°ã€‚\n\n### ç”¨ JS å¯¹è±¡æ¨¡æ‹Ÿ DOM æ ‘\n\n```javascript\n\t/**\n * ç”Ÿæˆè™šæ‹Ÿ DOM å‡½æ•°\n * @param {String} tagName \n * @param {Object} props \n * @param {Array<Element|String>} children \n */\nfunction Element (tagName, props, children) {\n    if (!(this instanceof Element)) {   //åˆ›å»º Element å¯¹è±¡\n        if (! (children instanceof Array) && children != null) {\n            children = Array.prototype.slice.call(arguments, 2).filter(function(v){return !!v}); // å¤„ç† children ä¸æ˜¯æ•°ç»„çš„æƒ…å†µ\n        }\n        return new Element(tagName, props, children);\n    }\n\n\n    if (props instanceof Array) {\n        children = props;\n        props = {};  \n    }\n\n    this.tagName = tagName;\n    this.props = props || {};   //props å¯èƒ½ä¸ºç©º\n    this.children = children || []; //children å¯èƒ½ä¸ºç©º\n\n    this.key = props.key ? props.key : void 0; //è·å–å…ƒç´  key , ç”¨äºä¹‹å diff æ¯”è¾ƒæ—¶æ‰¾åˆ°å¯¹åº”èŠ‚ç‚¹\n\n    var count = 0;  //è®°å½•å­å…ƒç´ ä¸ªæ•°\n\n    children.forEach(function(child, i) {\n        if (child instanceof Element) {\n            count += child.count;\n        } else {\n            children[i] = '' + child;   //å¦‚æœä¸æ˜¯ Element å…ƒç´ ï¼Œä¿è¯ child ä¸ºå­—ç¬¦ä¸²\n        }\n\n        count++;\n    });\n\n    this.count = count;\n}\n\n/**\n * å°†è™šæ‹Ÿ DOM æ¸²æŸ“ä¸ºçœŸå® DOM\n */\nElement.prototype.render = function () {\n    var el = document.createElement(this.tagName),  // ç”Ÿæˆ DOM èŠ‚ç‚¹\n        props = this.props,\n        children = this.children;\n\n    for (var k in props) {\n        if (props.hasOwnProperty(k)) {\n            var v = props[k];\n            el.setAttribute(k,v);   // æ·»åŠ èŠ‚ç‚¹\n        }\n    }\n\n    children.forEach(function(child, i) {\n        var v = '';\n        if (child instanceof Element) {\n            v = child.render();\n        } else {\n            v = document.createTextNode(child);\n        }\n        el.appendChild(v);  // æ·»åŠ å­èŠ‚ç‚¹\n    });\n\n    return el;\n}\n```\n\nä¸Šé¢çš„å‡½æ•°å®ç°äº†è™šæ‹ŸDOMçš„ç”Ÿæˆï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°æ€ä¹ˆç”¨å‘¢ï¼Ÿä¸¾ä¸ªä¾‹å­\n\n```javascript\nvar el = require('./element')\n\nvar ul = el('ul', {id: 'list'}, [\n  el('li', {class: 'item'}, ['Item 1']),\n  el('li', {class: 'item'}, ['Item 2']),\n  el('li', {class: 'item'}, ['Item 3'])\n])\n```\n\næˆ‘ä»¬å¯ä»¥å°†é‡Œé¢çš„å‚æ•°çœ‹æˆ JSXï¼Œ è¿™æ ·æ˜¯ä¸æ˜¯å°±æœ‰äº›çœ¼ç†Ÿäº†ï¼Œé‚£ä¹ˆå¦‚ä½•å°†ç”Ÿæˆçš„è™šæ‹Ÿ DOM æ ‘æ¸²æŸ“æˆçœŸæ­£çš„ DOM å‘¢\n\n```javascript\nvar ulRoot = ul.render()\ndocument.body.appendChild(ulRoot)\n```\n\n### æ¯”è¾ƒä¸¤æ£µè™šæ‹Ÿ DOM æ ‘çš„å·®å¼‚ ï¼ˆdiff ç®—æ³•ï¼‰\n\nä¸¤æ£µæ ‘å®Œå…¨çš„ diff ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n^3) ï¼Œæ˜¾ç„¶æ— æ³•æ»¡è¶³å‰ç«¯å¿«é€Ÿçš„ UI å“åº”ï¼Œæ‰€ä»¥è¿™é‡Œ React æ”¹å˜äº† diff ç®—æ³•ï¼Œåªå¯¹åŒä¸€å±‚çš„DOMå…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œå°†æ—¶é—´å¤æ‚åº¦é™ä¸ºäº† O(n)\n\næˆ‘ä»¬å†æ¥æƒ³æƒ³ä¸¤ä¸ªè™šæ‹ŸDOMæ ‘å¯èƒ½çš„å·®å¼‚ç±»å‹ï¼š\n\n1. æ›¿æ¢ä¹‹å‰çš„èŠ‚ç‚¹\n2. ç§»åŠ¨ï¼Œåˆ é™¤ï¼Œæ–°å¢å­èŠ‚ç‚¹\n3. æ”¹å˜äº†èŠ‚ç‚¹çš„å±æ€§\n4. æ–‡æœ¬èŠ‚ç‚¹çš„å†…å®¹å‘ç”Ÿäº†å˜åŒ–\n\nä»¥ä¸‹æ˜¯å®ç°\n\n```javascript\nfunction diff (oldTree, newTree) {\n    var index = 0;\n    var patches = {};\n\n    dfsWalk(oldTree, newTree, index, patches);\n\n    return patches;\n}\n\nfunction dfsWalk (oldNode, newNode, index, patches) {\n    var currentPatch = [];\n\n    if (newNode === null)  {\n\n    } else if (Object.prototype.toString.call(oldNode) && Object.prototype.toString.call(newNode)) {    // æ¯”è¾ƒæ–‡æœ¬èŠ‚ç‚¹çš„å†…å®¹\n        if (newNode !== oldNode) {\n            currentPatch.push({type: patches.TEXT, content: newNode});\n        }\n    } else if (\n        oldNode.tagName === newNode.tagName &&\n        oldNode.key === newNode.key\n    ) {\n        //  æ¯”è¾ƒå±æ€§çš„ä¸åŒ\n        var propsPatches = diffProps(oldNode, newNode);\n        if (propsPatches) {\n            currentPatch.push({type: patches.PROPS, props: propsPatches});\n        }\n\n        diffChildren(\n            oldNode.children,\n            newNode.children,\n            index,\n            patches,\n            currentPatch\n        );\n\n    } else {    // tagName ä¸åŒçš„æƒ…å†µ\n        currentPatch.push({type: patches.REPLACE, node: newNode});\n    }\n\n    if (currentPatch.length) {\n        patches[index] = currentPatch;\n    }\n}\n\nfunction diffProps (oldNode, newNode) {\n    var oldProps = oldNode.props;\n    var newProps = newNode.props;\n\n    var key, value;\n    var propsPatches = {};\n\n    for (key in oldProps) {\n        if (oldProps.hasOwnProperty(key)) {\n            value = oldProps[key];\n            if (newProps[key] !== value) {\n                propsPatches[key] = newProps[key];\n            }\n        }\n    }\n\n    for (key in newProps) {\n        value = newProps[key]\n        if (!oldProps.hasOwnProperty(key)) {\n            propsPatches[key] = newProps[key];\n        }\n    }\n\n    if (JSON.stringify(propsPatches) === '{}') {\n        return null;\n    }\n    \n    return propsPatches;\n}\n\nfunction diffChildren (oldChildren, newChildren, index, patches, currentPatch) {\n    var diffs = listDiff();\n    newChildren = diffs.children;\n\n    if (diffs.moves.length) {\n        var reorderPatch = {type: patches.REORDER, moves: diffs.moves}\n        currentPatch.push(reorderPatch);\n    }\n\n    var leftNode = null;\n    var currentNodeIndex = index;\n\n    oldChildren.forEach(function(child, i) {\n        var newChild = newChildren[i]\n        currentNodeIndex = (leftNode && leftNode.count)\n          ? currentNodeIndex + leftNode.count + 1\n          : currentNodeIndex + 1\n        dfsWalk(child, newChild, currentNodeIndex, patches)\n        leftNode = child\n    });\n}\n```\n\nè¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå…¶å®æ¯ä¸ªæ–°è€èŠ‚ç‚¹åœ¨å¯¹æ¯”çš„æ—¶å€™ï¼Œéƒ½æ˜¯å¯¹æ¯”tagnameï¼Œpropså’Œchildrenï¼Œè€Œåœ¨å¯¹æ¯” children æ—¶ï¼Œ åˆšå¼€å§‹ä½¿ç”¨äº† listDiff ç®—æ³•ï¼Œå…·ä½“ç®—æ³•å¦‚ä¸‹ï¼š\n\n```javascript\nfunction listDiff (oldList, newList, key) {\n    var oldMap = makeKeyIndexAndFree(oldList, key);\n    var newMap = makeKeyIndexAndFree(newList, key);\n\n    var newFree = newMap.free;\n\n    var oldKeyIndex = oldMap.keyIndex;\n    var newKeyIndex = newMap.keyIndex;\n\n    var moves = [];\n\n    var children = [];\n    var i = 0;\n    var item, itemKey;\n    var freeIndex = 0;\n\n    while (i < oldList.length) {\n        item = oldList[i];\n        itemKey = getItemKey(item, key); // è·å– key çš„å€¼, å®ƒä¹Ÿæ˜¯ newKeyIndex çš„å±æ€§\n        if (itemKey) { //å¦‚æœåŒ…å«key\n            if (!newKeyIndex.hasOwnProperty(itemKey)) { // æ–°çš„åˆ—è¡¨é‡Œé¢æ²¡æœ‰è€çš„åˆ—è¡¨å…ƒç´ ,åˆ é™¤è€çš„åˆ—è¡¨å…ƒç´ \n                children.push(null)\n            }  else {   // æ–°çš„åˆ—è¡¨é‡Œé¢æœ‰è€çš„åˆ—è¡¨å…ƒç´ ï¼Œåˆæœ‰keyï¼Œç§»åŠ¨å’Œæ–°å¢è€çš„åˆ—è¡¨å…ƒç´ \n                var newItemIndex = newKeyIndex[itemKey];\n                children.push(newList[newItemIndex]);\n            }\n        } else {    //æ²¡æœ‰keyçš„æƒ…å†µ\n            var freeItem = newFree[freeIndex++];\n            children.push(freeItem || null);\n        }\n        i++;\n    }\n\n    var simulateList = children.slice(0);\n\n    // åˆ é™¤æ–°åˆ—è¡¨ä¸­ä¸å­˜åœ¨çš„å…ƒç´ ,æ•°ç»„ä¸­å‰©ä¸‹çš„æ˜¯ 1.æ–°åˆ—è¡¨éœ€è¦ç§»åŠ¨å’Œæ–°å¢çš„å…ƒç´  2.æ–°åˆ—è¡¨æ²¡æœ‰keyçš„å…ƒç´ ï¼Ÿï¼Ÿ\n    i = 0;\n    while (i < simulateList.length) {\n        if (simulateList[i] === null) {\n            remove(i);\n            removeSimulate(i);\n        } else {\n            i ++;\n        }\n    }\n\n    var j = i = 0;\n    while (i < newList.length) {\n        item = newList[i];\n        itemKey = getItemKey(item, key);\n\n        var simulateItem = simulateList[i];\n        var simulateItemKey = getItemKey(simulateItem, key);\n\n        if (simulateItem) {\n            if (itemKey === simulateItemKey) {\n                j++;\n            } else {\n                if (!oldKeyIndex.hasOwnProperty(itemKey)) {\n                    // æ–°å¢\n                    insert(i, item);\n                } else {\n                    // ç§»åŠ¨\n                    var nextItemKey = getItemKey(simulateList[j + 1], key);\n                    if (nextItemKey === itemKey) {\n                        remove(i);\n                        removeSimulate(j);\n                        j ++;\n                    } else {\n                        insert(i, item);\n                    }\n                }\n            }\n        } else {\n            insert(i, item);\n        }\n\n        i++;\n    }\n\n    var k = simulateList.length - j;\n    while (j++ < simulateList.length) {\n        k --;\n        remove(k + i);\n    }\n\n    function remove (index) {\n        var move = {index: index, type: 0}\n        moves.push(move);\n    }\n    \n    function insert (index, item) {\n        var move = {index: index, item: item, type: 1};\n        moves.push(move);\n    }\n\n    function removeSimulate (index) {\n        simulateList.splice(index, 1);\n    }\n}\n\nfunction makeKeyIndexAndFree (list, key) {\n    var keyIndex = {};\n    var free = [];\n\n    for (var i = 0, len = list.length; i < len; i++) {\n        var item = list[i];\n        var itemKey = getItemKey(item, key);\n        if (itemKey) {\n            keyIndex[itemKey] = i;\n        } else {\n            free.push(item);\n        }\n    }\n}\n\n/**\n * è·å–æ•°ç»„å…ƒç´ keyçš„å€¼\n * @param {*} item \n * @param {String} key \n */\nfunction getItemKey (item, key) {\n    if (!item || !key) return void 0;\n    return typeof key === 'string'\n        ? item[key]\n        : key(item)\n}\n```\n\nå…¶å®ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒlistDiff åªæ˜¯å¸®åŠ©æˆ‘ä»¬è®°å½•äº† children åˆ—è¡¨å…ƒç´ åº”è¯¥ç§»åŠ¨ï¼Œåˆ é™¤å’Œæ–°å¢çš„ä½ç½®ï¼Œå…·ä½“ç§»åŠ¨åçš„å…ƒç´ ï¼ŒtagName ï¼Œ props å¦‚ä½•å˜åŒ–ï¼Œæˆ‘ä»¬æ˜¯åœ¨æ·±åº¦ä¼˜å…ˆéå†çš„é€’å½’ä¸­åšçš„ï¼Œä¹Ÿå°±æ˜¯åˆ°äº†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚\n\n### æŠŠå·®å¼‚åº”ç”¨åˆ°çœŸæ­£çš„DOMæ ‘ä¸Š\n\nç°åœ¨æˆ‘ä»¬å·²ç»å¾—åˆ°äº†è™šæ‹ŸDOMæ ‘ï¼Œä»¥åŠæ–°æ—§ä¸¤ä¸ªè™šæ‹Ÿ DOM æ ‘çš„å·®å¼‚ï¼Œé‚£è¾¹æ¥ä¸‹æ¥æˆ‘ä»¬å°±å°† patches åº”ç”¨åˆ° DOM æ ‘ä¸Šã€‚\n\n```\nvar REPLACE = 0;\nvar REORDER = 1;\nvar PROPS = 2;\nvar TEXT = 3;\n\nfunction patch (node, patches) {\n    var walker = {index: 0};\n    dfsWalk(node, walker, patches);\n}\n\nfunction dfsWalk (node, walker, patches) {\n    var currentPatches = patches[walker.index];\n\n    var len = node.childNodes ? node.childNodes.length : 0;\n\n    for (var i = 0; i < len; i++) {\n        var child = node.childNodes[i];\n        walker.index ++;\n        dfsWalk(child, walker, patches);\n    }\n\n    if (currentPatches) {\n        applyPatches(node, currentPatches)\n    }\n}\n\nfunction applyPatches (node, currentPatches) {\n    currentPatches.forEach(currentPatch => {\n        switch (currentPatch.type) {\n            case REPLACE:\n              var newNode = (typeof currentPatch.node === 'string')\n                ? document.createTextNode(currentPatch.node)\n                : currentPatch.node.render()\n              node.parentNode.replaceChild(newNode, node)\n              break\n            case REORDER:\n              reorderChildren(node, currentPatch.moves)\n              break\n            case PROPS:\n              setProps(node, currentPatch.props)\n              break\n            case TEXT:\n              if (node.textContent) {\n                node.textContent = currentPatch.content\n              } else {\n                // fuck ie\n                node.nodeValue = currentPatch.content\n              }\n              break\n            default:\n              throw new Error('Unknown patch type ' + currentPatch.type)\n          }\n    });\n}\n\nfunction setProps (node, props) {\n    for (var key in props) {\n      if (props[key] === void 666) {\n        node.removeAttribute(key)\n      } else {\n        var value = props[key]\n        _.setAttr(node, key, value)\n      }\n    }\n}\n\nfunction reorderChildren (node, moves) {\n    var staticNodeList = _.toArray(node.childNodes)\n    var maps = {}\n    \n    staticNodeList.forEach(node => {\n        if (node.nodeType === 1) {\n            var key = node.getAttribute('key')\n            if (key) {\n              maps[key] = node\n            }\n          }\n    });\n    \n    moves.forEach(function(move) {\n        var index = move.index\n        if (move.type === 0) { // remove item\n          if (staticNodeList[index] === node.childNodes[index]) { // maybe have been removed for inserting\n            node.removeChild(node.childNodes[index])\n          }\n          staticNodeList.splice(index, 1)\n        } else if (move.type === 1) { // insert item\n          var insertNode = maps[move.item.key]\n            ? maps[move.item.key].cloneNode(true) // reuse old item\n            : (typeof move.item === 'object')\n                ? move.item.render()\n                : document.createTextNode(move.item)\n          staticNodeList.splice(index, 0, insertNode)\n          node.insertBefore(insertNode, node.childNodes[index] || null)\n        }\n    });\n}\n```\n\nå½“ç„¶ï¼Œä»¥ä¸Šç®—æ³•å¼€å§‹äºæˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ª tagnameï¼Œ propsï¼Œ children çš„å…¥å‚ï¼Œ æˆ‘ä»¬é¿å¼€äº† JSXï¼Œè¿™ä¹Ÿä¸æ˜¯è™šæ‹Ÿ DOM ç®—æ³•åº”è¯¥å…³æ³¨çš„ï¼Œè¿˜æœ‰ä»€ä¹ˆæ—¶å€™å»è§¦å‘ update å‡½æ•°ï¼Œæ¥è¿›è¡Œ è™šæ‹ŸDOM ç®—æ³•ï¼Œè¿™äº›æ— å…³ä¸»é¢˜çš„ï¼Œä¹Ÿå°±éƒ½çœç•¥äº†ã€‚\n\n**çŒ›å…½æ€»æ˜¯ç‹¬è¡Œ**\n\nå‚è€ƒèµ„æ–™ï¼š\n[æ·±åº¦å‰–æï¼šå¦‚ä½•å®ç°ä¸€ä¸ª Virtual DOM ç®—æ³•](https://github.com/livoras/blog/issues/13)\n[Reactçš„diffingç®—æ³•å­¦ä¹ ](https://imweb.io/topic/5b67e47cf3fbd8d9125fe800)",
      "data": {
        "title": "å¯¹äº Virtual DOM çš„ç†è§£",
        "date": "2019-07-04 17:13:04",
        "tags": [],
        "published": true,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "dui-yu-virtual-dom-de-li-jie"
    },
    {
      "content": "è®°å¾—ä¹‹å‰æ‰¾å®ä¹ çš„æ—¶å€™ï¼Œé¢è¯•å®˜æ€»å–œæ¬¢é—®æˆ‘ï¼š **é‡åˆ°è¿‡çš„é—­åŒ…çš„ä½¿ç”¨åœºæ™¯** ï¼Œé‚£æ—¶å€™å¹´è½»å•Šï¼Œç°åœ¨æƒ³æƒ³é¢è¯•å®˜å¸Œæœ›æˆ‘å›ç­”çš„ï¼Œå¯èƒ½å°±æ˜¯**åå‡½æ•°**å’Œ**æŸ¯é‡ŒåŒ–**å§ã€‚\n\n### é—­åŒ…\n> é—­åŒ…ï¼ˆclosureï¼‰æ˜¯å‡½æ•°å’Œå£°æ˜è¯¥å‡½æ•°çš„è¯æ³•ç¯å¢ƒçš„ç»„åˆã€‚\n\n### åå‡½æ•°\n> å›ºå®šäº†ä½ å‡½æ•°çš„æŸä¸€ä¸ªæˆ–å‡ ä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œæ¥æ”¶å‰©ä¸‹çš„å‚æ•°, å‚æ•°ä¸ªæ•°å¯èƒ½æ˜¯1ä¸ªï¼Œä¹Ÿå¯èƒ½æ˜¯2ä¸ªï¼Œç”šè‡³æ›´å¤š,è¿™å°±æ˜¯åå‡½æ•°ã€‚**åå‡½æ•°ç›¸å½“äºæ‰§è¡Œä¸€æ¬¡çš„æŸ¯é‡ŒåŒ–**ã€‚\n\n```javascript\nadd = (x, y, z) => x + y + z\naddBySeven = Partial(Add, 7);\naddBySeven(5, 10); // returns 22;\n```\n\n### æŸ¯é‡ŒåŒ–\n> åªä½¿ç”¨ä¼ é€’ç»™å‡½æ•°çš„ä¸€éƒ¨åˆ†å‚æ•°æ¥è°ƒç”¨å®ƒï¼Œè®©å®ƒè¿”å›ä¸€ä¸ªå‡½æ•°å»å¤„ç†å‰©ä¸‹çš„å‚æ•°ã€‚\n\n```javascript\nadd = (x, y, z) => x + y + z\ncurryAdd = Curry(add);    //Curry = x => y => z => x + y + z\naddBySeven = curryAdd(7);\naddBySeven(5)(10); // returns 22\n```\n\n### å½“ç„¶æˆ‘ä»¬ä»Šå¤©çš„ä¸»èœæ˜¯æŸ¯é‡ŒåŒ–\n\n* å®é™…åº”ç”¨\n\t* å»¶è¿Ÿè®¡ç®—\n\t```javascript\n\tconst add = (...args) => args.reduce((a, b) => a + b)\n\t\n\tconst currying = (func) => {\n\t\tconst args = [];\n\t\treturn function result (...rests) {\n\t\t\tif (rests.length === 0) {\n\t\t\t\treturn func(...args);\n\t\t\t} else {\n\t\t\t\targs.push(...rests);\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tconst sum = currying(add);\n\n\tsum(1,2)(3); // æœªçœŸæ­£æ±‚å€¼\n\tsum(4); \t\t // æœªçœŸæ­£æ±‚å€¼\n\tsum(); \t\t\t // è¾“å‡º 10\n\t```\n\t\n\t```javascript\n\t// å®ç° bind å‡½æ•°\n\tFunction.prototype.bind = function (context) {\n\t\tvar _ = this,\n\t\t\t\t\targs = Array.prototype.slice.call(arguments, 1);\n\t\t\n\t\treturn () => {\n\t\t\t\tvar bindArgs = Array.prototype.slice.call(arguments);\n\t\t\t\t\n\t\t\t\treturn _.apply(context, args.concat(bindArgs));\n\t\t}\n\t}\n\t```\n\t\n\t* åŠ¨æ€åˆ›å»ºå‡½æ•°\n\t```javascript\n\tconst addEvent =(function () {\n\t\tif (window.addEventListener) {\n\t\t\treturn function (type, el, fn, capture = false) {\n\t\t\t\tel.addEventListener(type, fn, capture);\n\t\t\t}\n\t\t} else if (window.attachEvent) {\n\t\t\treturn function (type, el, fn) {\n\t\t\t\tel.attachEvent('on' + type, fn);\n\t\t\t}\n\t\t}\n\t})()\n\t```\n\t\n\t* å‚æ•°å¤ç”¨\n\t```javascfript\n\tconst toStr = Function.prototype.call.bind(Object.prototype.toString);\n\t\n\t// æ”¹é€ å\n\ttoStr([1, 2, 3]); \t// \"[object Array]\"\n\ttoStr('123'); \t\t// \"[object String]\"\n\ttoStr(123); \t\t// \"[object Number]\"\n\ttoStr(Object(123)); // \"[object Number]\"\n\t```\n\n* å®ç° currying å‡½æ•°\n```javascript\nconst currying = (fn, length) => {\n\tconst len = length || fn.length;\n\t\n\treturn function result(...args) {\n\t\tif (args.length >= len) {\n\t\t\treturn fn.apply(this, ...args);\n\t\t} else {\n\t\t\treturn currying(fn.bind(this, ...args), len - args.length)\n\t\t}\n\t}\n}\nconst fn = currying(function(a, b, c) {\n\t\tconsole.log([a, b, c]);\n});\nfn(\"a\", \"b\", \"c\") // [\"a\", \"b\", \"c\"]\nfn(\"a\", \"b\")(\"c\") // [\"a\", \"b\", \"c\"]\nfn(\"a\")(\"b\")(\"c\") // [\"a\", \"b\", \"c\"]\nfn(\"a\")(\"b\", \"c\") // [\"a\", \"b\", \"c\"]\n```\n\n#### æ€»ç»“\nå½“ç„¶ï¼Œä»ä¸Šé¢çš„ä¸‰ç§åº”ç”¨åœºæ™¯å¯ä»¥çœ‹å‡ºï¼Œå‡½æ•°æŸ¯é‡ŒåŒ–å…¶å®æ˜¯ä¸€ç§å·¥å…·æ–¹æ³•ï¼Œå®ƒå°†å‡½æ•°æ”¹é€ ä¸ºæ›´é€‚åˆæˆ‘ä»¬çš„æ¨¡å¼ï¼ŒæŒ‰ç…§Stoyan Stefanov --ã€ŠJavaScript Patternã€‹ä½œè€… çš„è¯´æ³•ï¼Œæ‰€è°“â€œæŸ¯é‡ŒåŒ–â€,  `å°±æ˜¯ä½¿å‡½æ•°ç†è§£å¹¶å¤„ç†éƒ¨åˆ†åº”ç”¨` ã€‚ä»é—­åŒ…å¼•å…¥æŸ¯é‡ŒåŒ–å‡½æ•°çš„æ¦‚å¿µï¼Œæ˜¯å› ä¸ºæ ¹æ®æ¦‚å¿µ ï¼š `åªä½¿ç”¨ä¼ é€’ç»™å‡½æ•°çš„ä¸€éƒ¨åˆ†å‚æ•°æ¥è°ƒç”¨å®ƒï¼Œè®©å®ƒè¿”å›ä¸€ä¸ªå‡½æ•°å»å¤„ç†å‰©ä¸‹çš„å‚æ•°`ï¼Œæ‰€ä»¥æŸ¯é‡ŒåŒ–å‡½æ•°æ˜¯å¿…ç„¶åŒ…å«é—­åŒ…çš„ã€‚\n\n#### ä»¥ä¸Š\n\n#### çŒ®å‡ºå¿ƒè„ï¼ï¼\n\nå‚è€ƒèµ„æ–™ï¼š\n[æŸ¯é‡ŒåŒ–å’Œåå‡½æ•°æœ‰ä»€ä¹ˆåŒºåˆ«?](https://segmentfault.com/q/1010000008626058)\n[æ·±å…¥é«˜é˜¶å‡½æ•°åº”ç”¨ä¹‹æŸ¯é‡ŒåŒ–](https://github.com/yygmind/blog/issues/37)\n[JavaScript å‡½æ•°å¼ç¼–ç¨‹æŠ€å·§ - æŸ¯é‡ŒåŒ–](https://mp.weixin.qq.com/s/bnhMvxz3mVsuOx0QRrnL-w)\n\n\n\n\n\n\n",
      "data": {
        "title": "å‡½æ•°æŸ¯é‡ŒåŒ–",
        "date": "2019-06-17 18:21:43",
        "tags": [],
        "published": true,
        "hideInList": false,
        "feature": "/post-images/han-shu-ke-li-hua.jpg"
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "han-shu-ke-li-hua"
    },
    {
      "content": "\n\nè¿™æ®µæ—¶é—´å¿™åˆ°æ ¹æœ¬æ— æš‡å†™åšå®¢ï¼Œåˆšæœ‰æ—¶é—´å†™äº†ï¼Œåˆæƒ³ç€å†™è¿™ä¹ˆä¸€ä¸ªå¤§çš„é¢˜ç›®ï¼Œäººç”Ÿæœç„¶æ¯å¤©å……æ»¡æŒ‘æˆ˜ã€‚\n\n## performance API\n\nè¯´è¯´èµ·å› å§ï¼Œæœ‰ä¸€å¤©è€å¤§è¯´\n\n> â€œä½ åœ¨è‡ªå·±çš„æ¨¡å—é‡ŒæŠŠæ€§èƒ½åˆ†æåŠ ä¸€ä¸‹â€\n\näºæ˜¯æˆ‘çœ‹äº†ä¸‹å…¬å¸å†…éƒ¨çš„æŸä¸ªæ€§èƒ½åˆ†æåº“å’Œå¹³å°ï¼Œä»¥åŠå®ƒçš„æ–‡æ¡£ã€‚å…¶ä¸­æœ‰ä¸€å¼ å›¾å¼•äººç©ç›®\n\n![](/images/get-file-event.png)\n\nè¿™å¼ å›¾ä»ä¸€ç§çº¬åº¦æ¥ååº”äº†ç”¨æˆ·ä»è¾“å…¥ url åˆ°é¡µé¢åŠ è½½å®Œæˆå‘ç”Ÿçš„å„ç§äº‹ä»¶ã€‚æˆ‘ä»¬æ¥è¯¦ç»†çœ‹çœ‹ï¼Œè¿™äº›äº‹ä»¶éƒ½ä»£è¡¨ä»€ä¹ˆæ„æ€ã€‚\n\n### äº‹ä»¶å‘¨æœŸ\n\n* navigationStart\n\n    è¯·æ±‚å¼€å§‹ï¼Œç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­è¾“å…¥äº†ç½‘å€ï¼Œå¹¶ä¸”ç‚¹å‡»äº†å›è½¦ã€‚\n\n* redirectStart\n\n    ç¬¬ä¸€ä¸ª HTTP è¯·æ±‚å‘ç”Ÿé‡å®šå‘çš„æ—¶é—´ï¼Œå¿…é¡»ä¸ºåŒåŸŸåçš„è·³è½¬ï¼Œå¦åˆ™å€¼ä¸º 0ã€‚\n\n* redirectEnd\n\n    æœ€åä¸€ä¸ª HTTP è¯·æ±‚å‘ç”Ÿé‡å®šå‘çš„æ—¶é—´ï¼Œå¿…é¡»ä¸ºåŒåŸŸåçš„è·³è½¬ï¼Œå¦åˆ™å€¼ä¸º 0ã€‚\n\n* unloadStart\n\n    å‰ä¸€ä¸ªç½‘é¡µ unload çš„æ—¶é—´ï¼Œå¿…é¡»ä¸å½“å‰é¡µé¢åŒåŸŸï¼Œå¦åˆ™ä¸º 0ã€‚\n\n* unloadEnd\n\n    å‰ä¸€ä¸ªç½‘é¡µ unload äº‹ä»¶æ‰§è¡Œå®Œæ¯•çš„æ—¶é—´ã€‚\n\n* fetchStart\n\n    æµè§ˆå™¨å‡†å¤‡å¥½å‘é€ Http è¯·æ±‚æ–‡æ¡£ï¼Œè¿™å‘ç”Ÿåœ¨æ£€æŸ¥æœ¬åœ°ç¼“å­˜ä¹‹å‰ã€‚\n\n* domainLookupStart\n\n    DNS åŸŸåæŸ¥è¯¢å¼€å§‹çš„æ—¶é—´ï¼Œå¦‚æœä½¿ç”¨äº†æœ¬åœ°ç¼“å­˜ï¼ˆå³æ—  DNS æŸ¥è¯¢ï¼‰æˆ–æŒä¹…è¿æ¥ï¼Œåˆ™ä¸ fetchStart å€¼ç›¸ç­‰\n\n* domainLookupEnd\n\n    DNS åŸŸåæŸ¥è¯¢å®Œæˆçš„æ—¶é—´ï¼Œå¦‚æœä½¿ç”¨äº†æœ¬åœ°ç¼“å­˜ï¼ˆå³æ—  DNS æŸ¥è¯¢ï¼‰æˆ–æŒä¹…è¿æ¥ï¼Œåˆ™ä¸ fetchStart å€¼ç›¸ç­‰\n\n* connnetStart\n\n    HTTPï¼ˆTCPï¼‰ å¼€å§‹å»ºç«‹è¿æ¥çš„æ—¶é—´ï¼Œå¦‚æœæ˜¯æŒä¹…è¿æ¥ï¼Œåˆ™ä¸ fetchStart å€¼ç›¸ç­‰\n    æ³¨æ„å¦‚æœåœ¨ä¼ è¾“å±‚å‘ç”Ÿäº†é”™è¯¯ä¸”é‡æ–°å»ºç«‹è¿æ¥ï¼Œåˆ™è¿™é‡Œæ˜¾ç¤ºçš„æ˜¯æ–°å»ºç«‹çš„è¿æ¥å¼€å§‹çš„æ—¶é—´\n\n* secureConnectionStart\n\n    HTTPS è¿æ¥å¼€å§‹çš„æ—¶é—´ï¼Œå¦‚æœä¸æ˜¯å®‰å…¨è¿æ¥ï¼Œåˆ™å€¼ä¸º 0\n\n* connectEnd\n\n    HTTPï¼ˆTCPï¼‰ å®Œæˆå»ºç«‹è¿æ¥çš„æ—¶é—´ï¼ˆå®Œæˆæ¡æ‰‹ï¼‰ï¼Œå¦‚æœæ˜¯æŒä¹…è¿æ¥ï¼Œåˆ™ä¸ fetchStart å€¼ç›¸ç­‰\n    æ³¨æ„å¦‚æœåœ¨ä¼ è¾“å±‚å‘ç”Ÿäº†é”™è¯¯ä¸”é‡æ–°å»ºç«‹è¿æ¥ï¼Œåˆ™è¿™é‡Œæ˜¾ç¤ºçš„æ˜¯æ–°å»ºç«‹çš„è¿æ¥å®Œæˆçš„æ—¶é—´\n    æ³¨æ„è¿™é‡Œæ¡æ‰‹ç»“æŸï¼ŒåŒ…æ‹¬å®‰å…¨è¿æ¥å»ºç«‹å®Œæˆã€SOCKS æˆæƒé€šè¿‡\n\n* requestStart\n\n    Http å¼€å§‹çœŸæ­£è¯·æ±‚æ–‡æ¡£çš„æ—¶é—´ï¼ŒåŒ…æ‹¬ä»æœ¬åœ°è¯»å–ç¼“å­˜ã€‚\n\n* responseStart\n\n    TTFB å¼€å§‹æ¥æ”¶å“åº”çš„æ—¶é—´ï¼ŒåŒ…æ‹¬ä»æœ¬åœ°è¯»å–ç¼“å­˜ã€‚\n\n* responseEnd\n\n    Http å“åº”å…¨éƒ¨æ¥æ”¶å®Œæˆï¼ŒåŒ…æ‹¬ä»æœ¬åœ°è¯»å–ç¼“å­˜ã€‚\n\n* domLoading\n\n    å¼€å§‹è§£ææ¸²æŸ“ DOM æ ‘\n\n* domInteractive\n\n    å®Œæˆè§£æ DOM æ ‘çš„æ—¶é—´\n\n* domContentLoaded\n\n    ç½‘é¡µå†…èµ„æºåŠ è½½å¼€å§‹çš„æ—¶é—´ï¼ŒDOM æ ‘å¼€å§‹æ¸²æŸ“ï¼ŒDOMContentLoadedäº‹ä»¶å®Œæˆä¹‹åçš„æ—¶åˆ»ï¼Œä¹Ÿæ˜¯javascriptç±»åº“ä¸­DOM readyäº‹ä»¶è§¦å‘çš„æ—¶åˆ»ã€‚è¿™é‡Œå¯ä»¥ç†è§£ä¸º æ¸²æŸ“æ ‘æ„å»ºå®Œæˆã€‚\n\n* domComplete\n\n    æ‰€æœ‰èµ„æºå·²ä¸‹è½½å®Œæ¯•ï¼ŒåŠ è½½è½¬ç¯å·²åœæ­¢æ—‹è½¬\n\n* loadEventStart\n\n    load å›è°ƒå‡½æ•°å¼€å§‹æ‰§è¡Œçš„æ—¶é—´\n\n* loadEventEnd\n\n    load äº‹ä»¶æ‰§è¡Œå®Œæ¯•\n\næœ‰äº†äº‹ä»¶å‘ç”Ÿçš„æ—¶é—´ï¼Œé‚£æˆ‘ä»¬å¦‚ä½•åˆ©ç”¨è¿™äº›äº‹ä»¶ï¼Ÿ\n\n> performance API\n\næˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç°ä»£æµè§ˆå™¨çš„ performance API æ¥è¿›è¡Œäº‹ä»¶çš„è®°å½•ï¼ŒAPI é‡Œè®°å½•äº†äº‹ä»¶å‘ç”Ÿçš„æ—¶é—´æˆ³ï¼Œæˆ‘ä»¬å¯ä»¥å› æ­¤å®Œæˆæ€§èƒ½ç»Ÿè®¡ã€‚å…¶å®å¤§å¤šçš„æ€§èƒ½åˆ†æåº“ï¼Œå°±æ˜¯åˆ©ç”¨è¿™ä¸ª performance API åšåˆ°çš„ã€‚\n\n### ç›¸å…³ API\n\n* performance.timing\n\nè®°å½•äº†å„ä¸ªäº‹ä»¶çš„æ—¶é—´ç‚¹\n\n* performance.getEntries()\n\nåŒ…å«äº†é¡µé¢ä¸­æ‰€æœ‰çš„ HTTP è¯·æ±‚\n\n* performance.now()\n\nå¯ä»¥ç²¾ç¡®è®¡ç®—ç¨‹åºæ‰§è¡Œæ—¶é—´ï¼Œä¸åƒ Date now å¯èƒ½ä¼šå—ç³»ç»Ÿç¨‹åºçš„å½±å“è€Œå˜å¾—ä¸ç²¾å‡†ï¼Œperformance.now() è¾“å‡ºçš„æ˜¯ç›¸å¯¹äº performance.timing.navigationStart(é¡µé¢åˆå§‹åŒ–) çš„æ—¶é—´\n\n* performance.mark()\n\nå¯ä»¥é€šè¿‡ä¼ å…¥ name ï¼Œä¾¿æ·çš„æ‰¹é‡æ ‡è®°äº‹ä»¶å‘ç”Ÿç‚¹\n\n* performance.memory\n\nusedJSHeapSize è¡¨ç¤ºæ‰€æœ‰è¢«ä½¿ç”¨çš„jså †æ ˆå†…å­˜ï¼›totalJSHeapSize è¡¨ç¤ºå½“å‰jså †æ ˆå†…å­˜æ€»å¤§å°ï¼Œè¿™è¡¨ç¤º usedJSHeapSize ä¸èƒ½å¤§äº totalJSHeapSizeï¼Œå¦‚æœå¤§äºï¼Œæœ‰å¯èƒ½å‡ºç°äº†å†…å­˜æ³„æ¼ã€‚\n\n* performance.navigation\n\n    * performance.navigation.type\n\n        * 0ï¼šç½‘é¡µé€šè¿‡ç‚¹å‡»é“¾æ¥ã€åœ°å€æ è¾“å…¥ã€è¡¨å•æäº¤ã€è„šæœ¬æ“ä½œç­‰æ–¹å¼åŠ è½½\n\n        * 1ï¼šç½‘é¡µé€šè¿‡â€œé‡æ–°åŠ è½½â€æŒ‰é’®æˆ–è€…location.reload()æ–¹æ³•åŠ è½½\n\n        * 2ï¼šç½‘é¡µé€šè¿‡â€œå‰è¿›â€æˆ–â€œåé€€â€æŒ‰é’®åŠ è½½\n\n        * 255ï¼šä»»ä½•å…¶ä»–æ¥æºçš„åŠ è½½\n\n    * performance.navigation.redirectCount\n\n        è¡¨ç¤ºå½“å‰ç½‘é¡µç»è¿‡äº†å¤šå°‘æ¬¡é‡å®šå‘è·³è½¬\n\n> åªæœ‰å¤§é‡çš„æ¨¡ä»¿ä¹‹åï¼Œä½ æ‰æœ‰èƒ½åŠ›å»åˆ›é€ ã€‚\n\n\n\n\n\n",
      "data": {
        "title": "å‰ç«¯æ€§èƒ½åˆ†ææ€»ç»“ï¼ˆä¸€ï¼‰",
        "date": "Invalid date",
        "tags": [
          "blog"
        ],
        "published": true,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "2018-9-27-preformance"
    },
    {
      "content": "Setã€Mapã€WeakSet å’Œ WeakMap éƒ½æ˜¯ es6 æ¨å‡ºçš„æ–°çš„æ•°æ®ç»“æ„ï¼Œä¸»è¦æ˜¯ä½¿ç”¨åœºæ™¯æ˜¯ `æ•°ç»„å»é‡` å’Œ `æ•°æ®å­˜å‚¨`\n\n## Set Map\n\nSet æ˜¯ `é›†åˆ` çš„ä¸€ç§ä½“ç°ï¼Œå‚æ•°ä¼ å…¥ keyã€‚è€Œ Map æ˜¯ `å­—å…¸` çš„ä¸€ç§ä½“ç°ï¼Œå‚æ•°ä¼ å…¥ key-valueã€‚\n\nSet å’Œ Map éƒ½å¯ä»¥å­˜å‚¨ä¸é‡å¤çš„å€¼\n\nåŒºåˆ«æ˜¯é›†åˆä»¥ é”® å½¢å¼å­˜å‚¨å…ƒç´ ï¼Œå­—å…¸ä»¥ é”®-å€¼ å½¢å¼å­˜å‚¨å…ƒç´ ï¼Œé”®å¯ä»¥æ˜¯ä»»ä½•æ•°æ®ç»“æ„\n\n## WeakSet WeakMap\n\n### WeakSet\n\nWeakSetçš„æˆå‘˜åªèƒ½æ˜¯å¯¹è±¡ï¼ŒSetçš„æˆå‘˜ä¸ä»…å¯ä»¥æ˜¯å¯¹è±¡è¿˜å¯ä»¥æ˜¯å…¶ä»–ç±»å‹çš„å€¼\n\nWeakSetçš„ä¸€ä¸ªæœ€å¤§çš„ç”¨å¤„æ˜¯ï¼šå­˜å‚¨DOMç»“ç‚¹ï¼Œä¸ç”¨æ‹…å¿ƒè¿™äº›è¿™äº›èŠ‚ç‚¹ä»æ–‡æ¡£ä¸­åˆ é™¤ï¼Œå¼•å‘å†…å®¹æ³„éœ²\n\n### WeakMap\n\nWeakMapåªæ¥å—å¯¹è±¡ä½œä¸ºé”®åï¼ˆnullé™¤å¤–ï¼‰ï¼Œä¸æ¥å—å…¶ä»–ç±»å‹çš„å€¼ä½œä¸ºé”®å\n\næ³¨å†Œç›‘å¬äº‹ä»¶çš„listenerå¯¹è±¡å¾ˆé€‚åˆç”¨WeakMapå®ç°,å› ä¸ºå°†ç›‘å¬å‡½æ•°æ”¾åœ¨WeakMapä¸­ï¼Œä¸€æ—¦DOMå¯¹è±¡æ¶ˆå¤±ï¼Œä¸å®ƒç»‘å®šçš„ç›‘å¬å‡½æ•°ä¹Ÿä¼šè‡ªåŠ¨æ¶ˆå¤±\n\n### å…±åŒç‚¹\n\nWeakMap å’Œ WeakSet åªè¦å¤–éƒ¨å¼•ç”¨æ¶ˆå¤±ï¼ŒWeakMapå†…éƒ¨çš„å¼•ç”¨å°±ä¼šè‡ªåŠ¨è¢«åƒåœ¾å›æ”¶æ¸…é™¤\n\n> å½“ä½ æ„Ÿåˆ°ä¸èˆ’æœï¼Œè¿‡çš„éš¾å—çš„æ—¶å€™ï¼Œæ­£æ˜¯ä½ æˆé•¿çš„æ—¶å€™ã€‚\n\nå‚è€ƒèµ„æ–™:\n\n[ES6çš„Setå’ŒMapæ•°æ®ç»“æ„ï¼Œç”±ä½ åˆ¶é€ ](https://juejin.im/post/5acc57eff265da237f1e9f7c)\n\n[WeakSetå’ŒWeakMap](https://segmentfault.com/a/1190000016274121)",
      "data": {
        "title": "Setã€Mapã€WeakSet å’Œ WeakMap",
        "date": "Invalid date",
        "tags": [
          "blog"
        ],
        "published": true,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "2019-1-24-set-map"
    },
    {
      "content": "\n\nç”¨ git æœ‰ä¸€å¹´å¤šäº†ï¼Œå¯èƒ½æ˜¯ç”±äºå¹³æ—¶é¡¹ç›®çš„é™åˆ¶ï¼Œæ„Ÿè§‰è‡ªå·±æ— æ³•å°† git çœŸæ­£çš„å¨åŠ›å‘æŒ¥å‡ºæ¥ï¼Œæ˜¨å¤©æ™šä¸ŠåˆæŠŠ git å­¦ä¹ è¿‡äº†ä¸€éï¼Œå‡†å¤‡\nå†™ç¯‡æ–‡ç« ï¼Œåšä¸ªæ€»ç»“ã€‚\n\n`git init` åˆå§‹åŒ–ä»“åº“\n\n`git config` è®¾ç½®ç”¨æˆ·åå’Œé‚®ç®±, git config çš„å‚æ•°å¯ä»¥æ˜¯ --global ä¹Ÿå¯ä»¥æ˜¯ --local è§†è‡ªå·±çš„æƒ…å†µè€Œå®š\n\n    git config --global user.name \"\"\n    git config --global user.email \"\"\n\n`git clone` å…‹éš†ä¸€ä¸ªä»“åº“\n\n`git remote` æŸ¥çœ‹ä¸è¿œç¨‹ä»“åº“çš„å…³è”æƒ…å†µï¼Œä¹Ÿå¯ä»¥å…³è”è¿œç¨‹ä»“åº“\n\n    git remote add origin address\n\n`git add` å°†æ–‡ä»¶æ·»åŠ åˆ°ç¼“å­˜åŒº, `git add .` ä¸ -A å‚æ•°æ¯”è¾ƒæ–¹ä¾¿ï¼Œå¯ä»¥ä¸€æ¬¡å…¨éƒ¨æ·»åŠ ï¼ŒåŒºåˆ«æ˜¯ `git add .`æœ‰æ—¶æ— æ³•æ·»åŠ  delete æ–‡ä»¶\n\n    git add .\n    git add -A\n\n`git commit` å‘½ä»¤å°†æ–‡ä»¶ä»ç¼“å­˜åŒºæ·»åŠ åˆ°æœ¬åœ°ä»“åº“ï¼Œ -m å‚æ•°æ·»åŠ å¤‡æ³¨ï¼Œ--amend å‚æ•°è¡¥äº¤æ–‡ä»¶ï¼Œæ³¨æ„ä¹Ÿè¦æ·»åŠ  -m å‚æ•°\n\n    git commit --amend -m \"\"\n\n`git status` æŸ¥çœ‹æ–‡ä»¶çŠ¶æ€ï¼Œåœ¨ä¸æ›´æ”¹é»˜è®¤é…ç½®çš„å‰æä¸‹ï¼Œçº¢è‰²ä¸€èˆ¬ä¸º untracked æ–‡ä»¶ï¼Œç»¿è‰²ä¸ºæ·»åŠ åˆ°ç¼“å­˜åŒºæ–‡ä»¶\n\n`git push` æ¨é€æœ¬åœ°ä¿®æ”¹åˆ°è¿œç«¯ï¼Œè¿™é‡Œæœ€å¥½åŠ ä¸Šè¿œç¨‹ä»“åº“åä¸åˆ†æ”¯ï¼Œå¯ä»¥ä½¿æ“ä½œæ›´å¿«ï¼Œ-u å‚æ•°å¯ä»¥å…³è”åˆ†æ”¯ï¼Œä¸ºä»¥åç®€åŒ–å‘½ä»¤\n\n    git push -u origin master\n\n`git pull` æ‹‰å–è¿œç«¯ä»“åº“\n\n    git pull origin remote\n\n`git log` æŸ¥çœ‹å†å²æäº¤è®°å½•ï¼Œå¸¸ç”¨çš„å‚æ•°æœ‰ --graph ä¼šç”¨å›¾å½¢åŒ–å°†æäº¤è®°å½•æ˜¾ç¤ºå‡ºæ¥ï¼Œ--all ä¼šæ˜¾ç¤ºæ‰€æœ‰åˆ†æ”¯çš„æäº¤è®°å½•\n    \n    git log --graph --all\n\n`git reflog` æŸ¥çœ‹å‘½ä»¤å†å²ï¼Œä»¥ä¾¿ç¡®å®šè¦å›åˆ°æœªæ¥çš„å“ªä¸ªç‰ˆæœ¬ï¼ˆå› ä¸ºå›åˆ°è¿‡å»åï¼Œgit log ä¹Ÿä¼šå›åˆ°è¿‡å»ï¼‰\n\n`git reset` æ’¤é”€å›æº¯å‘½ä»¤ \n\n* ä¿®æ”¹å·²åœ¨ç‰ˆæœ¬åº“ä¸­\n    * --hard å‚æ•°ç›´æ¥å°†ä¸Šä¸€æ¬¡çš„ä¿®æ”¹æŠ›å¼ƒ\n    * --soft å‚æ•°å°†ä¸Šä¸€æ¬¡çš„ä¿®æ”¹æ”¾å…¥ç¼“å­˜åŒº\n    * --mixed å‚æ•°å°†ä¸Šä¸€æ¬¡çš„ä¿®æ”¹æ”¾å…¥å·¥ä½œåŒº\n    \n    \n    git reset --hard commit_id\n\n* ä¿®æ”¹å¯èƒ½ä¸åœ¨ç‰ˆæœ¬åº“ä¸­(file å³æ–‡ä»¶å)\n    * åœºæ™¯ 1 :å½“ä½ æ”¹ä¹±äº†å·¥ä½œåŒºæŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œæƒ³ç›´æ¥ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹æ—¶ï¼Œç”¨å‘½ä»¤ `git checkout --file`\n    * åœºæ™¯ 2 :å½“ä½ ä¸ä½†æ”¹ä¹±äº†å·¥ä½œåŒºæŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œè¿˜æ·»åŠ åˆ°äº†æš‚å­˜åŒºæ—¶ï¼Œæƒ³ä¸¢å¼ƒä¿®æ”¹ï¼Œç¬¬ä¸€æ­¥ç”¨å‘½ä»¤ `git reset HEAD file`ï¼Œç¬¬äºŒæ­¥å›åˆ°åœºæ™¯ 1ã€‚\n    * åœºæ™¯ 3 :å·²ç»æäº¤äº†ä¸é€‚åˆçš„ä¿®æ”¹åˆ°ç‰ˆæœ¬åº“ï¼Œæƒ³è¦æ’¤é”€æœ¬æ¬¡æäº¤ï¼Œå‚è€ƒ ä¿®æ”¹å·²åœ¨ç‰ˆæœ¬åº“ä¸­\n\n`git diff` æ¯”è¾ƒæ–‡ä»¶å·®å¼‚ã€\n\n* git diff: æŸ¥çœ‹ working directory ä¸ staging area ä¹‹é—´çš„å·®å¼‚\n* git diff --cached: æŸ¥çœ‹ repository ä¸ staging area ä¹‹é—´çš„å·®å¼‚\n* git diff HEAD: æŸ¥çœ‹ working directory ä¸ repository ä¹‹é—´çš„å·®å¼‚\n\ndiff å·®å¼‚æ¯”è¾ƒå¯ä»¥çœ‹è¿™ç¯‡æ–‡ç«  [è¯»æ‡‚ diff](http://www.ruanyifeng.com/blog/2012/08/how_to_read_diff.html)\n\n`git branch` æŸ¥çœ‹ä¸åˆ›å»ºåˆ†æ”¯ï¼Œ-d åˆ é™¤åˆ†æ”¯ã€‚\n\n    git branch div\n\n`git checkout` åˆ›å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢è¿‡å»ï¼Œåˆ‡æ¢åˆ†æ”¯ä¸ tagã€‚\n\n    git checkout -b dev\n\n`git tag` ä¸ºæœ€æ–°çš„ commit æ‰“ tagï¼ŒæŸ¥çœ‹ tag\n\n`git push --tags origin master` å°†æœ¬åœ°æ‰€æœ‰ tag éƒ½æ¨é€åˆ°è¿œç«¯ï¼Œ--tags å‚æ•°ä»£è¡¨å°†æ‰€æœ‰çš„ tags éƒ½æ¨é€åˆ°è¿œç«¯ã€‚\n\n`git push origin dev:dev` å°†åˆ†æ”¯æ¨é€åˆ°è¿œç«¯ä»“åº“ã€‚\n\n`git merge` åˆå¹¶åˆ†æ”¯ï¼Œå°†æŒ‡å®šåˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ï¼Œè¿™é‡Œå’Œä¸‹é¢çš„ rebase éƒ½æ¶‰åŠä¸€ä¸ªæ‰‹åŠ¨ä¿®æ”¹ï¼Œè‹¥æ–‡ä»¶æœ‰å¤šä¸ªåˆ†æ”¯åŒæ—¶ä¿®æ”¹ï¼Œé‚£ä¹ˆå°±è¦å…ˆæ‰‹åŠ¨è§£å†³å†²çªï¼Œä¹‹åå†åˆå¹¶ã€‚\n\n`git rebase` åˆå¹¶åˆ†æ”¯ï¼Œç®€åŒ–åˆ†æ”¯æ¨¡å‹ï¼Œå…³äºä¸ `git merge` çš„å…·ä½“åŒºåˆ«ï¼Œå‚è€ƒ [Git é€Ÿæˆç­: git rebase](http://www.html-js.com/article/Week-end-column-Git-crash-course-git-rebase) ä¸ [git rebase å°è®¡](http://www.cnblogs.com/kym/archive/2010/08/12/1797937.html)\n\n`git fetch` è·å–è¿œç«¯ä¿®æ”¹ï¼Œä½†æ˜¯å¹¶ä¸åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ã€‚å…¶å® `git pull` å°±æ˜¯ `git fetch` å’Œ `git merge` ç»„æˆçš„ã€‚\n\n`git stash` ä¿å­˜å·¥ä½œç°åœºï¼Œé€šè¿‡ `git stash list` æŸ¥çœ‹ä¿å­˜ï¼Œé€šè¿‡ `git stash apply` æ¢å¤ï¼Œä½†æ˜¯æ¢å¤åï¼Œstash å†…å®¹å¹¶ä¸åˆ é™¤ï¼Œä½ éœ€è¦ç”¨ `git stash drop` æ¥åˆ é™¤,æˆ–è€… `git stash pop` ç›´æ¥æ¢å¤å’Œåˆ é™¤ã€‚\n\n`git mv` é‡å‘½åæ–‡ä»¶,é¦–å…ˆè¿™ä¸ªæ–‡ä»¶éœ€è¦æ˜¯å·²ç»æ˜¯å·²è¿½è¸ªçŠ¶æ€ï¼Œæ‰å¯ä»¥ä½¿ç”¨ git mv å‘½ä»¤ï¼Œæ“ä½œå®Œæˆåè‡ªåŠ¨å¤„äº staging çŠ¶æ€ã€‚\n\n`.gitignore` å¿½ç•¥çš„æ–‡ä»¶ã€‚è¿™é‡Œä½¿ç”¨ vim ç¼–è¾‘å™¨æ‰“å¼€ .gitignore ï¼Œè¿™ä¸ªæ–‡ä»¶è®°å½•äº† git å¿½ç•¥æ–‡ä»¶çš„è§„åˆ™ã€‚\n\n`git rm` ç§»é™¤æŸæ–‡ä»¶ï¼Œä¸ git add ç›¸å¯¹ï¼Œä¸ git add -A å‘½ä»¤æœ‰é‡å ä½œç”¨ï¼Œgit rm --cached å°†æ–‡ä»¶ä» tracked å˜ä¸º untracked ã€‚",
      "data": {
        "title": "git å­¦ä¹ æ€»ç»“",
        "date": "Invalid date",
        "tags": [
          "blog"
        ],
        "published": true,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "2016-7-21-git"
    },
    {
      "content": "    æˆ‘ä»¬ç”¨äºŒå‰æ ‘ä½œä¸ºæ•°æ®ç»“æ„ï¼Œæ¥å†™å‡ºæ·±åº¦ä¼˜å…ˆéå†å’Œå¹¿åº¦ä¼˜å…ˆéå†ã€‚\n\n## æ·±åº¦ä¼˜å…ˆéå†\n\n> è¯¥ç®—æ³•å…ˆå°†å½“å‰ç»“ç‚¹çš„å­©å­å…¨éƒ¨éå†ç»“æŸï¼Œå†éå†åŒä¸€çº§çš„èŠ‚ç‚¹\n\n```javascript\n    // é€’å½’\n    let res = [];\n    let dfs = function(node) {\n        if (node) {\n            res.push(node.val);\n            dfs(node.left);\n            dfs(node.right);\n        }\n    }\n    // éé€’å½’\n    let dfs = function(nodes) {\n        let res = [];\n        let stack = [];\n        stack.push(nodes);\n        while (stack.length) {\n            let node = stack.pop();\n            res.push(node.val);\n            node.right && stack.push(node.right); // å…ˆå‹å…¥å³å­æ ‘\n            node.left && stack.push(node.left);\n        }\n        return res;\n    }\n```\n\n## å¹¿åº¦ä¼˜å…ˆéå†\n\nå½“ä½¿ç”¨å¹¿åº¦ä¼˜å…ˆéå†çš„æ—¶å€™ï¼Œå…ˆä¾æ¬¡éå†å…„å¼ŸèŠ‚ç‚¹ï¼Œç„¶åä¾¿åˆ©å…„å¼ŸèŠ‚ç‚¹ä¸‹çš„å­èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯æŒ‰å±‚æ¬¡çš„å»éå†ã€‚ä¾æ¬¡éå†æ ¹èŠ‚ç‚¹ï¼Œç„¶åæ˜¯å·¦å­©å­å’Œå³å­©å­ã€‚\n\n```javascript\n    // é€’å½’\n    let res = [],\n        stack = [],\n        count = 0;\n\n    stack.push(nodes);\n    let bfs = function() {\n        let node = stack[count];\n        if (node) {\n            res.push(node.val);\n            stack.push(node.left);\n            stack.push(node.right);\n            count ++;\n        }\n        bfs();\n    }\n\n    // éé€’å½’\n    let bfs = function() {\n        let res = [],\n            stack = [],\n            count = 0;\n\n        stack.push(nodes);\n        while(stack.length){\n            let node = stack.shift();\n            res.push(node.value);\n            node.left && stack.push(node.left);\n            node.right && stack.push(node.right);\n        }\n        return res;\n    }\n```",
      "data": {
        "title": "æ·±åº¦ä¼˜å…ˆéå†å’Œå¹¿åº¦ä¼˜å…ˆéå†",
        "date": "Invalid date",
        "tags": [
          "blog"
        ],
        "published": true,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "2019-1-29-bfs-dfs"
    },
    {
      "content": "æœ€è¿‘å¤šçœ‹äº†ä¸€äº›è¿™æ–¹é¢çš„çŸ¥è¯†ï¼Œç®—æ˜¯å…¥äº†é—¨ï¼Œåœ¨è¿™é‡Œè®°å½•ä¸€äº›ã€‚\n\n### code splitting\n\nä»£ç åˆ†å‰²åœ¨wenpack ä¸­å…±æœ‰ä¸‰ç§æ–¹æ³•ï¼š\n\n* entry é…ç½®å¤šä¸ªå…¥å£æ–‡ä»¶\n\tæ–¹ä¾¿ï¼Œå¿«æ·ï¼Œä½†ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œé¦–å…ˆæ¯ä¸ª chunk éƒ½å¯èƒ½å«æœ‰é‡å¤çš„æ¨¡å—ï¼Œå…¶æ¬¡è¿™æ ·åšçš„ç»†ç²’åº¦ä¸å¤Ÿï¼Œå¹¶ä¸èƒ½åšåˆ°ä»£ç å±‚é¢çš„åˆ†å‰²ã€‚\n\t\t\n* splitChunks æŠ½å–å…¬æœ‰ä»£ç \n\tsplitChunks å¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£å†³é‡å¤æ¨¡å—çš„é—®é¢˜ã€‚\n\t\t\n* åŠ¨æ€åŠ è½½\n\twebpack æä¾›äº†ä¸¤ç§æ–¹å¼æ¥å®ç°åŠ¨æ€åŠ è½½ï¼š\n\t* import()\n\t\tåŠ¨æ€ import å¯¼å…¥æ˜¯ es7 çš„è¯­æ³•ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ª promise ï¼Œ å¯ä»¥å’Œ async æ­é…æœç”¨ï¼Œè¿™ä¹Ÿæ˜¯ webpack æ¨èçš„åŠ¨æ€åŠ è½½æ–¹å¼ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œéœ€è¦é¢å¤–çš„ babel æ’ä»¶ plugin-syntax-dynamic-import\n\t* require.ensure\n\t\tè¿™æ˜¯ webpack å®ç°çš„åŠŸèƒ½ï¼Œä½†å®˜æ–¹å·²ä¸æ¨èä½¿ç”¨äº†ã€‚\n\t\t\n\tåœ¨è¿™é‡Œæˆ‘ä»¬è¿˜éœ€è¦äº†è§£ä¸€ä¸‹ css çš„ä»£ç åˆ†å‰²ï¼Œåœ¨ css å±‚é¢ç›®å‰èƒ½åšåˆ°çš„ï¼Œå°±æ˜¯æŠ½å–ç”Ÿæˆå•ç‹¬çš„ css æ–‡ä»¶ã€‚ç›®å‰æœ‰ä¸¤ä¸ªplugin å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¾ˆå¥½çš„å®ç°è¿™ä¸€ç‚¹ï¼š `extract-text-webpack-plugin@next` å’Œ `mini-css-extract-plugin`ã€‚\n\t\n### Tree Shaking\n\n* css tree shaking\nå®ç° css çš„ tree shaking éœ€è¦å€ŸåŠ© `purifycss-webpack` è¿™ä¸ªæ’ä»¶ï¼Œå®ƒä¼šå¸®åŠ©æˆ‘ä»¬æ¸…é™¤æ— ç”¨çš„ css ä»£ç \n\n\t```javascript\n\tconst PurifyCss = require('purifycss-webpack')\n\tconst glob = require('glob-all')\n\n\tplugins: [\n\t\t\tnew PurifyCss({\n\t\t\t\t\tpaths: glob.sync([\n\t\t\t\t\t\t\tpath.resolve(__dirname, './src/*.html'),\n\t\t\t\t\t\t\tpath.resolve(__dirname, './src/*.js')\n\t\t\t\t\t])\n\t\t\t})\n\t]\n\t```\n\t\n* js tree shaking\nåœ¨ webpack ä¸­æƒ³è¦å®ç° tree shaking æ˜¯ä¸€ä»¶å¾ˆä¸å®¹æ˜“çš„äº‹æƒ…ï¼Œåœ¨webpack ä¸­æˆ‘ä»¬æ˜¯é  UglifyJS æ¥æ¸…é™¤æ— ç”¨ä»£ç çš„ï¼Œç„¶è€Œ UglifyJS åªèƒ½æ ¹æ®ä»£ç æ˜¯å¦æœ‰å‰¯ä½œç”¨è€Œä¸æ˜¯ç¨‹åºæµåˆ†ææ¥åˆ é™¤ä»£ç ã€‚æœ¬æ¥æˆ‘ä»¬æ˜¯å¯ä»¥çŸ¥é“è‡ªå·±çš„ä»£ç æ˜¯å¦æœ‰å‰¯ä½œç”¨çš„ï¼Œä½†æ˜¯é€šè¿‡ babel è½¬è¯‘åï¼Œæˆ‘ä»¬è‡ªå·±ä¹Ÿæ— æ³•ä¿è¯äº†ã€‚æƒ³è¦äº†è§£è¯¦æƒ…å¯ä»¥çœ‹çœ‹[è¿™é‡Œ](https://juejin.im/post/5a5652d8f265da3e497ff3de)ã€‚\n\tè¿™é‡Œæˆ‘ä»¬åªèƒ½åšåˆ°è‡ªå·±åº”è¯¥åšçš„ï¼š\n\t* æˆ‘ä»¬å¼€å‘çš„æ˜¯ä¾èµ–åº“\n\t\t* ä½¿ç”¨ rollup è¿›è¡Œæ‰“åŒ…å¹¶ä¸”æä¾› ES6 ç‰ˆæœ¬ï¼Œåœ¨ package.json ä¸­æä¾› module å­—æ®µã€‚\n\t\t* æ‰“åŒ…å•ç‹¬çš„ç»„ä»¶æ–‡ä»¶ï¼Œè®©ç”¨æˆ·é€šè¿‡ç›®å½•å»åŠ è½½ã€‚\n\t* æˆ‘ä»¬å¼€å‘çš„æ˜¯å·¥ç¨‹é¡¹ç›®\n\t\t* webpack4 ä»¥ååªéœ€å°† mode è®¾ç½®ä¸º production ï¼Œå³å¯å¼•å…¥ UglifyJS æ’ä»¶ã€‚\n\t\t* åœ¨ optimization ä¸­ï¼Œè®¾ç½®ï¼š\n\t\t\t```javascript\n\t\t\toptimization: {\n\t\t\t\t\tusedExports: true\n\t\t\t}\n\t\t\t```\n\t\t\n### DllPlugin\n\næˆ‘ä»¬å¼•å…¥çš„ç¬¬ä¸‰æ–¹åº“åœ¨ä¸€èˆ¬æƒ…å†µä¸‹éƒ½ä¸ä¼šæœ‰æ›´æ”¹ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨æ’ä»¶å°†åº“æ‰“åŒ…æˆ dll æ–‡ä»¶ï¼Œåœ¨éœ€è¦æ—¶ç›´æ¥å¼•ç”¨ã€‚\n* è®¾ç½® dll config æ–‡ä»¶\n```javascript\nmodule.exports = {\n\tmode: 'production',\n\tentry: {\n\t\treact: ['react']\n\t},\n\toutput: {\n\t\tpath: path.resolve(__dirname, './dll'),\n\t\tfilename: '[name].vendor.js',\n\t\tlibrary: '[name]_[hash]'     // manifest é‡Œç¬¬ä¸‰æ–¹åº“çš„åç§°\n\t\tlibraryTarget: 'this'\n\t},\n\tplugins: [\n\t\tnew webpack.DllPlugin({\n\t\t\tpath: path.resolve(__dirname, './dll/[name]-manifest.json'),\n\t\t\tname: '[name]_[hash]'\n\t\t})\n\t]\n}\n```\n\n* åœ¨ package.json ä¸­æ·»åŠ å‘½ä»¤\n\t```javascript\n\t\"build:dll\": \"webpack --config webpack.dll.config.js\"\n\t```\n\t\n* ä½¿ç”¨ dll æ–‡ä»¶\n```javascript\n new AddAssetHtmlWebpackPlugin({     // å°† dll æ–‡ä»¶å¼•å…¥ html\n\t filepath: path.resolve(__dirname, './dll/react.vendor.js') // å¯¹åº”çš„ dll æ–‡ä»¶è·¯å¾„\n }),\n new webpack.DllReferencePlugin({\n\t manifest: path.resolve(__dirname, './dll/react-manifest.json')\n })\n```\n\n### happypack\n\nhappypack å¯ä»¥å¯ç”¨å¤šä¸ªè¿›ç¨‹å¸®åŠ©æˆ‘ä»¬å¹¶å‘å¤„ç†æ‰“åŒ…ä»»åŠ¡ï¼Œæ‰€ä»¥ä¼šå¿«ä¸€äº›ã€‚\n\n```javascript\nconst os = require('os');\nconst HappyPackThreadPool = HappyPack.ThreadPool({ size: os.cpus().length });\nrules: [\n\t{\n\t\t\ttest: /\\.jsx?$/,\n\t\t\texclude: /node_modules/,\n\t\t\tuse: [\n\t\t\t\t\t{\n\t\t\t\t\t\t\tloader: 'happypack/loader?id=usedBabel'\n\t\t\t\t\t}\n\t\t\t]\n\t},\n]\nnew HappyPack({\n\tid: 'usedBabel',\n\tloaders: ['babel-loader'],\n\tthreadPool: HappyPackThreadPool\n}),\n```\n\n### PWA\n\nwebpack ä¸»è¦æ˜¯ç”¨äº† google workbox çš„ loader ï¼Œåªéœ€è¦ä¸€äº›ç®€å•çš„é…ç½®ï¼Œå°±å¯ä»¥å®ç° PWA ï¼Œå½“ç„¶æ ¹æ®é¡¹ç›®çš„å®é™…æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦å…·ä½“åˆ†æã€‚\n\n```javascript\nconst WorkboxPlugin = require('workbox-webpack-plugin')\nconst prodConfig = {\n  plugins: [\n    new WorkboxPlugin.GenerateSW({\n      clientsClaim: true,\n      skipWaiting: true\n    })\n  ]\n}\n\n// åœ¨å…¥å£æ–‡ä»¶æ·»åŠ \nif ('serviceWorker' in navigator) {\n  window.addEventListener('load', () => {\n    navigator.serviceWorker\n      .register('/service-worker.js')\n      .then(registration => {\n        console.log('service-worker registed')\n      })\n      .catch(error => {\n        console.log('service-worker registed error')\n      })\n  })\n}\n```\n\n#### ä»¥ä¸Š\n\n> æœ‰äº›äººçš„å‚²æ…¢ï¼Œæ¥è‡ªäºå¹³æ—¶å·¥ä½œçš„ä¸¥è°¨ä¸è´Ÿè´£\n\n\n\n\n",
      "data": {
        "title": "webpack å°è°ˆ",
        "date": "2019-06-14 17:41:20",
        "tags": [
          "webpack"
        ],
        "published": true,
        "hideInList": false,
        "feature": "/post-images/webpack-xiao-tan.jpg"
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "webpack-xiao-tan"
    },
    {
      "content": "\nå‰ç«¯å‘å±•åˆ°ç°åœ¨ï¼Œä¸ä»…è¦å°†è®¾è®¡å¸ˆçš„åŸå‹å›¾å®Œç¾å±•ç°ï¼Œè¿˜è¦è€ƒè™‘åˆ°å“åº”å¼ã€æ€§èƒ½ä¼˜åŒ–ç­‰è¯¸å¤šæ–¹é¢,æ‰€ä»¥æ€§èƒ½åˆ†ææ˜¯ç°åœ¨æ¯ä¸ªå‰ç«¯å·¥ç¨‹å¸ˆçš„åŸºç¡€æŠ€èƒ½ï¼Œä»è€Œæ¥ä¼˜åŒ–è‡ªå·±çš„é¡µé¢ï¼Œ\nè¾¾åˆ°æœ€ä½³ç”¨æˆ·ä½“éªŒçš„ç›®çš„ï¼Œä½†æœ‰æ—¶é¢å¯¹è¯¸å¤šçš„å‰ç«¯æ€§èƒ½åˆ†æå·¥å…·ï¼Œæˆ‘ä»¬ä¼šä¸çŸ¥æ‰€æªï¼Œå…¶å®å¾ˆå¤šæ—¶å€™ï¼ŒChrome å¼€å‘è€…å·¥å…·å°±å¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£å†³é—®é¢˜ã€‚å®ƒçš„ Timeline å’Œ Profiles \nç‰ˆå—å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¾ˆå¥½çš„åˆ†æé¡µé¢æ€§èƒ½ã€‚\n\n> ä»¥ä¸‹çš„ Chrome Devtools å‡éœ€è¦åœ¨éšèº«æ¨¡å¼ä¸‹æœç”¨ï¼Œæ¥ä¿è¯åŠŸèƒ½çš„å®Œå¤‡æ€§å’Œå‡†ç¡®æ€§ã€‚å°½å¯èƒ½ç¼©çŸ­è®°å½•æ—¶é—´å’Œä¸å¿…è¦çš„æ“ä½œï¼Œå…³é—­æµè§ˆå™¨ç¼“å­˜ã€‚\n\n## Timeline (ç‰ˆæœ¬ 54.0.2840.71)\n\n\n> Use the Chrome DevTools Timeline panel to record and analyze all the activity in your application as it runs. It's the best place to start investigating perceived performance issues in your application\n\n![](http://121.42.215.169/blog_images/timeline-10.png)\n\nTimeline ä»ªè¡¨ç›˜åŒ…æ‹¬å››ä¸ªçª—å£ï¼š\n\n![](http://121.42.215.169/blog_images/timeline-annotated.png)\n\n* Controlsï¼šå¼€å§‹è®°å½•ï¼Œåœæ­¢è®°å½•ï¼Œé…ç½®åœ¨è®°å½•ä¸­éœ€è¦æ•è·çš„ä¿¡æ¯ã€‚\n* Overviewï¼šæ€§èƒ½æ€»ç»“åˆ†æé¡µé¢ã€‚\n* Flame Chartï¼šä¸€ä¸ªå¯è§†åŒ–çš„ CPU å †æ ˆè·Ÿè¸ªã€‚\n* Detailsï¼š å½“äº‹ä»¶è¢«é€‰æ‹©æ—¶ï¼Œè¿™ä¸ªçª—å£å°†å±•ç¤ºè¿™ä¸ªäº‹ä»¶çš„è¯¦ç»†ä¿¡æ¯ï¼Œå½“æ²¡æœ‰äº‹ä»¶è¢«é€‰æ‹©æ—¶ï¼Œå±•ç¤ºæ‰€é€‰æ—¶é—´æ®µçš„ä¿¡æ¯ã€‚\n\nOverview çª—å£ \n\nOverview çª—å£åŒ…å«ä¸‰ä¸ªæ›²çº¿å›¾ï¼š\n\n![](http://121.42.215.169/blog_images/overview-annotated.jpg)\n\n* FPSï¼šFrames Per Second ï¼Œç»¿è‰²çš„çº¿æ¡è¶Šé«˜ï¼ŒFPS è¶Šé«˜ã€‚åœ¨ FPS æ›²çº¿ä¸Šé¢çš„çº¢è‰²å—è¡¨ç¤ºé•¿å¸§ï¼Œå³ FPS ä½äº 30ã€‚\n* CPUï¼šCPU èµ„æºï¼Œè¿™ä¸ªçª—å£æ˜¾ç¤ºå„ç§ç±»å‹äº‹ä»¶æ‰€æ¶ˆè€—çš„ CPU èµ„æºã€‚\n* NETï¼šæ¯ç§é¢œè‰²ä»£è¡¨ä¸€ç§èµ„æºã€‚\n\nå„ä¸ªçº¿æ¡çš„é¢œè‰²å¦‚ä¸‹ï¼š\n\n* HTML æ–‡ä»¶æ˜¯è“è‰²ã€‚\n* scripts æ˜¯é»„è‰²ã€‚\n* stylesheets æ˜¯ç´«è‰²ã€‚\n* Media æ–‡ä»¶æ˜¯ç»¿è‰²ã€‚\n* æ··æ‚èµ„æºæ˜¯ç°è‰²ã€‚\n\nFlame Chart çª—å£\n\n![](http://121.42.215.169/blog_images/timeline-show.png)\n\n* Interactions ï¼š åœ¨ recording è¿‡ç¨‹ä¸­å‘ç”Ÿçš„äº¤äº’æ“ä½œï¼Œæ¯”å¦‚ MouseDownã€‚\n* Mainï¼šè®°å½•ä¸»çº¿ç¨‹\n* Rasterï¼šçº¿ç¨‹å…‰æ …å›¾\n* GPUï¼šè®°å½• GPU\n\nDetails çª—å£ï¼š\n\nå½“æˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªäº‹ä»¶ï¼ŒDetails çª—å£å±•ç¤ºçš„æ˜¯è¿™ä¸ªäº‹ä»¶çš„é™„åŠ ä¿¡æ¯ã€‚é™¤è¿‡Summary æ ‡ç­¾ï¼Œå®ƒå±•ç¤ºçš„æ˜¯å„ä¸ªäº‹ä»¶ç±»å‹çš„è¯¦ç»†æƒ…å†µã€‚\n\næˆ‘ä»¬åˆ©ç”¨ä¸‹é¢çš„ç¨‹åºæ¥è¿›è¡Œä¸€æ¬¡ Timeline çš„æ“ä½œå®ä¾‹\n\næˆ‘ä»¬ä»¥ Chrome Developers ä¸­çš„ä¸€ä¸ªä¾‹å­æ¥æ“ä½œ Timeline é¢æ¿\n\n```javascript\nvar x = [];\n\nfunction createSomeNodes() {\n    var div,\n        i = 100,\n        frag = document.createDocumentFragment();\n    for (;i > 0; i--) {\n        div = document.createElement(\"div\");\n        div.appendChild(document.createTextNode(i + \"-\"+ new Date().toTimeString()));\n        frag.appendChild(div);\n    }\n    document.getElementById(\"nodes\").appendChild(frag);\n}\nfunction grow() {\n    x.push(new Array(1000000).join('x'));\n    createSomeNodes();\n    setTimeout(grow,1000);\n}\ngrow();\n```\n\n> When grow is invoked it will start creating div nodes and appending them to the DOM. It will also allocate a big array and append it to an array referenced by a global variable. This will cause a steady increase in memory that can be found using the tools mentioned above.\nGarbage collected languages usually show a pattern of oscillating memory use. This is expected if code is running in a loop performing allocations, which is the usual case. We will be looking for periodic increases in memory that do not fall back to previous levels after a collection.\n\n\nè¿è¡Œè¿™ä¸ªè„šæœ¬ç½‘é¡µåï¼Œæˆ‘ä»¬æ‰“å¼€ Timeline, record è®°å½• 10s è¿è¡Œæƒ…å†µååœæ­¢ã€‚åŒæ—¶è®°å¾—è®°å½•ç»“æŸåç»™ grow å‡½æ•°åŠ ä¸Šæ–­ç‚¹ï¼Œé˜²æ­¢é¡µé¢å´©æºƒã€‚\nåœ¨ overview ä¸­é€‰æ‹©ä¸€ä¸ªæ—¶é—´æ®µï¼Œè§‚å¯Ÿ flame chart ä¸­çš„å¤§è‡´æƒ…å†µï¼Œå‡ºç°çº¢è‰²é•¿å—ï¼Œè¯´æ˜è¿™é‡Œå‡ºç°äº†é•¿å¸§ã€‚ç‚¹å‡»çº¢è‰²é•¿å—ï¼Œå¯ä»¥åœ¨ Details çª—å£æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ã€‚flame chart çš„ main é‡Œé¢æœ‰æ›´åŠ è¯¦ç»†çš„äº‹ä»¶é¡ºåºå’Œæ¶ˆè€—æ—¶é—´ã€‚åŒæ ·ç‚¹å‡»ååœ¨ Details çª—å£å¯æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ã€‚\n\nä»ä¸‹é¢çš„çº¿æ€§å›¾ä¸­æˆ‘ä»¬å¯ä»¥æ¸…æ™°çš„çœ‹å‡ºå†…å­˜åœ¨ä¸æ–­çš„å¢åŠ ï¼Œè¿™ä¼šå¯¼è‡´é¡µé¢æœ€ç»ˆå´©æºƒã€‚\n\n![](http://121.42.215.169/blog_images/timeline-node.png)\n\nå¯ä»¥çœ‹å‡ºï¼ŒNodes å’Œ JS Heap éƒ½åœ¨ä¸æ–­ä¸Šå‡ï¼Œä¸­é—´ä¸‹é™çš„é‚£æ®µæ˜¯å› ä¸º js çš„åƒåœ¾å›æ”¶æœºåˆ¶èµ·çš„ä½œç”¨ï¼Œä½†å¾ˆæ˜æ˜¾ï¼Œå†…å­˜è¿˜æ˜¯åœ¨å‘¨æœŸæ€§çš„æ³„éœ²ï¼Œè¿™æ˜¯ä¸€ä¸ªå±é™©çš„æ ‡å¿—ã€‚é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•æ¥æ‰¾åˆ°å’Œè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ\n\n## Profiles (ç‰ˆæœ¬ 54.0.2840.71)\n\n> Use the Profiles panel if you need more information than the Timeline provide, for instance to track down memory leaks.\n\n![](http://121.42.215.169/blog_images/take-heap-snapshot.png)\n\nåœ¨ Profiles é¢æ¿ä¸Šæœ‰å››ä¸ªé…ç½®ç±»å‹ï¼š\n\n* Record JavaScript CPU Profileï¼šç›‘æ§å‡½æ•°æ‰§è¡ŒæœŸèŠ±è´¹çš„æ—¶é—´\n* Take Heap Snapshotï¼šä¿å­˜å†…å­˜å¿«ç…§\n* Record Allocation Timelineï¼šå¸®åŠ©ä½ åœ¨ JS å †é‡Œè¿½è¸ªå†…å­˜æ³„éœ²\n* Record Allocation Profileï¼šé€šè¿‡ JS å‡½æ•°å¸®åŠ©ä½ æŸ¥çœ‹å†…å­˜åˆ†é…\n\nåŒæ ·ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜é—®é¢˜ï¼š\n\n``` javascript\n<!DOCTYPE html>\n<html>\n<body>\n<script type=\"text/javascript\">\n                var ClassA = function(name){\n                        this.name = name;\n                        this.func = null;\n                };\n                var a = new ClassA(\"a\");\n                var b = new ClassA(\"b\");\n                b.func = bind(function(){\n                        console.log(\"I am \" + this.name);\n                }, a);\n                b.func();  //è¾“å‡º I am a\n\n                a = null;        //é‡Šæ”¾a\n                //b = null;        //é‡Šæ”¾b\n                //æ¨¡æ‹Ÿä¸Šä¸‹æ–‡ç»‘å®š\n                function bind(func, self){\n                                return function(){\n                                return func.apply(self);\n                        };\n                }; \n</script>\n</body>\n</html>\n```\n\nRecord JavaScript CPU Profile:\n\n![](http://121.42.215.169/blog_images/profile-cpu.png)\n\nè¿™ä¸ªé¢æ¿çš„åŠŸèƒ½æ¯”è¾ƒç®€å•ï¼Œä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ç‚¹å‡»æŒ‰é’®æ‰§è¡Œçš„å„ä¸ªå‡½æ•°æ‰§è¡Œçš„æ—¶é—´ï¼Œé¡ºåºï¼ŒåŒ…å«å…³ç³»å’ŒCUPå˜åŒ–ç­‰\n\nTake Heap Snapshot:\n\n![](http://121.42.215.169/blog_images/profile-snapshot.png)\n\nè¿™é‡Œè§£é‡Šå‡ ä¸ªåè¯ï¼š\n\n* Constructorï¼šè¡¨ç¤ºæ‰€æœ‰é€šè¿‡è¯¥æ„é€ å‡½æ•°ç”Ÿæˆçš„å¯¹è±¡\n* Distanceï¼šå¯¹è±¡åˆ°è¾¾ GC æ ¹çš„æœ€çŸ­è·ç¦»\n* Objects Countï¼šå¯¹è±¡çš„å®ä¾‹æ•°\n* Shallow sizeï¼šå¯¹åº”æ„é€ å‡½æ•°ç”Ÿæˆçš„å¯¹è±¡çš„ shallow sizesï¼ˆç›´æ¥å ç”¨å†…å­˜ï¼‰æ€»æ•°\n* Retained sizeï¼šå±•ç¤ºäº†å¯¹åº”å¯¹è±¡æ‰€å ç”¨çš„æœ€å¤§å†…å­˜\n\nå…³äºGCæ ¹çš„è§£é‡Šæœ‰ç‚¹éº»çƒ¦ï¼šå®ƒæŒ‡çš„æ˜¯ä¸€ä¸ªå¯¹è±¡æŒ‡é’ˆæœ€å¼€å§‹æŒ‡å‘çš„å†…å­˜ã€‚å¯ä»¥ç”¨ä¸€å¼ å›¾æ¥ç†è§£ï¼š\n\n![](http://121.42.215.169/blog_images/progile-gc.jpg)\n\næ„æˆè¿™å¼ å…³ç³»ç½‘çš„å…ƒç´ æœ‰ä¸¤ç§ï¼š\nNodesï¼šèŠ‚ç‚¹ï¼Œå¯¹åº”ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨åˆ›å»ºè¯¥å¯¹è±¡çš„æ„é€ æ–¹æ³•æ¥å‘½å\nEdgesï¼šè¿æ¥çº¿ï¼Œå¯¹åº”ç€å¯¹è±¡é—´çš„å¼•ç”¨å…³ç³»ï¼Œç”¨å¯¹è±¡å±æ€§åæ¥å‘½å\næ ¹æ®ä¸Šé¢çš„å®šä¹‰è§£é‡Šï¼Œå›¾ä¸­çš„å¯¹è±¡ 6 åˆ°CGæ ¹çš„è·ç¦»å°±æ˜¯ 3 ã€‚\n\n![](http://121.42.215.169/blog_images/profile-comparison.png)\n\nå¯ä»¥çœ‹åˆ°æœ‰ä¸¤ä¸ªClassAå¯¹è±¡ï¼Œè¿™ä¸æˆ‘ä»¬çš„æœ¬æ„ä¸ç›¸ç¬¦ï¼Œæˆ‘ä»¬é‡Šæ”¾äº†aï¼Œåº”è¯¥åªå­˜åœ¨ä¸€ä¸ªClassAå¯¹è±¡bæ‰å¯¹ã€‚\n\nå½“ b.func = null æ—¶\n\n![](http://121.42.215.169/blog_images/profile-snapshot-extra.png)\n\nä»ä¸Šé¢ä¸¤ä¸ªå›¾å¯ä»¥çœ‹å‡ºè¿™ä¸¤ä¸ªå¯¹è±¡ä¸­ï¼Œä¸€ä¸ªæ˜¯ bï¼Œå¦ä¸€ä¸ªå¹¶ä¸æ˜¯ aï¼Œå› ä¸º a è¿™ä¸ªå¼•ç”¨å·²ç»ç½®ç©ºäº†ã€‚ç¬¬äºŒä¸ª ClassA å¯¹è±¡æ˜¯bindé‡Œçš„é—­åŒ…çš„ä¸Šä¸‹æ–‡ selfï¼Œself ä¸ a å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ã€‚è™½ç„¶ a é‡Šæ”¾äº†ï¼Œä½†ç”±äº b æ²¡æœ‰é‡Šæ”¾ï¼Œæˆ–è€… b.func æ²¡æœ‰é‡Šæ”¾ï¼Œä½¿å¾—é—­åŒ…é‡Œçš„ self ä¹Ÿä¸€ç›´å­˜åœ¨ã€‚è¦é‡Šæ”¾ selfï¼Œå¯ä»¥æ‰§è¡Œ b=null æˆ–è€… b.func=null\n\n![](http://121.42.215.169/blog_images/profile-snapshot-2.png)\n\nè¿™é‡Œéœ€è¦å¯¹ shallow size å’Œ retained size åšä¸€ä¸‹è§£é‡Šï¼š\n\n>ç›´æ¥å ç”¨å†…å­˜æŒ‡çš„æ˜¯å¯¹è±¡æœ¬èº«å ç”¨çš„å†…å­˜ï¼Œå› ä¸ºå¯¹è±¡åœ¨å†…å­˜ä¸­ä¼šé€šè¿‡ä¸¤ç§æ–¹å¼å­˜åœ¨ç€ï¼Œä¸€ç§æ˜¯è¢«ä¸€ä¸ªåˆ«çš„å¯¹è±¡ä¿ç•™ï¼ˆæˆ‘ä»¬å¯ä»¥è¯´è¿™ä¸ªå¯¹è±¡ä¾èµ–åˆ«çš„å¯¹è±¡ï¼‰æˆ–è€…è¢«Domå¯¹è±¡è¿™æ ·çš„åŸç”Ÿå¯¹è±¡éšå«ä¿ç•™ã€‚åœ¨è¿™é‡Œç›´æ¥å æœ‰å†…å­˜æŒ‡çš„å°±æ˜¯å‰ä¸€ç§ã€‚(é€šå¸¸æ¥è®²ï¼Œæ•°ç»„å’Œå­—ç¬¦ä¸²ä¼šä¿ç•™æ›´å¤šçš„ç›´æ¥å æœ‰å†…å­˜)ã€‚è€Œæœ€å¤§å†…å­˜(Retained size)å°±æ˜¯è¯¥å¯¹è±¡ä¾èµ–çš„å…¶ä»–å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜\n\næˆ‘ä»¬ä¼šå‘ç°åœ¨å¿«ç…§çš„ JS æ–¹æ³•ä¸­æœ‰çº¢é»„ä¸¤ç§é¢œè‰²ï¼Œé»„è‰²å³ç›´æ¥å ç”¨å†…å­˜ï¼Œçº¢è‰²å³é—´æ¥å ç”¨å†…å­˜ï¼Œæˆ‘ä»¬éœ€è¦å…³æ³¨è¿™ä¸¤ç§æƒ…å†µçš„å†…å­˜å›æ”¶æƒ…å†µã€‚\n\nä¸€ä¸ªå¿«ç…§æœ‰å››ä¸ªè¯•å›¾ç±»å‹ï¼š\n\n* Summary(æ¦‚è¦) â€“ é€šè¿‡æ„é€ å‡½æ•°ååˆ†ç±»æ˜¾ç¤ºå¯¹è±¡ï¼›\n* Comparison(å¯¹ç…§) â€“ æ˜¾ç¤ºä¸¤ä¸ªå¿«ç…§é—´å¯¹è±¡çš„å·®å¼‚ï¼›\n* Containment(æ§åˆ¶) â€“ æ¢æµ‹å †å†…å®¹ï¼›\n* Statistic(å›¾å½¢è¡¨)-ç”¨å›¾è¡¨çš„æ–¹å¼æµè§ˆå†…å­˜ä½¿ç”¨æ¦‚è¦\n\né€šè¿‡ Comparison ï¼Œæˆ‘ä»¬å¯ä»¥è§‚å¯Ÿä¸¤ä¸ªè¯•å›¾ä¹‹é—´å¢åŠ å’Œåˆ é™¤çš„å¯¹è±¡ã€‚\n\né¡ºå¸¦æä¸€å¥ï¼ŒRetainers è§†å›¾æ˜¾ç¤ºå‡ºäº†è¯¥å¯¹è±¡è¢«å“ªäº›å¯¹è±¡å¼•ç”¨äº†\n\nRecord Allocation Timeline:\n\nå…³äºè¿™ä¸ªé¢æ¿ï¼Œæˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹ä»£ç æ¥è¿›è¡Œæ¼”ç¤ºï¼š\n\n```javascript\nvar x = [];\n\nfunction grow() {\n  x.push(new Array(1000000).join('x'));\n}\n\ndocument.getElementById('grow').addEventListener('click', grow);\n```\n\n![](http://121.42.215.169/blog_images/new-allocations.png)\n\næ¯ä¸€ä¸ªè“æ¡çš„å‡ºç°éƒ½é¢„ç¤ºç€å†…å­˜æ³„éœ²çš„å¯èƒ½ï¼Œé€‰æ‹©å…¶ä¸­ä¸€ä¸ªè“æ¡è¿›è¡Œåˆ†æ\n\n![](http://121.42.215.169/blog_images/zoomed-allocation-timeline.png)\n\n\n\nRecord Allocation Profile:\n\n![](http://121.42.215.169/blog_images/allocation-profile.png)\n\n![](http://121.42.215.169/blog_images/object-details.png)\n\n> æ€§èƒ½åˆ†æå¾ˆé‡è¦ï¼Œå‰ç«¯çš„å‰è¾ˆä»¬åœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´é‡Œå¤„äºé»‘æš—çš„å¹´ä»£ä¸­ã€‚ç°åœ¨å·²ç»åˆç°å…‰æ˜ï¼Œæ‰€ä»¥æˆ‘ä»¬æ˜¯å¾ˆå¹¸è¿çš„ã€‚\n",
      "data": {
        "title": "åˆ©ç”¨ Chrome DevTools è¿›è¡Œç½‘é¡µæ€§èƒ½åˆ†æ",
        "date": "Invalid date",
        "tags": [
          "blog"
        ],
        "published": true,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "2016-11-18-timeline-profile"
    },
    {
      "content": "\nè¿™ä¸¤å¤©åœ¨å†™ä¸€äº›ç½‘é¡µçš„æ—¶å€™,å‘ç°è‡ªå·±å¾—åˆ°äº†ä¸€äº›çç¢çš„çŸ¥è¯†ç‚¹,è¿™ç§ä¸œè¥¿,è¿˜æ˜¯èµ¶å¿«å†™ä¸‹æ¥æ¯”è¾ƒå¥½\n\n## box-sizing\n\nè¿™ä¸ªå±æ€§å¯¹æˆ‘ä»¬å¹³æ—¶å¼€å‘çš„å¸®åŠ©ä¹‹å¤§,ä¸è¨€è€Œå–»,åœ¨è¿™é‡Œæ¶‰åŠä¸€ä¸ªç›’å­çš„çœŸæ­£å¤§å°é—®é¢˜\n\n    border + padding + width = ç›’å­çš„å®½åº¦\n    border + padding + height = ç›’å­çš„é«˜åº¦\n\næ‰€ä»¥,æˆ‘ä»¬åœ¨å†™ä¸€äº›ç›’å­æ—¶,å®é™…çš„å¤§å°å¾€å¾€åå¤§,è¿™è®©æˆ‘ä»¬è¿˜åŸè®¾è®¡æ—¶çš„å·¥ä½œé‡å˜çš„å¤šäº†èµ·æ¥. box-sizing å¸®åŠ©æˆ‘ä»¬è§£å†³äº†è¿™ä¸ªé—®é¢˜,åœ¨è¿™ä¸ªå±æ€§ä¸‹,å¦‚æœæˆ‘ä»¬è®¾ç½®äº† padding å’Œ border,ç›’å­çš„ content å°†è‡ªåŠ¨å‡å°,æ¥ä¿è¯ç›’å­çš„æ€»å¤§å°æ˜¯æˆ‘ä»¬è®¾ç½®çš„ width å’Œ height å€¼.\n\næˆ‘ä»¬å¸¸ç”¨çš„å±æ€§å€¼æ˜¯ border-box ,åŒæ ·çš„,å¯ä»¥è®¾ç½®ä¸º content-box , è¿™æ˜¯æµè§ˆå™¨çš„é»˜è®¤å€¼,ä¹Ÿå°±æ˜¯ content çš„å®½é«˜åº¦. inherit å€¼ç”¨æ¥ç»§æ‰¿çˆ¶çº§å…ƒç´ çš„å±æ€§å€¼.\n\n> è¯¥å±æ€§å…¼å®¹ IE8+ ,FF éœ€è¦åŠ  -moz- å‰ç¼€, ä½ç‰ˆæœ¬çš„ ios å’Œ android éœ€è¦åŠ  -webkit- (æ‰‹æœºæµè§ˆå™¨æ˜¯ webkit å†…æ ¸å½“é“).\n\n## è§£å†³ç¼©æ”¾å›¾ç‰‡çš„é—®é¢˜\n\nå¾ˆå¤šæ—¶å€™,æˆ‘ä»¬éƒ½ä¼šé‡åˆ°å›¾ç‰‡çš„ç¼©æ”¾é—®é¢˜.\n\n1.åœ¨è¦ä¿è¯ä¸å˜å½¢çš„æƒ…å†µä¸‹,æˆ‘ä»¬åªèƒ½å°†å›¾ç‰‡æŒ‰ç…§åŸå®½é«˜æ¯”è¿›è¡Œç¼©æ”¾,åœ¨æœ‰çš„æ—¶å€™è€ƒè™‘åˆ°è‡ªé€‚åº”çš„æƒ…å†µ,æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ width å’Œ padding çš„ç™¾åˆ†æ¯”æ¥è¿›è¡Œç¼©æ”¾.\n2.åˆ©ç”¨ background-size å±æ€§, cover ä¸ºç­‰æ¯”æ‰©å®¹å¡«æ»¡å…ƒç´  , contain ç­‰æ¯”ç¼©å°é€‚åº”å…ƒç´ å°ºå¯¸, auto æ˜¯å›¾ç‰‡è‡ªèº«çš„å¤§å°.\n\n## ä¸‰æ å¼å¸ƒå±€\n\næˆ‘ä»¬åœ¨è¿™é‡Œé»˜è®¤ä¸¤è¾¹å®½åº¦ä¸å˜\n\n1.ç»å¯¹å®šä½æ³•\n\nå·¦å³ä¸¤æ é‡‡ç”¨ç»å¯¹å®šä½,åˆ†åˆ«å›ºå®šäºé¡µé¢çš„å·¦å³ä¸¤ä¾§,ä¸­é—´çš„ä¸»ä½“æ ç”¨å·¦å³ margin å€¼æ’‘å¼€è·ç¦».\n\n2.è´Ÿ margin (åŒé£ç¿¼)\n\né¦–å…ˆ,ä¸­é—´çš„ä¸»ä½“è¦ä½¿ç”¨åŒå±‚æ ‡ç­¾.å¤–å±‚ div å®½åº¦ 100% æ˜¾ç¤º,å¹¶ä¸”æµ®åŠ¨,\nå†…å±‚ div ä¸ºçœŸæ­£çš„ä¸»ä½“å†…å®¹,å«æœ‰å·¦å³çš„ margin å€¼,å·¦æ ä¸å³æ éƒ½æ˜¯é‡‡ç”¨ margin è´Ÿå€¼å®šä½çš„, å·¦æ å·¦æµ®åŠ¨, margin-left ä¸º -100%,ç”±äºå‰é¢çš„ div å®½åº¦100% , æ‰€ä»¥è¿™é‡Œçš„ -100% margin å€¼æ­£å¥½ä½¿å·¦æ  div å®šä½åˆ°äº†é¡µé¢çš„å·¦ä¾§,å³ä¾§æ ä¹Ÿæ˜¯åšæµ®åŠ¨,å…¶ margin-left ä¹Ÿæ˜¯è´Ÿå€¼,å¤§å°ä¸ºå…¶æœ¬èº«çš„å®½åº¦.\n\n3.è‡ªèº«æµ®åŠ¨æ³•\n\nå·¦æ å·¦æµ®åŠ¨,å³æ å³æµ®åŠ¨,ä¸»ä½“ç›´æ¥æ”¾åé¢,åŠ ä¸Šmargin å€¼ ,å°±å®ç°äº†è‡ªé€‚åº”.\n\n## css æµ®åŠ¨\n\nä¹‹æ‰€ä»¥å†™è¿™ä¸ªå®Œå…¨æ˜¯å› ä¸ºçœ‹åˆ°äº†ä¸€ç¯‡å¥½æ–‡,è§‰å¾—å¾ˆæœ‰å¿…è¦è®°å½•\n\n> å‡å¦‚æŸä¸ª div å…ƒç´ A æ˜¯æµ®åŠ¨çš„,å¦‚æœ A å…ƒç´ ä¸Šä¸€ä¸ªå…ƒç´ ä¹Ÿæ˜¯æµ®åŠ¨çš„,é‚£ä¹ˆ A å…ƒç´ ä¼šè·Ÿéšåœ¨ä¸Šä¸€ä¸ªå…ƒç´ çš„åè¾¹(å¦‚æœä¸€è¡Œæ–¹ä¸ä¸‹è¿™ä¸¤ä¸ªå…ƒç´ ,é‚£ä¹ˆA å…ƒç´ ä¼šè¢«æŒ¤åˆ°ä¸‹ä¸€è¡Œ);å¦‚æœ A å…ƒç´ ä¸Šä¸€ä¸ªå…ƒç´ æ˜¯æ ‡å‡†æµä¸­çš„å…ƒç´ ,é‚£ä¹ˆA çš„ç›¸å¯¹å‚ç›´ä½ç½®ä¸ä¼šæ”¹å˜,ä¹Ÿå°±æ˜¯è¯´A çš„é¡¶éƒ¨æ€»æ˜¯å’Œä¸Šä¸€ä¸ªå…ƒç´ çš„åº•éƒ¨å¯¹é½. div çš„é¡ºåºæ˜¯ HTML ä»£ç ä¸­ div çš„é¡ºåºå†³å®šçš„.é è¿‘é¡µé¢è¾¹ç¼˜çš„ä¸€ç«¯æ˜¯å‰,è¿œç¦»é¡µé¢è¾¹ç¼˜çš„ä¸€ç«¯æ˜¯å.\n\n## åˆ©ç”¨ css ç»˜åˆ¶å„ç§å›¾å½¢\n\n1.åœ†\n\n```css\n#circle{\n  width:100px;\n  height:100px;\n  background: red;\n  -moz-border-radius:50px;\n  -webkit-border-radius:50px;\n  border-radius: 50px;\n}\n```\n\n2.æ¤­åœ†\n\n```css\n#oval{\n  width: 200px;\n  height: 100px;\n  background: red;\n  -moz-border-radius:100px/50px;\n  -webkit-border-radius:100px/50px;\n  border-radius: 100px/50px\n}\n```\n\n3.ä¸‰è§’å½¢\n\n```css\n#triangle-up{\n  width: 0;\n  height: 0;\n  border-left: 50px solid transparent;\n  border-right: 50px solid transparent;\n  border-bottom: 100px solid red;\n}\n```\n\n4.å¹³è¡Œå››è¾¹å½¢\n\n```css\n#parallelogram{\n  width:150px;\n  height: 100px;\n  -webkit-transform:skew(20deg);\n  -moz-transform:skew(20deg);\n  -o-transform:skew(20deg);\n  background: red;\n}\n```\n\n5.åŠåœ†å’Œå››åˆ†ä¹‹ä¸€åœ†\n\n```css\n#quartercircle{\n  width: 200px;\n  height: 200px;\n  background: red;\n  -webkit-border-radius:200px 0 0 0;\n}\n```\n\n```css\n#quartercircle {\nwidth: 200px;\nheight: 200px;\nbackground-color: red;\n-webkit-border-radius: 0 0 200px 200px;\n}\n```\n\n## centering in css\n\n1.æ°´å¹³å±…ä¸­\n\n(1) inline or inline-* elements\n\n```\ntext-align:center\n```\n\n(2) block level element\n\n```\nmargin:0 auto\n```\n\n(3) more than one block level element\n\nin a row\n\n```css\n.inline-block-center{\n  text-align:center\n}\n\n.inline-block-center div{\n  display:inline-block;\n  text-align:left\n}\n\n.flex-center{\n  display: flex;\n  justify-content: center\n}\n```\n\nstacked on top of each other\n\n```\nmargin:0 auto\n```\n\n2.å‚ç›´å±…ä¸­\n\n(1) inline or inline-* elements\n\nsingle inline\n\n```css\n.link{\n  padding-top: 30px;\n  padding-bottom: 30px\n}\n\n.link{/*height å›ºå®š*/\n  height:30px;\n  line-height:30px\n}\n```\n\nmultiple lines\n\n```css\n.center-table {\n  display: table;\n  height: 250px;\n  background: white;\n  width: 240px;\n  margin: 20px;\n}\n.center-table p {\n  display: table-cell;\n  margin: 0;\n  background: black;\n  color: white;\n  padding: 20px;\n  border: 10px solid white;\n  vertical-align: middle;\n}\n\n.flex-center-vertically {\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  height: 400px;\n}\n\n.ghost-center {\n  position: relative;\n}\n.ghost-center::before {\n  content: \" \";\n  display: inline-block;\n  height: 100%;\n  width: 1%;\n  vertical-align: middle;\n}\n.ghost-center p {\n  display: inline-block;\n  vertical-align: middle;\n}\n```\n\n(2) block elements\n\nknow width and height\n\n```css\n.parent {\n  position: relative;\n}\n.child {\n  position: absolute;\n  top: 50%;\n  height: 100px;\n  margin-top: -50px; /* account for padding and border if not using box-sizing: border-box; */\n}\n```\n\ndo not know\n\n```css\n.parent {\n  position: relative;\n}\n.child {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n}\n```\n\nflex\n\n```css\n.parent {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n```\n\n3.æ°´å¹³å‚ç›´å±…ä¸­\n\nknow width and height\n\n```css\n.parent {\n  position: relative;\n}\n\n.child {\n  width: 300px;\n  height: 100px;\n  padding: 20px;\n\n  position: absolute;\n  top: 50%;\n  left: 50%;\n\n  margin: -70px 0 0 -170px;\n}\n```\n\n```css\n.parent {\n  position: relative;\n}\n.child {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n```\n\n```css\n.parent {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n```\n\nå‚è€ƒèµ„æ–™:\n[è®©CSSå¸ƒå±€æ›´åŠ ç›´è§‚ï¼šbox-sizing](http://web.jobbole.com/82331/)\n\n[æ·±å…¥ç†è§£CSSä¸­çš„è¡Œé«˜](http://www.cnblogs.com/rainman/archive/2011/08/05/2128068.html)\n\n[æˆ‘ç†ŸçŸ¥çš„ä¸‰ç§ä¸‰æ ç½‘é¡µå®½åº¦è‡ªé€‚åº”å¸ƒå±€æ–¹æ³•](http://www.zhangxinxu.com/wordpress/2009/11/%E6%88%91%E7%86%9F%E7%9F%A5%E7%9A%84%E4%B8%89%E7%A7%8D%E4%B8%89%E6%A0%8F%E7%BD%91%E9%A1%B5%E5%AE%BD%E5%BA%A6%E8%87%AA%E9%80%82%E5%BA%94%E5%B8%83%E5%B1%80%E6%96%B9%E6%B3%95/)\n\n[ç»éªŒåˆ†äº«ï¼šCSSæµ®åŠ¨(float,clear)é€šä¿—è®²è§£](http://www.cnblogs.com/iyangyuan/archive/2013/03/27/2983813.html)\n\n[The Shapes of CSS](https://css-tricks.com/examples/ShapesOfCSS/)\n\n[CSS3:border-radiuséšè—çš„å¨åŠ›](http://www.xincss.com/?p=221)\n\n[Centering in CSS: A Complete Guide](https://css-tricks.com/centering-css-complete-guide/)\n",
      "data": {
        "title": "ç¢ç‰‡åŒ–çŸ¥è¯†æ€»ç»“",
        "date": "Invalid date",
        "tags": [
          "blog"
        ],
        "published": true,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "2017-3-4-learn-conclution"
    },
    {
      "content": "\n\nåœ¨è‡ªå·±è´Ÿè´£çš„ä¸€æ¬¡ç‰ˆæœ¬éœ€æ±‚ä¸­ï¼Œæ¶‰åŠåˆ°äº†å¯¹ URL ç¼–ç çš„ä¸€äº›æ“ä½œï¼Œå‘ç°è‡ªå·±ç†è§£ä¸æ˜¯å¾ˆæ¸…æ™°ï¼Œäºæ˜¯å­¦ä¹ æ€»ç»“äº†ä¸€ç•ª\n\n## ä¸ºä»€ä¹ˆè¦å¯¹ URL è¿›è¡Œç¼–ç \n\nç½‘ç»œæ ‡å‡† RFC ä¸­æ˜ç¡®è§„å®šï¼Œurl åªå…è®¸è‹±æ–‡å­—æ¯ã€é˜¿æ‹‰ä¼¯å­—æ¯å’Œä¸€äº›æ ‡ç‚¹ç¬¦å·ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªèŒƒå›´ä¹‹å¤–çš„å­—ç¬¦ï¼Œéœ€è¦å¼ºè¡Œå¯¹å…¶è¿›è¡Œç¼–ç ã€‚\n\n## é‡‡å–ä»€ä¹ˆç¼–ç è§„å®š\n\næ²¡æœ‰æ˜ç¡®çš„è§„å®šï¼Œurl çš„ç¼–ç å¯èƒ½ä¼šæ ¹æ®ç½‘é¡µå­—ç¬¦é›†ã€æµè§ˆå™¨å’Œæ“ä½œç³»ç»Ÿæœ‰ä¸åŒçš„ç¼–ç æ–¹å¼ã€‚\n\n## è§£å†³æ–¹æ¡ˆ\n\nå¦‚æœ url é‡‡å–ä¸åŒçš„ç¼–ç æ–¹å¼ï¼Œé‚£ä¹ˆåŠ¿å¿…ä¼šé€ æˆè§£ç å›°éš¾ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹ç¼–ç æ–¹å¼è¿›è¡Œç»Ÿä¸€ï¼Œåœ¨è¿™é‡Œï¼ŒJS æä¾›äº† API å‡½æ•°ã€‚\n\nåœ¨äº†è§£è¿™å‡ ä¸ªå‡½æ•°ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦æ˜ç¡®å‡ ä¸ªæ¦‚å¿µã€‚\n\n* URL URI URN\n\n    * URIï¼ˆUniform Resource Identifierï¼Œç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦)æ˜¯ä¸€ä¸ªç”¨äºæ ‡è¯†æŸä¸€äº’è”ç½‘èµ„æºåç§°çš„å­—ç¬¦ä¸²ã€‚ è¯¥ç§æ ‡è¯†å…è®¸ç”¨æˆ·å¯¹ç½‘ç»œä¸­ï¼ˆä¸€èˆ¬æŒ‡ä¸‡ç»´ç½‘ï¼‰çš„èµ„æºé€šè¿‡ç‰¹å®šçš„åè®®è¿›è¡Œäº¤äº’æ“ä½œã€‚\n\n    * URL(Uniform Resource Locatorï¼Œç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼‰ï¼Œæœ€å¸¸è§çš„å½¢å¼æ˜¯ URI,ç»å¸¸æŒ‡å®šä¸ºéæ­£å¼çš„ç½‘å€ã€‚\n\n    * URNï¼ˆUniform Resource Nameï¼Œç»Ÿä¸€èµ„æºåç§°ï¼‰ï¼Œå…¶ç›®çš„æ˜¯é€šè¿‡æä¾›ä¸€ç§é€”å¾„ï¼Œç”¨äºåœ¨ç‰¹å®šçš„å‘½åç©ºé—´èµ„æºçš„æ ‡è¯†ï¼Œä»¥è¡¥å……ç½‘å€ã€‚\n\n    > URN å¦‚åŒä¸€ä¸ªäººçš„åç§°ï¼Œè€Œ URL ä»£è¡¨ä¸€ä¸ªäººçš„ä½å€ã€‚æ¢è¨€ä¹‹ï¼ŒURN å®šä¹‰æŸäº‹ç‰©çš„èº«ä»½ï¼Œè€Œ URL æä¾›æŸ¥æ‰¾è¯¥äº‹ç‰©çš„æ–¹æ³•,ä¸¤è€…äº’è¡¥ä¸”æœ‰äº¤é›†ã€‚URN å’Œ URL æ˜¯ URI çš„å­é›†ã€‚\n\n* URL ä¿ç•™å­—ç¬¦\n\n    > ! * ' ( ) ; : @ & = + $ , / ? # [ ]\n\n## JS API\n\n* encodeURI å’Œ decodeURI \n\nè¿™ä¸¤ä¸ª API å‡½æ•°å¯¹æ•´ä¸ª url è¿›è¡Œæ“ä½œï¼Œå®ƒä»¬å‡å®š URI ä¸­ä¿ç•™å­—ç¬¦éƒ½æœ‰å…¶ç‰¹æ®Šå«ä¹‰ï¼Œæ‰€ä»¥ä¸ä¼šç¼–è§£ç å®ƒä»¬ã€‚\n\n* encodeURIComponent å’Œ decodeURIComponent \n\nè¿™ä¸¤ä¸ª API å‡½æ•°æ˜¯å¯¹ url çš„éƒ¨åˆ†è¿›è¡Œæ“ä½œï¼Œå®ƒä»¬ä¼šå°†ä¿ç•™å­—ç¬¦è®¤ä¸ºæ˜¯æ™®é€šæ–‡æœ¬ï¼Œè€Œè¿›è¡Œç¼–è§£ç ã€‚\n\n## é—®é¢˜æ¥äº†\n\n* url è¿›è¡Œäº†ç¼–ç åï¼Œéš¾é“åç«¯æ¯æ¬¡è¿˜å¾—è§£ç ï¼Ÿ\n\nåç«¯çš„ web æ¡†æ¶ä¼šå¸®åŠ©ç¨‹åºå‘˜å¤„ç†ä¸€æ¬¡è§£ç ã€‚\n\n* é‚£ä¹ˆå¦‚æœæˆ‘ä¸æ˜¯é€šè¿‡ js ï¼Œè€Œæ˜¯ç›´æ¥åœ¨æµè§ˆæ¡†ä¸­è¾“å…¥äº† urlï¼Œé‚£ä¹ˆç¼–ç ä¸æ˜¯ä¸èƒ½æ§åˆ¶äº†å—ï¼Ÿ\n\nç­”æ¡ˆæ˜¯çš„ç¡®ä¸èƒ½æ§åˆ¶ï¼Œä½†ç”±äºç°ä»£æµè§ˆå™¨æˆ–æ“ä½œç³»ç»Ÿï¼Œå¤§å¤šæ•°çš„ç¼–ç å­—ç¬¦é›†ï¼Œåœ¨åç«¯çš„ web æ¡†æ¶ä¸­éƒ½èƒ½è¯†åˆ«ï¼Œæ‰€ä»¥ä¸ä¼šå­˜åœ¨é—®é¢˜ï¼Œå¦‚æœçœŸé‡åˆ°ä¸èƒ½è¯†åˆ«çš„æƒ…å†µï¼Œé‚£å°±çœŸçš„ä¹±ç äº†ã€‚\n\n> åœ¨è¶³å¤Ÿå¼ºå¤§ä¹‹å‰ï¼Œè¯·ä¸è¦å¯¹åˆ«äººæµéœ²è‡ªå·±çš„å‹å–„ã€‚\n\nå‚è€ƒèµ„æ–™:\n\n[å…³äº URL ç¼–ç ](http://www.ruanyifeng.com/blog/2010/02/url_encoding.html)\n\n[URIã€URLã€URN çš„è”ç³»å’ŒåŒºåˆ«](https://waylau.com/difference-of-uri-url-urn/)\n",
      "data": {
        "title": "å¯¹äº URL ç¼–ç çš„ä¸€ç‚¹ç†è§£",
        "date": "Invalid date",
        "tags": [
          "blog"
        ],
        "published": true,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "2018-10-25-url"
    },
    {
      "content": "\n\nèŠ±äº†ä¸¤å¤©æ—¶é—´æ­äº†åšå®¢ï¼Œåˆ©ç”¨ Githu pages + jekyll + markdown å®ç°çš„ï¼Œé¡µåº•çš„è¯„è®ºç”¨çš„æ˜¯å›½å¤–çš„ Disqus ï¼Œ\nå°±æ˜¯åœ¨å†…åµŒ Disqus æ—¶ï¼Œå‘ç°è‡ªå·±é‡åˆ°äº†ä¸€ä¸ªç»å…¸çš„ footer å¸ƒå±€é—®é¢˜ï¼Œæäº†ä¸€ä¸‹åˆï¼Œç»ˆäºæ˜ç™½äº†ä¸€äº›ã€‚\n\nå®ç° footer æœ‰ä¸¤ç±»æ–¹æ³•ï¼ŒCSS å’Œ JavaScript\n\n* CSS\n\n     * position\n    \n        * fixed å›ºå®šåœ¨å¯è§†çª—å£æœ€åº•éƒ¨\n        \n                 position: fixed;\n                 bottom: 50px;\n            \n        * absolute æ˜¾ç¤ºåœ¨å¯è§†çª—å£çš„æœ€åº•éƒ¨\n        \n                position: absolute;\n                bottom: 50px;\n               \n        * relative æ˜¾ç¤ºåœ¨é¡µé¢çš„æœ€åº•éƒ¨\n                        \n                position: relative;\n                bottom: 50px;\n            \n        ä½¿ç”¨ position æœ‰å¾ˆå¤§çš„ç¼ºç‚¹ï¼Œposition ä¸èƒ½å®Œç¾æ»¡è¶³ footer çš„å¸ƒå±€è¦æ±‚ã€‚\n    \n    * æ¨æ‹‰æ¨åŸç†\n        \n            1. è®¾ç½® div.wrapper é«˜åº¦ä¸ºæ•´ä¸ªç½‘é¡µ\n            2. å°†æ¨åˆ°ä¸‹ä¸€é¡µçš„ footer ä½¿ç”¨ margin-bottom æ‹‰å›\n            3. ä¸ºé¿å…è®¾ç½®äº†è´Ÿè¾¹è·çš„é¡µé¢å†…å®¹ä¸ footer é‡å ï¼Œæ‰€ä»¥ä½¿ç”¨ div.push æˆ–è€….main çš„ padding-bottom æˆ–è€… wrapper:after å†æ¬¡æ¨å¼€ footer\n         \n        * div.push å†™æ³•\n        \n                <body>\n                    <div class=\"wrapper\">\n                        <div class=\"main\">\n                        </div>\n                        <div class=\"push\"></div>\n                    </div>\n                    <footer class=\"footer\">...<footer>\n                </body>\n                    \n                            html ç»“æ„\n                            \n                html,body{\n                    height: 100%;\n                    padding: 0;\n                    margin: 0;\n                }\n                .wrapper{\n                    min-height:100%;\n                    margin:0 auto -400px;       \n                }\n                \n                .push {\n                    height:326px;\n                }\n                \n                            div.push å†™æ³•\n                            \n        * .main çš„ padding-bottom å†™æ³•\n        \n                <body>\n                        <div class=\"wrapper\">\n                            <div class=\"main\">\n                            </div>\n                        </div>\n                        <footer class=\"footer\">...<footer>\n                </body>\n                        \n                                html ç»“æ„\n                                \n                    html,body{\n                        height: 100%;\n                        padding: 0;\n                        margin: 0;\n                    }\n                    .wrapper{\n                        min-height:100%;\n                        margin:0 auto -326px;       \n                    }\n                    .main {\n                        padding-bottom: 400px;\n                    }\n                    \n                                padding-bottom  å†™æ³•\n                                \n        * .wrapper : after\n        \n                <body>\n                            <div class=\"wrapper\">\n                                <div class=\"main\">\n                                </div>\n                            </div>\n                            <footer class=\"footer\">...<footer>\n                </body>\n                            \n                                    html ç»“æ„\n                                    \n                        html,body{\n                            height: 100%;\n                            padding: 0;\n                            margin: 0;\n                        }\n                        .wrapper{\n                            min-height:100%;\n                            margin:0 auto -326px;       \n                        }\n                        .wrapper:after{\n                            content:\"\";\n                            display:block;\n                            height: 400px;\n                        }\n                        \n                                    :after  å†™æ³•\n\n        * flex å†™æ³•\n        \n                <body>\n                            <div class=\"wrapper\">\n                                <div class=\"main\">\n                                </div>\n                            </div>\n                            <footer class=\"footer\">...<footer>\n                </body>\n                            \n                                    html ç»“æ„\n                                    \n                        html,body{\n                            display:flex;\n                            min-height:100vh;\n                            flex-direction: column;\n                        }\n                        .main {\n                            flex:1;\n                        }\n                        \n                                    padding-bottom  å†™æ³•\n\n* Javascript\n\n    * è®¡ç®—é«˜åº¦ï¼Œè®¾ç½® footer çš„ä½ç½®ã€‚\n\nå¼•ç”¨è‡ªç®€ä¹¦ [scarqin](http://www.jianshu.com/users/9f4b86bd9c0e/latest_articles) çš„åšå®¢ä¸ [demo](http://htmlpreview.github.io/?https://github.com/scarqin/ripple-new/blob/master/footer/method.html) \nå‚è€ƒèµ„æ–™ï¼š [footer çš„å„ç§å†™æ³•](http://www.jianshu.com/p/c91eee6849cb)",
      "data": {
        "title": "footer å¸ƒå±€æ€»ç»“",
        "date": "Invalid date",
        "tags": [
          "blog"
        ],
        "published": true,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "2016-7-19-footer"
    },
    {
      "content": "\n\nåœ¨ä¸Šä¸€ç¯‡åšå®¢ [footer å¸ƒå±€æ€»ç»“](https://sfmonkey.github.io/blog/2016/07/footer.html)ä¸­ï¼Œæœ‰å…³äºè´Ÿ margin çš„åº”ç”¨æåŠï¼Œè´Ÿ margin çš„\nä½¿ç”¨å¯ä»¥æ›¿ä»£é‚£äº›è¾ƒå±é™©çš„ relative/absolute å±æ€§ï¼Œè¿˜å¯ä»¥è¾¾åˆ°ä¸€èˆ¬ CSS å±æ€§æ‰€ä¸èƒ½è¾¾åˆ°çš„æ•ˆæœï¼Œ åŒ–ç¹ä¸ºç®€ã€åŒ–è…æœ½ä¸ºç¥å¥‡ã€‚\n\nä¸€ä¸ªå®Œæ•´çš„ margin å±æ€§æ˜¯è¿™ä¹ˆå†™çš„\n```css\nmarginï¼štop right bottom left;\n```\næ ¹æ®[æµ·ç‰](http://www.hicss.net/)çš„åšå®¢ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥ä¸¤ç±»å‚è€ƒçº¿æ¥è§£é‡Š margin é—®é¢˜ï¼Œtop å’Œ left çš„å‚è€ƒçº¿å±äºä¸€ç±»ï¼Œ right å’Œ bottom çš„\nå‚è€ƒçº¿å±äºä¸€ç±»ã€‚top å’Œ left æ˜¯ä»¥å¤–å…ƒç´ ä¸ºå‚è€ƒï¼Œright å’Œ bottom æ˜¯ä»¥å…ƒç´ æœ¬èº«ä¸ºå‚è€ƒã€‚\n\né¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ª[demo](https://sfmonkey.github.io/demo/margin.html)\n\nå½“æˆ‘ä»¬æ”¹å˜top ä¸ left å±æ€§æ—¶ï¼Œè¿™æ¡å‚è€ƒçº¿å°±æ˜¯è¯¥å…ƒç´ çš„ç´§é‚»å…ƒç´ çš„è¾¹ç•Œï¼ˆåŒ…æ‹¬ margin ï¼‰ï¼Œå¦‚æœ top å’Œ left æ˜¯è´Ÿçš„ï¼Œé‚£ä¹ˆä»¥ä¸Šé¢çš„ demo ä¸ºä¾‹ï¼Œexample\nå…ƒç´ ä¼šä»¥ wrapper å…ƒç´ è¾¹ç¼˜ä¸ºåŸºå‡†ï¼Œåè¿‡æ¥å‘ä¸Šå’Œå‘å·¦æ¨è¿›ä¸€æ®µè·ç¦»ã€‚\n\nå½“æˆ‘ä»¬æ”¹å˜ right å’Œ bottom å±æ€§æ—¶ï¼Œè¿™æ¡å‚è€ƒçº¿å°±æ˜¯å®ƒè‡ªèº«çš„è¾¹ç•Œï¼Œå¦‚æœ right å’Œ bottom æ˜¯è´Ÿçš„ï¼Œé‚£ä¹ˆä»¥ä¸Šé¢çš„ demo ä¸ºä¾‹ï¼Œä¸‹æ–¹çš„ normal å…ƒç´ ä¼šä»¥ example \nå…ƒç´ è¾¹ç¼˜ä¸ºåŸºå‡†ï¼Œnormal å…ƒç´ å‘ä¸Šæï¼Œå¦‚æœ normal æ˜¯å†…è”å…ƒç´ ï¼Œnormal å…ƒç´ å‘å·¦æã€‚\n\nå…³äºè´Ÿ margin çš„ä¸€äº›[å®ä¾‹](http://www.hicss.net/i-know-you-do-not-know-the-negative-margin/)\n\nå‚è€ƒèµ„æ–™:[æˆ‘çŸ¥é“ä½ ä¸çŸ¥é“çš„è´Ÿ Margin ](http://www.hicss.net/i-know-you-do-not-know-the-negative-margin/)\n\n    æµ·ç‰çš„åšå®¢éœ€è¦ç§‘å­¦ä¸Šç½‘æµè§ˆ",
      "data": {
        "title": "è´Ÿ margin å­¦ä¹ æ€»ç»“",
        "date": "Invalid date",
        "tags": [
          "blog"
        ],
        "published": true,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "2016-7-19-margin"
    },
    {
      "content": "æœ€è¿‘é˜…è¯»äº†ã€Šé«˜æ€§èƒ½ javascriptã€‹è¿™æœ¬ä¹¦ï¼Œè™½ç„¶åœ¨ç°åœ¨çœ‹æ¥ä¹¦ä¸­çš„éƒ¨åˆ†çŸ¥è¯†å·²ç»è¿‡æ—¶äº†ï¼Œä½†è¿˜æ˜¯æœ‰å¾ˆå¤šå€¼å¾—æˆ‘ä»¬æ‹œè¯»çš„åœ°æ–¹ï¼Œæ•…æ€»ç»“ä¸€ä¸‹ã€‚\n\n## åŠ è½½å’Œæ‰§è¡Œ\n\n> å¤§å¤šæ•°æµè§ˆå™¨ä½¿ç”¨å•ä¸€è¿›ç¨‹æ¥å¤„ç† UI åˆ·æ–°å’Œ JS è„šæœ¬æ‰§è¡Œï¼Œæ‰€ä»¥åŒä¸€æ—¶é—´åªèƒ½å¹²ä¸€ä»¶äº‹ã€‚ JS çš„æ‰§è¡Œè¿‡ç¨‹è€—æ—¶è¶Šä¹…ï¼Œæµè§ˆå™¨ç­‰å¾…å“åº”çš„æ—¶é—´å°±è¶Šé•¿ã€‚\n\nå¦‚æœå¤–é“¾ JS çš„åŠ è½½ä¸æ˜¯å¼‚æ­¥çš„ï¼Œå®ƒä¼šé˜»å¡ DOM çš„è§£æå’Œæ¸²æŸ“ã€‚\n\næ¯æ¬¡é‡åˆ° script æ ‡ç­¾ï¼Œé¡µé¢éƒ½ä¼šåœä¸‹æ¥ç­‰å¾…ä»£ç çš„ä¸‹è½½ï¼ˆå¦‚æœæ˜¯å¤–é“¾JSï¼‰å¹¶æ‰§è¡Œï¼Œç„¶åå¤„ç†å…¶ä»–éƒ¨åˆ†ã€‚\n\næ‰€ä»¥æˆ‘ä»¬éœ€è¦å‡å°‘ JS å¯¹äºæ€§èƒ½çš„å½±å“ã€‚\n\n* å°½å¯èƒ½å°† JS æ”¾åœ¨ body æ ‡ç­¾æœ€åé¢ï¼Œè¿™æ ·èƒ½ç¡®ä¿è„šæœ¬æ‰§è¡Œå‰é¡µé¢å·²ç»å®Œæˆäº†æ¸²æŸ“\n\n* åˆå¹¶è„šæœ¬ï¼Œé¡µé¢ä¸­çš„ script æ ‡ç­¾è¶Šå°‘ï¼ŒåŠ è½½ä¹Ÿå°±è¶Šå¿«\n\n* æ— é˜»å¡ä¸‹è½½ JS\n\n    * defer async å±æ€§\n\n    * åŠ¨æ€åˆ›å»º script æ ‡ç­¾å®ç°å¼‚æ­¥åŠ è½½\n\n    * ä½¿ç”¨ XHR å¯¹è±¡ä¸‹è½½ JS ä»£ç å¹¶æ³¨å…¥é¡µé¢\n\n## æ•°æ®å­˜å–\n\n> åœ¨ JS ä¸­ï¼Œæ•°æ®å­˜å‚¨çš„ä½ç½®ä¼šå¯¹ä»£ç æ•´ä½“æ€§èƒ½äº§ç”Ÿé‡å¤§çš„å½±å“ã€‚æ•°æ®å­˜å‚¨å…±æœ‰å››ç§æ–¹å¼ï¼šå­—é¢é‡ã€å˜é‡ã€æ•°ç»„é¡¹ã€å¯¹è±¡æˆå‘˜ã€‚å®ƒä»¬æœ‰ç€å„è‡ªçš„æ€§èƒ½ç‰¹ç‚¹ã€‚\n\n* è®¿é—®å­—é¢é‡ï¼ˆå­—é¢é‡åªä»£è¡¨è‡ªèº«ï¼Œä¸å­˜å‚¨åœ¨ç‰¹å®šä½ç½®ï¼‰å’Œå±€éƒ¨å˜é‡çš„é€Ÿåº¦æœ€å¿«ï¼Œç›¸åï¼Œè®¿é—®æ•°ç»„å’Œå¯¹è±¡ç›¸å¯¹ç¼“æ…¢ã€‚\n\n* å˜é‡åœ¨ä½œç”¨åŸŸé“¾ä¸­çš„ä½ç½®è¶Šæ·±ï¼Œè®¿é—®é€Ÿåº¦ä¹Ÿå°±è¶Šæ…¢ï¼Œç”±äºå…¨å±€å˜é‡å¤„äºä½œç”¨åŸŸé“¾çš„æœ€æœ«ç«¯ï¼Œæ‰€ä»¥è®¿é—®é€Ÿåº¦æ˜¯æœ€æ…¢çš„ã€‚\n\n* é¿å…ä½¿ç”¨ with è¯­å¥å’Œ try-catch ä¸­çš„ catch å­å¥ï¼Œå› ä¸ºå®ƒä»¬ä¼šæ”¹å˜æ‰§è¡Œç¯å¢ƒçš„ä½œç”¨åŸŸé“¾ã€‚\n\n* åµŒå¥—çš„å¯¹è±¡æˆå‘˜ï¼ˆå¦‚ window.location.hrefï¼‰ä¼šæ˜æ˜¾çš„å½±å“æ€§èƒ½ï¼Œå°½é‡å°‘ç”¨ã€‚\n\n* å±æ€§å’Œæ–¹æ³•åœ¨åŸå‹é“¾ä¸­çš„ä½ç½®è¶Šæ·±ï¼Œè®¿é—®å®ƒçš„é€Ÿåº¦å°±è¶Šæ…¢ã€‚\n\n* é€šè¿‡æŠŠå¸¸ç”¨çš„å¯¹è±¡æˆå‘˜ï¼Œæ•°ç»„å…ƒç´ ï¼Œè·¨åŸŸå˜é‡ä¿å­˜åœ¨å±€éƒ¨å˜é‡ä¸­æ¥æ”¹å–„ JS æ€§èƒ½ã€‚\n\n## DOM ç¼–ç¨‹\n\n> è®¿é—®å’Œæ“ä½œ DOM æ˜¯ç°ä»£ Web åº”ç”¨çš„é‡è¦éƒ¨åˆ†ï¼Œä½†æ¯æ¬¡ç©¿è¶Šè¿æ¥ ECMAScript å’Œ DOM ä¸¤ä¸ªå²›å±¿ä¹‹é—´çš„æ¡¥æ¢ï¼Œéƒ½ä¼šè¢«æ”¶å– â€œè¿‡æ¡¥è´¹â€ï¼Œä¸ºäº†å‡å°‘ DOM ç¼–ç¨‹å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—ï¼Œéœ€è¦æ³¨æ„ä¸€äº›åœ°æ–¹ã€‚\n\n* æœ€å°åŒ– DOM è®¿é—®æ¬¡æ•°ã€‚\n\n* å¦‚æœéœ€è¦å¤šæ¬¡è®¿é—®æŸä¸ª DOM ï¼Œè¯·ä½¿ç”¨å±€éƒ¨å˜é‡å­˜å‚¨å®ƒçš„å¼•ç”¨ã€‚\n\n* å°å¿ƒä½¿ç”¨ HTML é›†åˆï¼Œå› ä¸ºå®ƒå®æ—¶è¿ç³»ç€åº•å±‚æ–‡æ¡£ï¼ŒæŠŠé›†åˆçš„é•¿åº¦ç¼“å­˜åˆ°ä¸€ä¸ªå˜é‡ä¸­ï¼Œå¹¶åœ¨è¿­ä»£ä¸­ä½¿ç”¨å®ƒã€‚å¦‚æœéœ€è¦ç»å¸¸æ“ä½œé›†åˆï¼Œå»ºè®®æŠŠå®ƒæ‹·è´åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ã€‚\n\n* ä½¿ç”¨é€Ÿåº¦æ›´å¿«çš„ APIï¼Œæ¯”å¦‚ querySelectorAll å’Œ firstElementChild\n\n* è¦ç•™æ„é‡ç»˜å’Œé‡æ’ï¼Œæ‰¹é‡ä¿®æ”¹æ ·å¼æ—¶ï¼Œâ€œç¦»çº¿â€ æ“ä½œ DOM æ ‘ï¼Œä½¿ç”¨ç¼“å­˜ï¼Œå¹¶å‡å°‘è®¿é—®å¸ƒå±€ä¿¡æ¯çš„æ¬¡æ•°ã€‚\n\n* åŠ¨ç”»ä¸­ä½¿ç”¨ç»å¯¹å®šä½ï¼Œä½¿ç”¨æ‹–æ”¾ä»£ç†ã€‚\n\n* ä½¿ç”¨äº‹ä»¶å§”æ‰˜å‡å°‘äº‹ä»¶å¤„ç†å™¨çš„æ•°é‡ã€‚\n\n## ç®—æ³•å’Œæµç¨‹æ§åˆ¶\n\n> js å’Œå…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼Œä»£ç çš„å†™æ³•å’Œç®—æ³•ä¼šå½±å“è¿è¡Œæ—¶é—´ã€‚\n\n* forï¼Œwhile å’Œ do-while å¾ªç¯æ€§èƒ½ç›¸å½“ã€‚\n\n* é¿å…ä½¿ç”¨ for-in å¾ªç¯ï¼Œé™¤éä½ éœ€è¦éå†ä¸€ä¸ªå±æ€§æ•°é‡æœªçŸ¥çš„å¯¹è±¡ã€‚\n\n* æ”¹å–„å¾ªç¯æ€§èƒ½æœ€ä½³çš„æ–¹å¼æ˜¯å‡å°‘æ¯æ¬¡è¿­ä»£çš„è¿ç®—é‡å’Œå‡å°‘è¿­ä»£å¾ªç¯çš„æ¬¡æ•°ã€‚\n\n* å½“æ¡ä»¶åˆ†æ”¯åˆ°è¾¾ä¸€å®šç¨‹åº¦æ—¶ï¼Œå¯¹è±¡ä¼˜äº switch ä¼˜äº if-else\n\n* æµè§ˆå™¨çš„è°ƒç”¨æ ˆå¤§å°é™åˆ¶äº†é€’å½’ç®—æ³•åœ¨ JS ä¸­çš„åº”ç”¨ã€‚\n\n* ä»»ä½•é€’å½’ç®—æ³•éƒ½å¯ä»¥ç”¨è¿­ä»£æ¥ä»£æ›¿ï¼Œæˆ–ä½¿ç”¨ Memoizationï¼ˆè¯¥å‡½æ•°ä¼šç¼“å­˜ç‰¹å®šå‚æ•°çš„å‡½æ•°è°ƒç”¨ç»“æœï¼‰ æ¥é¿å…é‡å¤è®¡ç®—ã€‚\n\n## å­—ç¬¦ä¸²å’Œæ­£åˆ™è¡¨è¾¾å¼\n\n> å¯†é›†çš„å­—ç¬¦ä¸²æ“ä½œå’Œè‰ç‡çš„ç¼–å†™æ­£åˆ™è¡¨è¾¾å¼å¯èƒ½ä¼šäº§ç”Ÿä¸¥é‡çš„æ€§èƒ½éšœç¢ã€‚\n\n* åœ¨å¤§é‡çš„å­—ç¬¦ä¸²åˆå¹¶ä¸­ï¼Œæ•°ç»„é¡¹åˆå¹¶æ˜¯æœ€æ…¢çš„å­—ç¬¦ä¸²è¿æ¥æ–¹æ³•ä¹‹ä¸€ï¼Œæ¨èä½¿ç”¨ç®€å•çš„ + å’Œ += æ“ä½œç¬¦æ›¿ä»£ã€‚\n\n* ä½¿äº’é‚»çš„å­—å…ƒäº’æ–¥ï¼Œé¿å…åµŒå¥—é‡è¯å¯¹åŒä¸€å­—ç¬¦ä¸²çš„ç›¸åŒéƒ¨åˆ†å¤šæ¬¡åŒ¹é…ï¼Œé€šè¿‡é‡å¤åˆ©ç”¨é¢„æŸ¥çš„åŸå­ç»„å»é™¤ä¸å¿…è¦çš„å›æº¯ï¼Œä»¥æ­¤æ¥é¿å…å›æº¯å¤±æ§ã€‚\n\n* æ­£åˆ™è¡¨è¾¾å¼å¹¶ä¸æ€»æ˜¯å®Œæˆå·¥ä½œçš„æœ€ä½³æ–¹å¼ï¼Œå°¤å…¶å½“ä½ åªæœç´¢å­—é¢å­—ç¬¦ä¸²çš„æ—¶å€™ã€‚\n\n## å¿«é€Ÿå“åº”çš„ç”¨æˆ·ç•Œé¢\n\n> JS å’Œç”¨æˆ·ç•Œé¢æ›´æ–°åœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­è¿è¡Œï¼Œå› æ­¤ä¸€æ¬¡åªèƒ½å¤„ç†ä¸€ä»¶äº‹æƒ…ã€‚è¿™æ„å‘³ç€å½“ JS ä»£ç æ­£åœ¨è¿è¡Œæ—¶ï¼Œç”¨æˆ·ç•Œé¢ä¸èƒ½å“åº”è¾“å…¥ï¼ˆç‚¹å‡»äº‹ä»¶ç­‰ï¼‰ï¼Œåä¹‹äº¦ç„¶ã€‚é«˜æ•ˆåœ°ç®¡ç† UI çº¿ç¨‹å°±æ˜¯è¦ç¡®ä¿ JS ä¸èƒ½è¿è¡Œå¤ªé•¿æ—¶é—´ï¼Œä»¥é¿å…å½±å“ç”¨æˆ·ä½“éªŒã€‚\n\n* JS è¯­å¥çš„æ‰§è¡Œä¸è¦è¶…è¿‡ 50 msã€‚\n\n* ä»»ä½• JS ä»»åŠ¡éƒ½ä¸åº”è¯¥æ‰§è¡Œè¶…è¿‡ 100 msã€‚è¿‡é•¿çš„è¿è¡Œæ—¶é—´ä¼šå¯¼è‡´ UI æ›´æ–°å‡ºç°æ˜æ˜¾çš„å»¶è¿Ÿï¼Œä»è€Œå¯¹ç”¨æˆ·ä½“éªŒäº§ç”Ÿè´Ÿé¢å½±å“ã€‚\n\n* å®šæ—¶å™¨å¯ç”¨æ¥å®‰æ’ä»£ç å»¶è¿Ÿæ‰§è¡Œï¼Œå®ƒä½¿å¾—ä½ å¯ä»¥æŠŠé•¿æ—¶é—´è¿è¡Œçš„è„šæœ¬åˆ†è§£æˆä¸€ç³»åˆ—å°çš„ä»»åŠ¡ã€‚\n\n* å®šæ—¶å™¨ä¼šåœ¨å»¶è¿Ÿæ—¶é—´åˆ°è¾¾ååŠ å…¥ä»£ç æ‰§è¡Œé˜Ÿåˆ—ã€‚\n\n* web worker å…è®¸ä½ åœ¨ UI çº¿ç¨‹å¤–éƒ¨æ‰§è¡Œ JS ä»£ç ï¼Œä»è€Œé¿å…é”å®š UIã€‚\n\n## Ajax\n\n> é«˜æ€§èƒ½çš„ Ajax éœ€è¦é€‰æ‹©æ­£ç¡®çš„æ•°æ®æ ¼å¼å’Œä¸ä¹‹åŒ¹é…çš„ä¼ è¾“æŠ€æœ¯ã€‚\n\n* JSON å’Œå­—ç¬¦åˆ†å‰²çš„è‡ªå®šä¹‰æ ¼å¼æ˜¯æœ€è½»é‡å’Œå“åº”æœ€å¿«çš„é€‰æ‹©ã€‚\n\n* XHR æä¾›äº†æœ€å®Œå–„çš„æ§åˆ¶å’Œçµæ´»æ€§ï¼Œå°½ç®¡å®ƒä¼šæŠŠæ¥æ”¶åˆ°çš„æ‰€æœ‰æ•°æ®å½“ä½œå­—ç¬¦ä¸²ã€‚\n\n* åŠ¨æ€è„šæœ¬æ³¨å…¥å¯ä»¥è·¨åŸŸæ‰§è¡Œ JS å’Œ JSONï¼Œä½†ä¸èƒ½è¯»å–ä¿¡æ¯å¤´ï¼Œä¸”ä¸å®‰å…¨ã€‚\n\n* Multipart XHR å¯ä»¥ç”¨æ¥å‡å°‘è¯·æ±‚æ•°ï¼Œå¹¶å¤„ç†ä¸€ä¸ªå“åº”ä¸­çš„å„ç§æ–‡ä»¶ç±»å‹ï¼Œä½†å®ƒä¸èƒ½ç¼“å­˜æ¥æ”¶åˆ°çš„ç›¸åº”ã€‚\n\n* å½“éœ€è¦å‘é€æ•°æ®æ—¶ï¼Œå›¾ç‰‡ä¿¡æ ‡æ˜¯ä¸€ç§ç®€å•æœ‰æ•ˆçš„æ–¹æ³•ã€‚\n\n* ä»¥ä¸Šä»‹ç»äº†å‡ ç§ Ajax æŠ€æœ¯ï¼š XHRï¼Œ åŠ¨æ€è„šæœ¬æ³¨å…¥ï¼Œ MXHRï¼Œå›¾ç‰‡ä¿¡æ ‡ã€‚Ajax çš„å­˜åœ¨ä½¿ä½ å¯ä»¥ä¸ç”¨åœ¨æœåŠ¡ç«¯å°±ä¸‹å‘å…¨éƒ¨æ•°æ®ï¼Œæˆ–åœ¨ä¸æ›´æ–°é¡µé¢çš„æƒ…å†µä¸‹æ›´æ–°å†…å®¹ã€‚\n\n* Ajax ç¼“å­˜æœ‰ä¸¤ç§æ–¹å¼ï¼šä¸€ç§æ˜¯åœ¨æœåŠ¡ç«¯è®¾ç½®ç¼“å­˜æ—¶é—´ï¼Œä¸€ç§æ˜¯åœ¨å®¢æˆ·ç«¯è®¾ç½®ç¼“å­˜æ•°æ®å˜é‡ã€‚\n\nè¿™é‡Œæœ‰ä¸€äº›ä½¿ç”¨å‡†åˆ™\n\n* å‡å°‘è¯·æ±‚æ•°ï¼Œå¯é€šè¿‡åˆå¹¶ JS å’Œ CSSæ–‡ä»¶ï¼Œæˆ–ä½¿ç”¨ MXHRã€‚\n\n* ç¼©çŸ­é¡µé¢çš„åŠ è½½æ—¶é—´ï¼Œé€šè¿‡ Ajax æ¥åœ¨é¡µé¢ä¸»è¦å†…å®¹åŠ è½½åï¼ŒåŠ è½½å‰©ä½™å†…å®¹ã€‚\n\n* çŸ¥é“åˆé€‚ä½¿ç”¨ Ajax åº“ï¼Œä½•æ—¶ç¼–å†™è‡ªå·±çš„ Ajax ä»£ç ã€‚\n\n## ç¼–ç¨‹å®è·µ\n\n> JS æå‡ºäº†ä¸€äº›ç‹¬ä¸€æ— äºŒçš„æ€§èƒ½æŒ‘æˆ˜ï¼Œè¿™ä¸ä½ ç»„ç»‡ä»£ç çš„æ–¹å¼æœ‰å…³ã€‚\n\n* é¿å…ä½¿ç”¨ eval() å’Œ Function() æ„é€ å™¨å¸¦æ¥åŒé‡æ±‚å€¼çš„æ€§èƒ½æŸè€—ã€‚åŒæ ·çš„ï¼Œç»™ setTimeout å’Œ setInterval ä¼ é€’å‡½æ•°è€Œä¸æ˜¯å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ã€‚\n\n* å°½é‡ä½¿ç”¨ç›´æ¥é‡åˆ›å»ºå¯¹è±¡å’Œæ•°ç»„ï¼Œç›´æ¥é‡çš„åˆ›å»ºå’Œåˆå§‹åŒ–éƒ½æ¯”éç›´æ¥é‡å½¢å¼è¦å¿«ã€‚\n\n* é¿å…é‡å¤çš„å·¥ä½œï¼Œå½“éœ€è¦æ£€æµ‹æµè§ˆå™¨æ—¶ï¼Œå¯ä½¿ç”¨å»¶è¿ŸåŠ è½½æˆ–æ¡ä»¶é¢„åŠ è½½ã€‚\n\n* åœ¨è¿›è¡Œæ•°å­¦è®¡ç®—æ—¶ï¼Œè€ƒè™‘ä½¿ç”¨ç›´æ¥æ“ä½œæ•°å­—çš„äºŒè¿›åˆ¶å½¢å¼çš„ä½è¿ç®—ã€‚\n\n* å°½é‡ä½¿ç”¨ JS åŸç”Ÿæ–¹æ³•ã€‚\n\n## æ„å»ºå¹¶éƒ¨ç½²é«˜æ€§èƒ½çš„ JS åº”ç”¨\n\n> æ„å»ºä¸éƒ¨ç½²çš„è¿‡ç¨‹å¯¹åŸºäº JS çš„ web åº”ç”¨çš„æ€§èƒ½æœ‰ç€å·¨å¤§å½±å“ã€‚\n\n* åˆå¹¶ JS æ–‡ä»¶ä»¥å‡å°‘ HTTP è¯·æ±‚æ•°ã€‚\n\n* å‹ç¼© JS æ–‡ä»¶ã€‚\n\n* æœåŠ¡ç«¯å‹ç¼©ï¼ˆGzip ç­‰ï¼‰é™æ€æ–‡ä»¶ã€‚\n\n* é€šè¿‡æ­£ç¡®è®¾ç½® HTTP å“åº”å¤´æ¥ç¼“å­˜é™æ€æ–‡ä»¶ï¼Œé€šè¿‡å‘æ–‡ä»¶åå¢åŠ æ—¶é—´æˆ³æ¥é¿å…ç¼“å­˜é—®é¢˜ã€‚\n\n* ä½¿ç”¨ CDNã€‚\n\n\n\n> åœ¨é«˜å‹çš„ç¯å¢ƒä¸‹ï¼Œäººä¼šå¿«é€Ÿçš„æˆé•¿ã€‚",
      "data": {
        "title": "ã€Šé«˜æ€§èƒ½ javascriptã€‹æ€»ç»“",
        "date": "Invalid date",
        "tags": [
          "blog"
        ],
        "published": true,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "2018-12-18-js-highPreformance"
    },
    {
      "content": "\næ˜¨å¤©ç¢°åˆ°äº†ä¸€ä¸ªå…³äºç¼“å­˜çš„é—®é¢˜ï¼Œåœ¨ææ˜ç™½çš„è¿‡ç¨‹ä¸­æœ‰äº›æ”¶è·ï¼Œæƒ³ç€é‚£å°±å†™ä¸€ä¸‹ã€‚\n\n## è¿˜æ˜¯ä»é—®é¢˜çš„èµ·æºè¯´èµ·\n\næ˜¨å¤©åœ¨ç”¨æ·±åœ³ä¾§çš„ç»„ä»¶çš„æ—¶å€™ï¼Œå‘ç°ç»„ä»¶å¼€å‘åŒå­¦ç¨å‰äº›æ—¶å€™ä¸Šçº¿çš„åŠŸèƒ½ï¼Œè‡ªå·±è¿™è¾¹å¹¶æ²¡æœ‰ï¼Œçœ‹äº†ä¸€ä¸‹æºä»£ç ï¼ŒåŸæ¥æ˜¯ç¼“å­˜çš„ä¹‹å‰çš„ã€‚\n\nè¿™é‡Œï¼Œæœ‰çš„äººå°±è¦é—®äº†ï¼Œä¸ºä»€ä¹ˆä¸ç”¨ç‰ˆæœ¬å·ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºå®ƒæ˜¯ç»„ä»¶ã€‚\n\n## æ€§èƒ½ä¼˜åŒ–\n\nåœ¨ web 2.0 çš„æ—¶ä»£ï¼Œè¿½æ±‚é¡µé¢åŠ è½½é€Ÿåº¦çš„èƒŒæ™¯ä¸‹ï¼Œå‡ ä¹æ‰€æœ‰çš„é¡µé¢éƒ½ä¼šåšä¸åŒç¨‹åº¦çš„ç¼“å­˜å¤„ç†ï¼Œæµè§ˆå™¨ä¼šé€šè¿‡åå•†ç¼“å­˜å’Œå¼ºåˆ¶ç¼“å­˜æ¥ç¡®ä¿åŠ è½½é€Ÿåº¦ã€‚è¿™é‡Œè®©æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹è¿™äº›ç¼“å­˜æœºåˆ¶ã€‚\n\n* å¼ºåˆ¶ç¼“å­˜\n\n    * Pragma\n\n    å½“è¯¥å­—æ®µçš„ value ä¸º no-cache ï¼ˆç°åœ¨ä»…æœ‰è¿™ä¸ªå€¼ï¼‰æ—¶ï¼Œå®ƒä¼šå‘Šè¯‰æµè§ˆå™¨ä¸è¦è¯»ç¼“å­˜ï¼Œå»æœåŠ¡å™¨ä¸Šå–æ–‡ä»¶ã€‚\n\n    * Expires\n\n    Expires çš„å€¼æ˜¯ä¸€ä¸ªæ ¼æ—å¨æ²»æ—¶é—´ï¼Œåœ¨è¿‡æœŸä¹‹å‰ï¼Œæµè§ˆå™¨ä¼šè¯»æµè§ˆå™¨çš„ç¼“å­˜ã€‚å¦‚æœä¸æƒ³è®¾ç½®ç¼“å­˜ï¼Œåœ¨ meta æ ‡ç­¾é‡Œçš„ content å†™ä¸º 0 æˆ– -1\n\n    > ä¸Šé¢çš„è¿™ä¸¤ä¸ªå­—æ®µéƒ½æ˜¯ http 1.0 æ—¶ä»£çš„å­—æ®µï¼Œç°åœ¨å·²è¢«å¼ƒç”¨ï¼Œä½†å¾ˆå¤šç½‘ç«™ä¸ºäº†åšå‘ä¸‹å…¼å®¹ï¼Œè¿˜æ˜¯æ·»åŠ äº†è¿™ä¸¤ä¸ªå­—æ®µã€‚è¿™ä¸¤ä¸ªå­—æ®µåœ¨ meta æ ‡ç­¾ä¸­è®¾ç½®çš„æ—¶å€™ï¼Œåªæœ‰ IE æµè§ˆå™¨ä¼šè¯†åˆ«ã€‚è¿™ä¸¤ä¸ªå­—æ®µï¼ŒPragma ä¼˜å…ˆçº§æ›´æ”¹ã€‚\n\n    * cache-control\n\n    é’ˆå¯¹ä¸Šè¿°çš„ `Expiresæ—¶é—´æ˜¯ç›¸å¯¹æœåŠ¡å™¨è€Œè¨€ï¼Œæ— æ³•ä¿è¯å’Œå®¢æˆ·ç«¯æ—¶é—´ç»Ÿä¸€` çš„é—®é¢˜ï¼Œhttp1.1æ–°å¢äº† Cache-Control æ¥å®šä¹‰ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Œè‹¥æŠ¥æ–‡ä¸­åŒæ—¶å‡ºç°äº† Pragmaã€Expires å’Œ Cache-Controlï¼Œä¼šä»¥ Cache-Control ä¸ºå‡†ã€‚\n\n* åå•†ç¼“å­˜\n\n    ä¸ºäº†è®©å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å®ç°ç¼“å­˜æ–‡ä»¶æ˜¯å¦æ›´æ–°ï¼Œæ›´å¥½çš„æé«˜ç¼“å­˜å¤ç”¨ç‡ï¼ŒHttp 1.1 æ–°å¢äº†å‡ ä¸ªå­—æ®µ\n\n    * Last-Modified\n\n    è¿™ä¸ªå­—æ®µæ˜¯æœåŠ¡å™¨è¿”å›æŠ¥æ–‡çš„ä¸€ä¸ªå­—æ®µï¼Œç”¨æ¥è¿”å›æ–‡ä»¶æœ€åä¸€æ¬¡æ›´æ”¹çš„æ—¶é—´ï¼Œå€¼æ˜¯ä¸€ä¸ªæ ¼æ—å¨æ²»æ—¶é—´ã€‚\n\n    ä¼ é€’è¿‡æ¥çš„æœ€ç»ˆä¿®æ”¹æ—¶é—´ä¼šéšç€ä¸¤ä¸ªè¯·æ±‚æŠ¥æ–‡å‘é€\n\n        1. If-Modified-Since\n\n        2. If-Unmodified-Since\n\n    Last-Modified æœ‰ä¸€ä¸ªä¸å¥½çš„åœ°æ–¹åœ¨äºï¼Œå¦‚æœæœåŠ¡å™¨æ–‡ä»¶æœ‰æ”¹åŠ¨ï¼Œä½†å®é™…å†…å®¹å¹¶æ²¡æœ‰å˜åŒ–ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´é‡æ–°ä¸‹è½½æ–‡ä»¶ã€‚\n\n    * Etag\n\n    Etag æ˜¯æœåŠ¡å™¨å¯¹èµ„æºè¿›è¡ŒæŸç§ç®—æ³•å¾—å‡ºçš„ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç¬¦ï¼Œé€šè¿‡å®ƒæˆ‘ä»¬å°±å¯ä»¥è§£å†³ Last-modified å¸¦æ¥çš„ä¸è¶³\n\n    ä¼ é€’è¿‡æ¥çš„å”¯ä¸€æ ‡è¯†ç¬¦é€šè¿‡è¯·æ±‚æŠ¥æ–‡çš„ä¸¤ä¸ªå­—æ®µå‘é€\n\n        1. If-None-Match\n\n        2. If-Match\n\n    å¦‚æœ Last-modified å’Œ Etag åŒæ—¶è¢«ä½¿ç”¨ï¼Œåˆ™ä¸¤ä¸ªéƒ½æ»¡è¶³æ¡ä»¶æ‰ä¼šå‘é€ 304 ï¼Œ nginx é»˜è®¤åŒæ—¶å¼€å¯ã€‚\n\n## å›åˆ°é—®é¢˜\n\n    ä¸ºä»€ä¹ˆç»„ä»¶ä¸å¥½åšç¼“å­˜ï¼Ÿ\n\n    å…¶å®å¤§å¤šæ•°çš„é™æ€èµ„æºï¼Œæˆ‘ä»¬æ˜¯ç¼“å­˜çš„ï¼Œç¼“å­˜æ—¶é—´æ ¹æ®å…·ä½“ä¸šåŠ¡åœºæ™¯æ¥å®šã€‚\n\n    é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•ä¿è¯æ›´æ”¹äº†æ–‡ä»¶ä¹‹åèƒ½å¤Ÿè®©ç”¨æˆ·ç«‹åˆ»æ„ŸçŸ¥ã€‚\n\n* åˆ·æ–° CDN\n\n    CDN æœåŠ¡å•†ä¼šç»™æˆ‘ä»¬æä¾›åˆ·æ–°æ¥å£\n\n* ç‰ˆæœ¬å·\n\n    å¦‚ä½•è®©ç”¨æˆ·çš„æµè§ˆå™¨ç¼“å­˜å¤±æ•ˆï¼Ÿ è¿™é‡Œæˆ‘ä»¬éœ€è¦åˆ©ç”¨æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶ï¼Œæµè§ˆå™¨ç¼“å­˜æ–‡ä»¶æ˜¯æŒ‰ç…§ URL ç¼“å­˜çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦æ›´æ”¹è¯·æ±‚æ–‡ä»¶çš„ URL å°±è¡Œã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç»™æ–‡ä»¶åŠ ä¸Šç‰ˆæœ¬å·ã€‚è¿™æ ·ï¼Œæ¯æ¬¡ç‰ˆæœ¬ä¸Šçº¿ä¹‹åï¼Œåˆ·æ–°ç‰ˆæœ¬å·ï¼Œå°±å¯ä»¥çªç ´æµè§ˆå™¨é™åˆ¶ã€‚\n\n    å¤§å¤šæ•°æƒ…æ™¯ä¸‹ï¼Œé—®é¢˜å·²ç»å¾—åˆ°äº†è§£å†³ã€‚\n\n    ä½†æ˜¯åˆ°äº†ç»„ä»¶ï¼Œå°±ä¸å¥½ä½¿äº†ã€‚\n\n    å› ä¸ºç»„ä»¶æ˜¯æ¯ä¸ªå·¥ç¨‹æ¨¡å—å¼•ç”¨çš„å…¬å…±æ¨¡å—ï¼Œå¦‚æœç»„ä»¶è·Ÿæ–°åŠŸèƒ½ï¼Œé‚£ä¹ˆåœ¨å„æ¨¡å—ä¸æ›´æ–°ç‰ˆæœ¬å·çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ— æ³•çªç ´æµè§ˆå™¨ç¼“å­˜é™åˆ¶ã€‚\n\n## è§£å†³åŠæ³•\n\n    æˆ‘æƒ³åˆ°çš„åŠæ³•å°±æ˜¯ç‰¹æ®Šå¤„ç†ã€‚\n\n    æˆ‘ä»¬åœ¨è®¾ç½®æœåŠ¡å™¨é…ç½®æ–‡ä»¶çš„æ—¶å€™ï¼Œä¸€èˆ¬éƒ½ä¼šç”¨æ­£åˆ™ç»™æœåŠ¡å™¨çš„æŸä¸€ç±»å‹æ–‡ä»¶è®¾ç½®ç¼“å­˜æ—¶é—´ã€‚\n\n    æ‰€ä»¥ï¼Œæˆ‘ä»¬åªéœ€è¦è®¾ç½®ä¸€ä¸ªç™½åå•ï¼Œå°†å…¬å…±ç»„ä»¶æ”¾è¿›å»ï¼Œè¿™æ ·ï¼Œä¿è¯è¯¥æ–‡ä»¶æ²¡æœ‰ç¼“å­˜æ—¶é—´ï¼Œç«‹å³è¿‡æœŸï¼Œå°±å¯ä»¥è§£å†³é—®é¢˜äº†ã€‚\n\n> ç¼–ç å½“å¦‚ç»ƒåˆ€ï¼Œåˆ€æ„å†…æ•›ï¼Œä¸€æ•›ä¸‰å¹´ã€‚\n\n\n\n\n    \n    \n",
      "data": {
        "title": "å…³äºé™æ€èµ„æºç¼“å­˜çš„ä¸€ç‚¹ç†è§£",
        "date": "Invalid date",
        "tags": [
          "blog"
        ],
        "published": true,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "2018-4-12-cache"
    },
    {
      "content": "\näº‹æƒ…çš„èµ·æºæ˜¯è¿™æ ·çš„ã€‚\n\n## ç‚¹å‡»è·³è½¬æŒ‡å®šä½ç½®\n\nå‰äº›å¤©åœ¨åšä¸€ä¸ªç‚¹å‡»è·³è½¬æŒ‡å®šä½ç½®çš„éœ€æ±‚ï¼Œåœ¨åšè¿™ä¸ªçš„æ—¶å€™ï¼Œå‡ºç°äº†ä¸‰ç§è·³è½¬æ–¹æ¡ˆã€‚\n\n*  html é”šç‚¹\n\nè¿™ç§æ–¹å¼å¾ˆç®€å•æœ‰æ•ˆï¼Œæˆ‘ä»¬åªéœ€è¦è¿›è¡Œä¸€ç‚¹å°å°çš„æ”¹åŠ¨\n\n```html\n    <a href='#jump'>ç‚¹å‡»è·³è½¬</a>\n    <div id='jump'>here</div>\n```\n\n* js å®ç°è·³è½¬ä»£ç \n\næˆ‘ä»¬éœ€è¦åˆ©ç”¨ window.location æ¥å®ç°\n\n```javascript\n    <script>\n    function jump() {\n         window.location.hash = \"#jump\";\n    }\n    </script>\n    <input  type=\"button\" name=\"Submit\" value=\"æäº¤\"  onclick=\"jump()\" />\n\n    <div id=\"jump\">è·³è½¬åˆ°çš„ä½ç½®</div>\n\n```\n\nè¿™ä¸¤ç§æ–¹æ³•ä¼˜åŠ¿å°±æ˜¯ç®€å•ï¼Œä½†æ˜¯ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå®ƒä»¬ä¼šæ”¹å˜é¡µé¢ URL ï¼Œè¿™åœ¨ä¸€äº›æ—¶å€™ï¼Œæ˜¯ä¸å…è®¸çš„ã€‚\n\n* ä½¿ç”¨ animate æ–¹æ³•\n\n```javascript\n    $(\"html, body\").animate(\n        {\n            scrollTop: $(\"#div\").offset().top \n        }, \n        {\n            duration: 500,\n            easing: \"swing\"\n        }\n    )\n```\nè¿™ç§æ–¹æ³•ä¸å­˜åœ¨æ”¹å˜ URL çš„æƒ…å†µï¼Œæ¯”è¾ƒæ¨èã€‚\n\nä½†åœ¨æˆ‘ä½¿ç”¨è¿™ç§æ–¹å¼å®Œæˆè·³è½¬æ—¶ï¼Œå‡ºç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯é¡µé¢åœ¨æ–¹æ³•æ‰§è¡Œåæ²¡æœ‰ååº”ã€‚\n\n## é—®é¢˜æ’æŸ¥\n\n* scrollTop \n\nscrollTop æ–¹æ³•è¿”å›æˆ–è®¾ç½®åŒ¹é…å…ƒç´ çš„æ»šåŠ¨æ¡çš„å‚ç›´ä½ç½®ï¼Œåˆšå¼€å§‹æˆ‘ä»¥ä¸ºæ˜¯è¿™ä¸ªæ–¹æ³•æœ‰é—®é¢˜ï¼Œä½†åœ¨æ§åˆ¶å°æˆ‘å‘ç° DOM èŠ‚ç‚¹ä¸‹æ˜¯æœ‰è¿™ä¸ªæ–¹æ³•çš„ï¼Œè¿™ä¸ªæ–¹æ³•æ‰§è¡Œäº†ï¼Œä½†å°±æ˜¯æ²¡æœ‰è·³è½¬åŠ¨ä½œ\n\n* å…¼å®¹æ€§\n\næ¥ç€æˆ‘æƒ³åˆ°äº†æ˜¯ä¸æ˜¯æµè§ˆå™¨æ²¡æœ‰åšåˆ°è¿™ä¸ªæ–¹æ³•çš„å…¼å®¹ï¼Œä½†æ˜¯åœ¨åŒä¸€æµè§ˆå™¨çš„ä¸åŒé¡µé¢ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯å¥æ•ˆçš„ã€‚\n\n* DOM èŠ‚ç‚¹\n\næœ€åï¼Œæˆ‘æ›´æ¢äº† DOM èŠ‚ç‚¹ï¼Œå°† html æ¢ä¸ºäº† window ï¼Œé—®é¢˜è§£å†³ã€‚\n\n## window document \n\nå½“æ—¶æˆ‘æ˜¯æœ‰äº›æ‡µçš„ï¼Œæˆ‘ä¸ç†è§£ä¸ºä»€ä¹ˆæ›´æ¢ä¸º window å¯¹è±¡åå°±å¥½ä½¿äº†ã€‚äºæ˜¯æˆ‘å¯¹ window document html body è¿™å››ä¸ªå¯¹è±¡è¿›è¡Œäº†ä¸€äº›å¯¹æ¯”äº†è§£ã€‚\n\n* window\n\nwindow æ˜¯æŒ‡æ–‡æ¡£æ‰€åœ¨çš„çª—å£ï¼ˆæ²¡æœ‰åŒ…æ‹¬æµè§ˆå™¨çš„æ»šåŠ¨æ¡ï¼‰\n\n* document \n\ndocument çš„æ„æ€æ˜¯æ–‡æ¡£ï¼Œå®ƒæ˜¯æŒ‡å…·ä½“çš„ä¸€ä¸ªå¯¹è±¡çš„å†…å®¹ï¼Œdocument æ˜¯ window çš„ä¸€ä¸ªå­å¯¹è±¡\n\n* html body\n\nhtml å’Œ body æŒ‡çš„æ˜¯å¯¹åº”çš„ DOM å…ƒç´ ï¼Œä¸€èˆ¬åœ¨ä»£ç é‡Œé¢ï¼Œbodyæ˜¯åŒ…å«åœ¨htmlé‡Œçš„ï¼Œåœ¨æ ‡å‡†æµè§ˆå™¨é‡Œé¢htmléƒ¨åˆ†æ˜¯ç­‰äºbodyéƒ¨åˆ†çš„\n\n## $(window).scrollTop() vs $(document).scrollTop()\n\nä¸¤è€…çš„æ•ˆæœç›¸åŒï¼Œæ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚ä½†æ˜¯ï¼Œ\n\n> In general use document mainly to register events and use window to do things like scroll, scrollTop, and resize\n\næ‰€ä»¥ä¸ºä»€ä¹ˆæˆ‘ä¹‹å‰ä½¿ç”¨ body æ¥æ‰§è¡Œ scrollTop å‡½æ•°ï¼ˆåŸç”Ÿ scrollToï¼‰ä¸è¡Œå‘¢ï¼Œæ˜¯å› ä¸º body å¹¶æ²¡æœ‰æ»šåŠ¨æ¡ï¼Œhtml çš„æ»šåŠ¨æ¡è®© body å®Œå…¨å¹³é“ºå±•å¼€äº†ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬ç”¨ `$(html,body)` ï¼Œé‚£å°±ä¸ä¼šé”™äº†ã€‚\n\n> äººç”Ÿè‹¦çŸ­ï¼Œç™½é©¹è¿‡éš™\n",
      "data": {
        "title": "window document html ä¸ body",
        "date": "Invalid date",
        "tags": [
          "blog"
        ],
        "published": true,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "2018-4-9-dom"
    },
    {
      "content": "\n\nè¿™åŠå¹´å¤šä»¥æ¥ï¼Œä¸€ç›´åœ¨åšç§»åŠ¨ç«¯çš„ç½‘é¡µå¼€å‘ï¼Œåœ¨ç§»åŠ¨ç«¯ç½‘é¡µä¸­ï¼Œä¸€å¤§ç—›ç‚¹å°±æ˜¯è°ƒè¯•ä»£ç ï¼Œå¦‚ä½•å¿«é€Ÿçš„å®šä½é—®é¢˜ï¼Œå¦‚ä½•åœ¨ç‰¹å®šçš„æ‰‹æœºå’Œæµè§ˆå™¨ä¸­è°ƒè¯•ä»£ç ã€‚\n\nåœ¨è¿™é‡Œæ€»ç»“ä¸€ä¸‹ï¼Œä¸‹é¢çš„è°ƒè¯•æ–¹æ³•ä¼šå†¥å†¥ä¹‹ä¸­æœ‰ä¸€ä¸ªé¡ºåºï¼Œä¹Ÿå¯ä»¥å½“ä½œæˆ‘ä»¬é€‰æ‹©è°ƒè¯•æ—¶çš„ä¸€ä¸ªé¡ºåºã€‚ä»¥ä¸‹æ–¹æ³•çš„å…·ä½“æ“ä½œç»†èŠ‚æˆ‘ä¸å†èµ˜è¿°ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šã€‚\n\n## Eruda\n\n> Eruda æ˜¯ä¸€ä¸ªä¸“ä¸ºæ‰‹æœºç½‘é¡µå‰ç«¯è®¾è®¡çš„è°ƒè¯•é¢æ¿ï¼Œç±»ä¼¼ DevTools çš„è¿·ä½ ç‰ˆï¼Œå…¶ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼šæ•è· console æ—¥å¿—ã€æ£€æŸ¥å…ƒç´ çŠ¶æ€ã€æ•è·XHRè¯·æ±‚ã€æ˜¾ç¤ºæœ¬åœ°å­˜å‚¨å’Œ Cookie ä¿¡æ¯ç­‰ç­‰\n\nå…¶å®æˆ‘ä»¬æ¯”è¾ƒç†ŸçŸ¥çš„è°ƒè¯•é¢æ¿å·¥å…·æ˜¯ [Vconsole](https://github.com/Tencent/vConsole) ï¼Œä½†ä»åŠŸèƒ½ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥æ˜æ˜¾çœ‹å‡ºï¼ŒEruda åœ¨ Vconsole ä¹‹ä¸Šã€‚\n\nä½¿ç”¨æ–¹æ³•å’Œ Vconsole å¤§åŒå°å¼‚ï¼š\n\n* åœ¨é¡µé¢å¼•å…¥ js\n\n* åˆå§‹åŒ–æ–¹æ³•\n\nè¿™é‡Œæˆ‘ä»¬æ³¨æ„ä¸€ä¸‹ï¼š\n\nThe JavaScript file size is quite huge(about 100kb gzipped) and therefore not suitable to include in mobile pages. It's recommended to make sure eruda is loaded only when eruda is set to true on url(http://example.com/?eruda=true), for example:\n\n```javascript\n;(function () {\n    var src = 'node_modules/eruda/eruda.min.js';\n    if (!/eruda=true/.test(window.location) && localStorage.getItem('active-eruda') != 'true') return;\n    document.write('<scr' + 'ipt src=\"' + src + '\"></scr' + 'ipt>');\n    document.write('<scr' + 'ipt>eruda.init();</scr' + 'ipt>');\n})();\n```\n[åº“åœ°å€](https://github.com/liriliri/eruda)\n\n## charles\n\n> Charles is an HTTP proxy / HTTP monitor / Reverse Proxy that enables a developer to view all of the HTTP and SSL / HTTPS traffic between their machine and the Internet\n\ncharles æ˜¯ä¸€ä¸ªæŠ“åŒ…å·¥å…·ï¼Œè¿™é‡Œä¹‹æ‰€ä»¥å¯ä»¥ç”¨æ¥ debug ï¼Œæ˜¯å› ä¸º charles å¯ä»¥ï¼š\n\n* ä¿®æ”¹ç½‘ç»œåè®®\n\n* æ›¿æ¢è¯·æ±‚æ–‡ä»¶\n\nå½“æˆ‘ä»¬éœ€è¦ç”¨æœ¬åœ°çš„ js æ–‡ä»¶æ¥ä»£æ›¿çº¿ä¸Š js æ–‡ä»¶è¿›è¡Œè°ƒè¯•æ—¶ï¼Œcharles å°±å¸®äº†æˆ‘ä»¬å¤§å¿™ï¼Œä¹Ÿå¼¥è¡¥äº† Eruda æ— æ³•å¯¹ js è¿›è¡Œå¤ªå¤šæ“ä½œçš„ç¼ºç‚¹ã€‚\n\ncharles è¿›è¡Œæ–‡ä»¶æ›¿æ¢çš„åŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯åœ¨æœ¬åœ°å¼€äº†ä¸€ä¸ªæœåŠ¡ï¼Œç„¶åèµ·åˆ°äº†å¯ä»¥æ›¿æ¢è¯·æ±‚æ–‡ä»¶çš„ä¸­é—´ä»¶çš„ä½œç”¨ã€‚\n\nä½¿ç”¨æ–¹æ³•ï¼š\n\n* å¼€å¯ charles è½¯ä»¶\n\n* æ‰‹æœºä¸ç”µè„‘åœ¨ wifi ä¸‹\n\n* æ‰‹æœºè®¾ç½®ä»£ç†\n\nè¿™é‡Œè¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå¦‚æœéœ€è¦ç›‘å¬æ‰‹æœºçš„ https è¯·æ±‚ï¼Œéœ€è¦ç»™æ‰‹æœºå®‰è£… charles è¯ä¹¦ã€‚\n\n## whistle\n\n> whistle is a cross-platform web debugging tool based on Node.js\n\nwhistleåŸºæœ¬ä¸Šè¦†ç›–äº†æ‰€æœ‰æŠ“åŒ…è°ƒè¯•ä»£ç†å¯ä»¥å®ç°çš„åŠŸèƒ½ï¼Œå®ƒçš„æ¨ªå‘å¯¹æ¯”å·¥å…·è¿˜æœ‰ [spy-debugger](https://github.com/wuchangming/spy-debugger)ã€‚\n\næ‰€ä»¥æ—¢ç„¶ whistle å¯ä»¥ä»£æ›¿ Eruda å’Œ charlesï¼ˆå¤ªé‡ï¼‰ ï¼Œé‚£æˆ‘ä»¬å°±æ²¡æœ‰å¿…è¦ä½¿ç”¨å®ƒä»¬äº†ã€‚\n\nwhistle çš„åŠŸèƒ½å¾ˆå¼ºå¤§ï¼š\n\n* Weinre\n\n* Log\n\n    Log ä¸»è¦æ˜¯ä¸ºäº†æŠŠæ§åˆ¶å°æ‰“å°çš„ä¿¡æ¯å±•ç¤ºå‡ºæ¥ï¼Œè§„åˆ™é…ç½®ä¹Ÿå¾ˆç®€å•\n\n    > xx.yy.com log://xx\n    \n* proxy\n\n    ä»£ç†çš„æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œåœ¨ whistle rules é‡Œé¢é…ç½®éœ€è¦ä»£ç†çš„ç½‘å€ï¼Œç„¶åç”¨è§„åˆ™æ¥è½¬åˆ°çº¿ä¸‹\n\n    > pattern http://host:port/xxx\n\n## Safari ä¸ iphone\n\nå…¶å®ï¼Œä¸Šé¢æ‰€è®²çš„æŠ“åŒ…è°ƒè¯•ä»£ç†æœ‰ä¸€ä¸ªå¾ˆå¤§çš„ç¼ºç‚¹ï¼Œé‚£å°±æ˜¯æ— æ³• debug jsã€‚åœ¨ iphone æœºå‹ä¸‹ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†è§£å†³æ–¹æ¡ˆã€‚\n\nä½¿ç”¨æ–¹æ³•ï¼š\n\n* Mac Safari\n\n* iphone Safari\n\n* æ•°æ®çº¿\n\n## Chrome ä¸ Android\n\nå½“ç„¶ï¼Œåœ¨ android æœºå‹ä¸‹ï¼Œä¹Ÿæœ‰ç›¸å¯¹åº”çš„è§£å†³æ–¹æ¡ˆã€‚\n\nä½¿ç”¨æ–¹æ³•ï¼š\n\n* PC Chrome\n\n* Android Chrome\n\n* æ•°æ®çº¿\n\n* ç¿»å¢™\n\nåœ¨ä½¿ç”¨è¿™ç§è°ƒè¯•æ–¹æ³•çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸€äº›é—®é¢˜\n\n* inspect åé¡µé¢æ˜¾ç¤ºç©ºç™½\n\n    è§£å†³æ–¹æ¡ˆï¼šåŸå› æ˜¯è¢«å¢™äº†ï¼Œæ­¤æœåŠ¡éœ€è¦è¿æ¥è°·æ­Œçš„æœåŠ¡å™¨ï¼Œè§£å†³æ–¹æ³•æ˜¯ç¿»å¢™ï¼Œä¸€èˆ¬åªéœ€ç¬¬ä¸€æ¬¡ inspect æ—¶ç¿»ï¼Œä¹‹åä¼šç¼“å­˜åœ¨æœ¬åœ°ã€‚\n\n* inspect é¡µé¢æ˜¾ç¤º HTTP/1.1 404 Not Found\n\n    è§£å†³æ–¹æ¡ˆï¼šåŸå› æ˜¯å› ä¸ºè¿œç¨‹çš„æµè§ˆå™¨ï¼ˆæ‰‹æœºï¼‰ç‰ˆæœ¬æ¯”å®¢æˆ·ç«¯ï¼ˆç”µè„‘ï¼‰è¦æ–°ï¼Œéœ€è¦åœ¨ chrome://inspect/#devices ä¸‹ï¼Œä½¿ç”¨ inspect fallback è¿›è¡Œç›‘å¬ã€‚\n\n> `Safari ä¸ iphone` `Chrome ä¸ Android` ä¸èƒ½åœ¨æ‰‹æœºçš„å…¶ä»–æµè§ˆå™¨å’Œ App webview ä¸­ä½¿ç”¨ï¼Œè¿™å¯èƒ½ä¼šè®©æˆ‘ä»¬åœ¨è°ƒè¯•ä¸€äº›ç‰¹å®šæµè§ˆå™¨é—®é¢˜ä¸Šæ²¡æœ‰è§£å†³é€”å¾„ï¼Œè¿™æ˜¯å°±éœ€è¦æ­é…ä¸€äº›å…¶ä»–æ‰‹æ®µã€‚æ¯”å¦‚ æœ¬åœ°ä»£ç† + try catch\n\n## æ€»ç»“\n\n* `Eruda` `charles` `whistle` åœ¨è§£å†³é—®é¢˜æ—¶ç”¨åˆ°çš„è¾ƒå¤š\n\n* `Safari ä¸ iphone` `Chrome ä¸ Android` åœ¨å‘ç°é—®é¢˜æ—¶ç”¨åˆ°çš„è¾ƒå¤š\n\n* å¦‚æœé—®é¢˜å‘ç”Ÿåœ¨ç‰¹å®šæµè§ˆå™¨ä¸Šï¼Œå¯ä»¥æ­é…æœ¬åœ°ä»£ç†( whistle ç­‰) + try catch å®šä½ bug\n\n> è¿™ä¸ªä¸–ç•Œå°±æ˜¯ä¸è®²é“ç†",
      "data": {
        "title": "ç§»åŠ¨ç«¯è°ƒè¯•æ€»ç»“",
        "date": "Invalid date",
        "tags": [
          "blog"
        ],
        "published": true,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "2018-9-1-mobile-debug"
    },
    {
      "content": "\n\nåœ¨ä¸Šä¸€ç¯‡æ€§èƒ½åˆ†ææ€»ç»“ä¸­ï¼Œæˆ‘ä»¬ä» API çš„ç»´åº¦é˜è¿°äº†ç”¨æˆ·ä»è¾“å…¥ URL åˆ°é¡µé¢åŠ è½½å®Œæˆæ‰€ç»å†äº†ä»€ä¹ˆï¼Œè‡ªç„¶è€Œç„¶çš„ï¼Œæˆ‘ä»¬æƒ³ä»æµè§ˆå™¨çš„ç»´æŠ¤å»ç†è§£ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ã€‚\n\næˆ‘ä»¬æ¥çœ‹çœ‹å¼€å§‹è§£æ DOM æ ‘ï¼ˆdomingï¼‰åçš„æ­¥éª¤ã€‚\n\nåœ¨æˆ‘ä»¬ä¸‹è½½äº†æ–‡æ¡£ä¹‹åï¼Œæµè§ˆå™¨å°±å¼€å§‹è§£æ DOM æ ‘ï¼Œåœ¨è§£æ DOM æ ‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ç”¨æ¸²æŸ“å¼•æ“ä¸­çš„è§£æå™¨ã€‚\n\n## è§£æå™¨\n\nè§£æå™¨åˆ†ä¸º `è¯æ³•åˆ†æå™¨` å’Œ `è¯­æ³•åˆ†æå™¨` ä¸¤ä¸ªç»„ä»¶ã€‚\n\n* è¯æ³•åˆ†æå™¨\n\n    è¯æ³•åˆ†æå™¨è´Ÿè´£å°†è¾“å…¥çš„å†…å®¹åˆ†è§£ä¸ºä¸€ä¸ªä¸ªæœ‰æ•ˆçš„æ ‡è®°\n\n* è¯­æ³•åˆ†æå™¨\n\n    è¯­æ³•åˆ†æå™¨æ ¹æ®å½“å‰è¯­è¨€çš„è¯­è¨€æ¥å°†æ ‡è®°æ„å»ºä¸ºè§£ææ ‘ã€‚\n\n\n\n",
      "data": {
        "title": "å‰ç«¯æ€§èƒ½åˆ†ææ€»ç»“ï¼ˆäºŒï¼‰",
        "date": "Invalid date",
        "tags": [
          "blog"
        ],
        "published": true,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "2018-9-27-bowser"
    },
    {
      "content": "```javascript\nconst requestPool = (urls, num, callback) => {\n    const urlsPool = [...urls];\n    let pendPool = [];\n\n    const refresh = () => {\n        if (urlsPool.length) {\n            const url = urlsPool.pop();\n            requestHandle(url);\n        } else {\n            callback();\n        }\n    }\n\n    const requestHandle = async (url) => {\n        const key = Symbol(url);\n\n        pendPool.push(key);\n        const data = await fetch(url);\n        pendPool.filter((v) => {\n            return v !== key\n        });\n        refresh();\n\n        return data;\n    }\n\n    const limit = Math.min(num, urlsPool.length);\n\n    for (let i = 0; i < limit; i++) {\n        refresh();\n    }\n}\n```",
      "data": {
        "title": "å®ç° js è¯·æ±‚å¹¶å‘æ§åˆ¶",
        "date": "2019-05-13 11:34:23",
        "tags": [],
        "published": true,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "shi-xian-js-qing-qiu-bing-fa-kong-zhi"
    },
    {
      "content": "åœ¨ js ä¸­æ‰€æœ‰æ•°å­—éƒ½æ˜¯ä»¥64ä½æµ®ç‚¹æ•°å½¢å¼å­˜å‚¨çš„\n\n64 ä½æµ®ç‚¹æ•°åœ¨å†…å­˜ä¸­è¡¨ç¤ºä¸ºï¼š æœ€é«˜ä¸€ä½ `ç¬¦å·ä½`ï¼Œ 11 ä½ `æŒ‡æ•°`ï¼Œ 52ä½`æœ‰æ•ˆæ•°å­—`ã€‚\n\nå› ä¸ºä½¿ç”¨ç§‘å­¦è®¡æ•°æ³•ï¼Œç¬¦å·ä½å†³å®šäº†ä¸€ä¸ªæ•°çš„æ­£è´Ÿï¼ŒæŒ‡æ•°éƒ¨åˆ†å†³å®šäº†æ•°å€¼çš„å¤§å°ï¼Œå°æ•°éƒ¨åˆ†ï¼ˆæœ‰æ•ˆæ•°å­—ï¼‰å†³å®šäº†æ•°å€¼çš„ç²¾åº¦ã€‚\n\næœ€é«˜ä½æˆ‘ä»¬ç”¨ 0 è¡¨ç¤ºæ­£æ•°ï¼Œç”¨ 1 è¡¨ç¤ºè´Ÿæ•°\n\nè¿™é‡Œçš„æŒ‡æ•°ä¸€å…±11ä¸ªæ¯”ç‰¹ä½ï¼Œä½†æ˜¯ç§‘å­¦è®¡æ•°æ³•ä¸­æŒ‡æ•°å¯ä»¥æ˜¯è´Ÿæ•°ï¼Œæ‰€ä»¥å°†å…¶è½¬ä¸º10è¿›åˆ¶æ•°æ—¶ï¼Œ0 - 1022 è¡¨ç¤ºè´Ÿæ•°ï¼Œ1024-2047è¡¨ç¤ºæ­£æ•°ã€‚\n\nå› ä¸ºæœ‰æ•ˆæ•°å­—ç¬¬ä¸€ä½å¿…ç„¶æ˜¯ 1 ï¼Œè¿™ä¸€ä½ä¸ä¿å­˜åœ¨ 64 ä½æµ®ç‚¹æ•°ä¸­ã€‚å°æ•°éƒ¨åˆ†æœ€é•¿æ˜¯52ä½ï¼Œæ‰€ä»¥ js æä¾›çš„æœ‰æ•ˆæ•°å­—æœ€é•¿ä¸º 53 ä¸ªäºŒè¿›åˆ¶ä½ï¼ˆ52 + æœ‰æ•ˆæ•°å­—ç¬¬ä¸€ä½çš„ 1ï¼‰ã€‚æœ‰äººä¼šè¯´ç¬¬ä¸€ä½ä¸æ˜¯åªèƒ½æ˜¯ 1 å—ï¼Ÿ é‚£ä¸èƒ½å•çº¯çš„ç®—æ˜¯ 53 ä½ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥æŒªåŠ¨æŒ‡æ•°ä½è°ƒæ•´ï¼Œæ‰€ä»¥æ˜¯ 53 ä½ã€‚\n\næ‰€ä»¥ æˆ‘ä»¬åœ¨è¿™é‡Œå¯ä»¥æ¨å‡ºï¼š\n\n* js çš„å®‰å…¨æ•´æ•°èŒƒå›´ä¸ºæ­£è´Ÿ 2çš„53æ¬¡æ–¹ï¼Œæœ€å¤§æœ€å°å€¼æ˜¯æ­£è´Ÿ 2çš„53æ¬¡æ–¹ - 1ï¼Œç”±äºæŒ‡æ•°ä¸ºä¸€ä½å¯ä»¥ç†è§£ä¸ºæ­£è´Ÿï¼Œæ‰€ä»¥ js è¡¨ç¤ºæ•°æœ€å¤§è¡¨ç¤ºåˆ° 2 çš„ 10 æ¬¡æ–¹ - 1ï¼Œ å†å¤§çš„æ•°å°±æ˜¯ js ä¸­çš„ Infinity äº†ã€‚\n\n* å¦‚æœæ˜¯10è¿›åˆ¶çš„æ•°å­— `1`ï¼Œé‚£ä¹ˆå®ƒçš„æµ®ç‚¹æ•°ç¬¬ä¸€ä½æ˜¯ 0ï¼ŒæŒ‡æ•°ä½æ˜¯1023ï¼Œå°æ•°ä½å…¨éƒ¨æ˜¯0 ï¼ˆåº”ä¸º 1 æ˜¯ç§‘å­¦è®¡æ•°æ³•ç¬¬ä¸€ä½æ‰€ä»¥çœç•¥äº†ï¼‰\n\n* å› ä¸º `2^53=9007199254740992`ï¼Œèƒ½å¤Ÿè¡¨ç¤ºè¿™ä¹ˆå¤šçš„åè¿›åˆ¶æ•°ï¼Œå…± 16 ä½ï¼Œè¿™ä¹Ÿæ˜¯ JS æœ€å¤šèƒ½å¤Ÿè¡¨ç¤ºçš„ç²¾åº¦ã€‚æ‰€ä»¥ x = 0.1 èƒ½å¤Ÿå¾—åˆ° 0.1 ,å› ä¸º0.1ï¼ˆ52 ä½äºŒè¿›åˆ¶ä¸º `0.00011001100110011001100110011001100110011001100110011010`ï¼‰åœ¨ä¼ ç»™ x çš„æ—¶å€™ï¼Œåšäº†ç²¾åº¦è¿ç®—ï¼Œè¶…è¿‡çš„ä¼šè‡ªåŠ¨å‡‘æ•´ã€‚\n\n* ä½†æ˜¯å› ä¸ºè¿ç®—è¿˜æ˜¯äºŒè¿›åˆ¶è¿ç®—ï¼Œæ‰€ä»¥äºŒè¿›åˆ¶ 0.1 åŠ  äºŒè¿›åˆ¶ 0.2 å°±ä¼šå¾—åˆ°ç»å…¸çš„ `0.30000000000000004`ï¼Œè¿™ä¹Ÿå°±æ˜¯åšå®¢é¢˜ç›®æ‰€è¯´çš„è¿ç®—ç²¾åº¦é—®é¢˜ã€‚æ•´æ•°çš„ç²¾åº¦é—®é¢˜åŒæ ·å­˜åœ¨ï¼Œå› ä¸ºåœ¨æ­£è´Ÿ 2 çš„ 53 æ¬¡æ–¹ä¹‹å¤–çš„æ•°å·²ç»æ²¡æœ‰äº†è¶³å¤Ÿçš„æ¯”ç‰¹ä½ä¿å­˜ï¼Œæ‰€ä»¥ä¼šè¿›è¡Œå‡‘æ•´ä¿å­˜ï¼Œè¿™æ ·çš„æ•°å­—å°±ä¼šæœ‰ç²¾åº¦é—®é¢˜ã€‚\n\nå½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿæœ‰ä¸€äº›è§£å†³æ–¹æ¡ˆï¼š\n\næ•°æ®å±•ç¤ºç±»çš„æ•°å­—æˆ‘ä»¬å¯ä»¥ç›´æ¥é‡‡ç”¨ 12 ä½ç²¾åº¦æ¥å‡‘æ•´å¤„ç†ã€‚\n\nè¿ç®—ç±»çš„è¯ï¼Œå¯ä»¥å…ˆå°†å°æ•°è½¬æˆæ•´æ•°å†è¿ç®—ã€‚å½“ç„¶é‡åˆ°ä¸€äº›æ•°å­—ç²¾åº¦å¤§çš„æ•°å­—æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ä¸€äº›è¾ƒä¸ºæˆç†Ÿçš„è§£å†³åº“ã€‚\nè¿™äº›å¤„ç†è¾ƒå¤§æ•°å­—çš„åº“ï¼ŒåŸç†æ˜¯å…ˆå°†å…¶è½¬ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åè‡ªå·±å®ç°è¿ç®—é€»è¾‘ã€‚å¦‚ `D.js`ã€‚\n\nå‚è€ƒèµ„æ–™ï¼š\n\n[ä¸¤åˆ†é’Ÿè§£æƒ‘ JS å°æ•°è®¡ç®—ç²¾åº¦é—®é¢˜](https://juejin.im/entry/595f52356fb9a06bbd6f80c5)\n\n[JavaScript æµ®ç‚¹æ•°è¿ç®—çš„ç²¾åº¦é—®é¢˜](https://www.html.cn/archives/7340)\n\n[JavaScript é‡Œæœ€å¤§çš„å®‰å…¨çš„æ•´æ•°ä¸ºä»€ä¹ˆæ˜¯2çš„53æ¬¡æ–¹å‡ä¸€ï¼Ÿ](https://www.zhihu.com/question/29010688)\n\n[JavaScript æµ®ç‚¹æ•°é™·é˜±åŠè§£æ³•](https://github.com/camsong/blog/issues/9)\n\n[Here is what you need to know about JavaScriptâ€™s Number type](https://blog.angularindepth.com/javascripts-number-type-8d59199db1b6)\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
      "data": {
        "title": "ç†è§£ js æµ®ç‚¹æ•°è¿ç®—ç²¾åº¦é—®é¢˜",
        "date": "2019-05-10 14:55:21",
        "tags": [],
        "published": true,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "li-jie-js-fu-dian-shu-yun-suan-jing-du-wen-ti"
    },
    {
      "content": "å¯¹äºå¼±ç±»å‹è¯­è¨€ï¼Œæˆ‘ä»¬ä¼šç»å¸¸é‡åˆ°ç±»å‹è½¬æ¢çš„æƒ…æ™¯ï¼Œ å¦‚æœæä¸æ‡‚åŸç†ï¼Œä¼šåœ¨é‡åˆ°ç±»å‹è½¬æ¢çš„æ—¶å€™åªèƒ½å‡­å€Ÿè¿‡å¾€çš„ç»éªŒå¤„ç†ï¼Œä½†å¿ƒé‡Œè¿˜æ˜¯æ²¡æœ‰ä¸€ä¸ªæ¸…æ™°çš„è®¤çŸ¥ã€‚\n\njs çš„ç±»å‹è½¬æ¢å¤šå‘ç”Ÿåœ¨ `ç®—æ•°è¿ç®—ç¬¦`ï¼Œ`å…³ç³»è¿ç®—ç¬¦`ï¼Œ`åˆ¤æ–­è¯­å¥` ä¸­ï¼Œåœ¨è¿™äº›åœºæ™¯ä¸­ï¼Œç±»å‹ä¼šæŒ‰ç…§ç‰¹å®šçš„è§„åˆ™ï¼Œè¿›è¡Œç±»å‹è½¬æ¢ã€‚æˆ‘ä»¬æ¥è¯´è¯´è¿™äº›è§„åˆ™ï¼š\n\né¦–å…ˆåœ¨ç®—æ•°è¿ç®—ç¬¦ä¸­ï¼Œé™¤äº† + å·ä»¥å¤–ï¼Œå…¶ä»–çš„å¦‚ - * / ï¼Œéƒ½éœ€è¦å°†è¿ç®—ç¬¦ä¸¤è¾¹çš„ç±»å‹è½¬æ¢ä¸º Numberï¼Œjs å¼•æ“é€šè¿‡ ToNumber æ–¹æ³•æ¥è¿›è¡Œç±»å‹è½¬æ¢ã€‚\n\nå¦‚æœç®—æ•°è¿ç®—ç¬¦æ˜¯ + çš„è¯ï¼Œå¦‚æœæœ‰å¤æ‚ç±»å‹ï¼Œæˆ‘ä»¬å…ˆå°†å…¶è½¬æ¢ä¸ºç®€å•ç±»å‹ï¼Œåœ¨ç®€å•ç±»å‹ä¸­ï¼ˆnull, undefined, boolean,string,numberï¼‰, å¦‚æœå­˜åœ¨ stringï¼Œæˆ‘ä»¬å°†ç®—æ•°è¿ç®—ç¬¦ä¸¤è¾¹è½¬æ¢ä¸º string å¯¹å¾…ã€‚å¦åˆ™ï¼Œå°†ç±»å‹å‘ number è½¬æ¢ã€‚\n\nå…¶æ¬¡æ˜¯å…³ç³»è¿ç®—ç¬¦ï¼Œæˆ‘ä»¬å°†è¿ç®—ç¬¦ä¸¤è¾¹è½¬æ¢ä¸ºåŸºæœ¬ç±»å‹åï¼Œå¦‚æœä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯æ•°å€¼ï¼Œåˆ™è¿›è¡Œæ•°å€¼æ¯”è¾ƒï¼Œå¦‚æœä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™è¿›è¡ŒæŒ‰ä½æ¯”è¾ƒã€‚å¦‚æœæ“ä½œæ•°æœ‰æ•°å€¼ï¼Œåˆ™è¿›è¡Œå¦ä¸€æ“ä½œæ•°æ•°å€¼è½¬æ¢ã€‚å› ä¸ºå¯èƒ½ä¼šæœ‰å­—ç¬¦ä¸²ä¸æ•°å€¼æ¯”è¾ƒçš„æƒ…å†µï¼Œå­—ç¬¦ä¸²è½¬æ¢ä¸º NaNï¼ŒNaN ä¸æ•°å­—æ¯”è¾ƒæ—¶ï¼Œæ€»æ˜¯è¿”å› false ã€‚\n\nè¿™é‡Œæˆ‘ä»¬å†è®²ä¸€ä¸‹ == ã€‚åŒç­‰è¿ç®—ç¬¦åˆ¤æ–­ç¨æ˜¾å¤æ‚ï¼Œå¦‚æœç±»å‹ç›¸ç­‰ï¼Œåˆ™ç›´æ¥æ¯”è¾ƒï¼Œå¤æ‚ç±»å‹éœ€è¦çœ‹å¼•ç”¨åœ°å€æ˜¯å¦ç›¸åŒã€‚å¦‚æœç±»å‹ä¸ç›¸ç­‰ï¼Œå¦‚æœæœ‰å¤æ‚ç±»å‹ï¼Œåˆ™å…ˆè¿›è¡Œæ‹†ç®±æ“ä½œï¼Œè½¬æ¢ä¸ºåŸºæœ¬ç±»å‹ï¼Œæ¥ç€å°±æˆäº†åŸºæœ¬ç±»å‹çš„æ¯”è¾ƒäº†ã€‚ç¬¬ä¸€ç§æ˜¯æ•°å­—å’Œå­—ç¬¦ä¹‹é—´çš„æ¯”è¾ƒï¼Œå¦‚æœå·¦æ“ä½œæ•°ä¸­æ˜¯æ•°å­—ï¼Œåˆ™å°†å¦ä¸€æ“ä½œæ•°è½¬æ¢ä¸ºæ•°å­—ï¼Œå¦‚æœæ˜¯å­—ç¬¦ï¼Œåˆ™è‡ªå·±è½¬ä¸ºæ•°å­—ã€‚ç¬¬äºŒç§æ˜¯å¦‚æœä¸æ˜¯å­—ç¬¦å’Œæ•°å­—çš„æ¯”è¾ƒï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªä¸ºbooleanï¼Œåˆ™å°†booleanè½¬æ¢ä¸ºæ•°å­—ã€‚ç¬¬ä¸‰ç§ï¼Œå¦‚æœä¸¤ä¸ªä¸ºnullæˆ–è€…undefined,åˆ™è¿”å›trueï¼Œå½“ç„¶å¦‚æœåªæœ‰ä¸€ä¸ªï¼Œé‚£å°±ä¸è¯´äº†ï¼Œä¸è¦è¿·ç³Šäº†ã€‚è¯¦ç»†å‚è§ï¼š\n\n[JavaScriptéšå¼è½¬æ¢ä¸æ‹†ç®±](https://github.com/ck18781145809/blog/issues/2)\n\nè¿™é‡Œè¿˜æœ‰å‡ é“ç»ƒä¹ é¢˜ï¼Œå¯ä»¥è¯•è¯•çœ‹ï¼š\n\n[å‰ç«¯è¿›é˜¶ç³»åˆ—ï¼ˆç¬¬3æœŸï¼‰ï¼šå¸¸è§çš„é¢è¯•é¢˜ â€” éšå¼ç±»å‹è½¬æ¢](https://www.hankewins.com/blog/%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6%E7%B3%BB%E5%88%97%EF%BC%88%E7%AC%AC3%E6%9C%9F%EF%BC%89%EF%BC%9A%E5%B8%B8%E8%A7%81%E7%9A%84%E9%9D%A2%E8%AF%95%E9%A2%98-%E2%80%94-%E9%9A%90%E5%BC%8F%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/)\n\n\n\n\n\n\n",
      "data": {
        "title": "js éšå¼è½¬æ¢",
        "date": "2019-05-08 21:46:18",
        "tags": [],
        "published": true,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "js-yin-shi-zhuan-huan"
    },
    {
      "content": "```javascript\n\t\t(function() {\n        var root = this;\n\n        var generateName = (function () {\n            var prefix = 0;\n\n            return function(descriptionStr){\n                prefix ++;\n                return '@@' + descriptionStr + '_' + prefix;\n            }\n        })()\n\n        var symbolPoyfill = function (description) {\n            if (root instanceof symbolPoyfill) throw new TypeError('symbol is not a constructor');\n\n            var descriptionStr = description == undefined ? undefined : String(description);\n\n            var symbol = Object.create({\n                toString: function() {\n                    return this.__Description__;\n                },\n                valueOf: function() {\n                    return this;\n                }\n            });\n\n            Object.defineProperties(symbol, {\n                '__Description__' : {\n                    value: generateName(descriptionStr),\n                    waritable: false,\n                    enumerable: false,\n                    configurable: false,\n                }\n            });\n\n            return symbol;\n        }\n\n        var forMap = {};\n\n        Object.defineProperties(symbolPoyfill, {\n            'for': {\n                value: function(key) {\n                    forMap[key] ? forMap[key] : forMap[descString] = symbolPoyfill(key)\n                },\n                waritable: true,\n                enumerable: false,\n                configurable: true\n            },\n            'keyFor': {\n                value: function(symbol) {\n                    for (var key in forMap) {\n                        if (forMap[key] === symbol) return key;\n                    }\n                },\n                waritable: true,\n                enumerable: false,\n                configurable: true\n            }\n        });\n\n\t\t\t\t\troot.SymbolPolyfill = symbolPoyfill;\n\t\t\t}\n\t\t)()\n```",
      "data": {
        "title": "å®ç° symbol Polyfill",
        "date": "2019-05-07 18:07:28",
        "tags": [
          "blog"
        ],
        "published": true,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "shi-xian-symbol-polyfill"
    },
    {
      "content": "è¿™æ˜¯å…³äºçš„é¡µé¢ï¼Œå¯ä»¥åœ¨è¿™é‡Œå‘ä¸–ç•Œä»‹ç»ä½ ï¼\n",
      "data": {
        "title": "å…³äº",
        "date": "2019-01-25 19:09:48",
        "tags": [],
        "published": true,
        "hideInList": true,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "about"
    },
    {
      "content": "```javascript\n\n    function Promise (executor) {\n\n        let _this = this,\n            _this.status = 'pending',\n            _this.value = undefined,\n            _this.reason = undefined,\n            _this.onResolvedCallbacks = [],\n            _this.onRejectedCallbacks = [];\n\n        function resolve (value) {\n            if (_this.status === 'pending') {\n                _this.status = 'resolved';\n                _this.value = value;\n\n                _this.onResolvedCallbacks.forEach(function(fn){\n                    fn();\n                });\n            }\n        };\n\n        function reject (reason) {\n            if (_this.status === 'pending') {\n                _this.status = 'reject';\n                _this.value = reason;\n\n                _this.onRejectedCallbacks.forEach(function(fn){\n                    fn();\n                });\n            }\n        };\n\n        try {\n            executor(resolve,reject);\n        } catch (e) {\n            reject(e);\n        }\n    }\n    \n    Promise.prototype.then = function(onFulfilled, onRejected) {\n\n        type onFulfilled === 'function' ? onFulfilled : function(value) {\n            return value;\n        }\n\n        type onRejected === 'function' ? onRejected : function(err) {\n            throw err;\n        }\n\n        let _this = this;\n        let promise2;\n\n        if (_this.status = 'pending') {\n            promise2 = new promise (function(resolve, reject) {\n                _this.onResolvedCallbacks.push(function(){\n                           \n                    try {\n                        let x = onFulfilled(_this.value);\n                        resolve(x);\n                    } catch (e) {\n                        reject(e);\n                    }\n                });\n                _this.onRejectedCallbacks.push(function(){\n\n                    try {\n                        let x = onRejected(_this.reason);\n                        resolve(x);\n                    } catch (e) {\n                        reject(e);\n                    }\n                });\n            }\n        }\n\n        if (_this.status = 'resolved') {\n\n            let x = onFulfilled(_this.value);\n            promise2 = new promise (function(resolve, reject) {\n                try {\n                    resolve(x);\n                } catch (e) {\n                    reject(e);\n                }\n            })\n        }\n\n        if (_this.status = 'rejected') {\n            \n            let x = onRejected(_this.reason);\n            promise2 = new promise (function(resolve, reject) {\n                try {\n                    resolve(x);\n                } catch (e) {\n                    reject(e);\n                }\n            })\n        }\n\n        return promise2;\n    }\n\n    Promise.prototype.resolve = function (value) {\n        return new Promise(function(resolve,reject){\n            resolve(value);\n        })\n    }\n\n    Promise.prototype.reject = function (reason) {\n        return new Promise(function(resolve,reject){\n            resolve(reason);\n        })\n    }\n\n    Promise.prototype.race = function (promises) {\n        return new Promise(function(resolve,reject){\n            for ( let i = 0; i < promises.length; i ++) {\n                promises[i].then(resolve,reject);\n            }\n        })\n    }\n\n    Promise.prototype.all = function (promises) {\n        return new Promise(function(resolve,reject){\n\n            let arr = [];\n            let i = 0; \n\n            function processData(index, y) {\n                arr[index] = y;\n                if (++index === promises.length) {\n                    resolve(arr);\n                }\n            }\n\n            for ( let i = 0; i < promises.length; i ++) {\n                promises[i].then(function(y){\n                    processData(i, y)\n                },reject);\n            }\n        })\n    }\n\n    module.exports = Promise\n```\n\n### å‚è€ƒèµ„æ–™\n\n[å¯èƒ½æ˜¯ç›®å‰æœ€æ˜“ç†è§£çš„æ‰‹å†™promise](https://juejin.im/post/5dc383bdf265da4d2d1f6b23)",
      "data": {
        "title": "æ‰‹å†™ä¸€ä¸ª promise",
        "date": "2019-01-25 09:56:02",
        "tags": [
          "blog"
        ],
        "published": true,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "2019-1-25-hand-promise"
    },
    {
      "content": "ğŸ‘  æ¬¢è¿ä½¿ç”¨ **Hve Notes** ï¼  \n\nGithub: [Hve Notes](https://github.com/hve-notes/hve-notes)  \né¡¹ç›®ä¸»é¡µ: [Hve Notes](http://hvenotes.fehey.com/)  \nç¤ºä¾‹ç½‘ç«™: [ç¤ºä¾‹ç½‘ç«™ä¸€](http://fehey.com/) [ç¤ºä¾‹ç½‘ç«™äºŒ](http://hve-notes.github.io)  \n\nâœï¸  **Hve Notes** ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ... \n\n## ç‰¹æ€§ğŸ‘‡\nğŸ“  ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ **Markdown** è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ  \n\nğŸŒ‰  ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡  \n\nğŸ·ï¸  ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„  \n\nğŸ“‹  ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•  \n\nğŸ’»  ä½ å¯ä»¥åœ¨ **ğ–¶ğ—‚ğ—‡ğ–½ğ—ˆğ—ğ—Œ** æˆ– **ğ–¬ğ–ºğ–¼ğ–®ğ–²** è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯  \n\nğŸŒ  ä½ å¯ä»¥ä½¿ç”¨ **ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ** æˆ– **Coding Pages** å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°  \n\nğŸ’¬  ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ [Gitalk](https://github.com/gitalk/gitalk) æˆ– [DisqusJS](https://github.com/SukkaW/DisqusJS) è¯„è®ºç³»ç»Ÿ  \n\nğŸ‡¬ğŸ‡§  ä½ å¯ä»¥ä½¿ç”¨**ä¸­æ–‡ç®€ä½“**æˆ–**è‹±è¯­**  \n\nğŸŒ  ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜  \n\n\nğŸŒ± å½“ç„¶ **Hve Notes** è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ğŸƒ\n\næœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´\n\nå°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼\n\nğŸ˜˜ Enjoy~\n",
      "data": {
        "title": "Hello Hve Notes",
        "date": "2018-12-12 00:00:00",
        "tags": [
          "HveNotes"
        ],
        "published": true,
        "hideInList": true,
        "feature": "/post-images/hello-hve-notes.png"
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "hello-hve-notes"
    },
    {
      "content": "\n\nå†™è¿™ç¯‡æ–‡ç« çš„ç›®çš„ï¼Œä¸»è¦æ˜¯ä¸ºäº†è®©è‡ªå·±å¯¹å­¦ä¹ åˆ°çš„çŸ¥è¯†è¿›è¡Œæç‚¼å’Œæ¢³ç†ï¼Œå¯¹äºå¯ä»¥åœ¨ç½‘ä¸Šæ‰¾åˆ°ç­”æ¡ˆçš„ä¸œè¥¿ï¼Œæ²¡å¿…è¦å†æ¬¡å†™å‡ºæ¥ã€‚\n\n## ä»€ä¹ˆæ˜¯ CSRF\n\ncross site request forgery , æ”»å‡»è€…è¯±å¯¼ç”¨æˆ·è¿›å…¥ç¬¬ä¸‰æ–¹ç½‘ç«™ï¼Œåœ¨ç¬¬ä¸‰æ–¹ç½‘ç«™ä¸­ï¼Œå‘è¢«æ”»å‡»ç½‘ç«™å‘é€è·¨ç«™è¯·æ±‚ï¼Œåˆ©ç”¨å—å®³è€…åœ¨è¢«æ”»å‡»ç½‘ç«™å·²ç»è·å–åˆ°çš„æ³¨å†Œå‡­è¯ï¼Œç»•è¿‡åå°éªŒè¯ï¼Œå†’å……ç”¨æˆ·å¯¹è¢«æ”»å‡»ç½‘ç«™æ‰§è¡ŒæŸç§æ“ä½œçš„ç›®çš„ã€‚\n\næ”»å‡»æµç¨‹ï¼š\n\n- ç”¨æˆ·ç™»é™†è¢«æ”»å‡»ç½‘ç«™ a.com ï¼Œå¹¶ä¿ç•™äº†ç™»é™†å‡­è¯ã€‚\n\n- æ”»å‡»è€…è¯±å¯¼ç”¨æˆ·è®¿é—®äº†ç¬¬ä¸‰æ–¹ç½‘ç«™ b.com\n\n- æœŸé—´ç¬¬ä¸‰æ–¹ç½‘ç«™å‘è¢«æ”»å‡»ç½‘ç«™å‘é€äº† a.com?act=xxx,æµè§ˆå™¨é»˜è®¤æºå¸¦äº† a.com çš„ cookie\n\n- a.com æ¥åˆ°è¯·æ±‚ï¼Œå¹¶éªŒè¯ç™»é™†å‡­è¯ï¼Œè¯¯ä»¥ä¸ºæ˜¯ç”¨æˆ·å‘é€çš„è¯·æ±‚\n\n- a.com æ‰§è¡Œäº† a.com?act=xxx è¯·æ±‚\n\n- æ”»å‡»å®Œæˆï¼Œæ”»å‡»è€…å†’å……ç”¨æˆ·ï¼Œå®Œæˆäº†è¯·æ±‚æ‰§è¡Œ\n\n## æ”»å‡»ç±»å‹\n\n* GET è¯·æ±‚\n\n    å›¾ç‰‡è¯·æ±‚\n\n* POST è¯·æ±‚\n\n    è¡¨å•\n\n* é“¾æ¥\n\n    æ¶æ„é“¾æ¥ï¼Œè¯±å¯¼ç‚¹å‡»\n\n## CSRF ç‰¹ç‚¹\n\n* æ”»å‡»ä¸€èˆ¬å‘èµ·åœ¨ç¬¬ä¸‰æ–¹ç½‘ç«™ï¼Œè€Œä¸æ˜¯è¢«æ”»å‡»çš„ç½‘ç«™ã€‚è¢«æ”»å‡»çš„ç½‘ç«™æ— æ³•é˜²æ­¢æ”»å‡»å‘ç”Ÿã€‚\n\n* æ”»å‡»åˆ©ç”¨å—å®³è€…åœ¨è¢«æ”»å‡»ç½‘ç«™çš„ç™»å½•å‡­è¯ï¼Œå†’å……å—å®³è€…æäº¤æ“ä½œï¼›è€Œä¸æ˜¯ç›´æ¥çªƒå–æ•°æ®ã€‚\n\n* æ•´ä¸ªè¿‡ç¨‹æ”»å‡»è€…å¹¶ä¸èƒ½è·å–åˆ°å—å®³è€…çš„ç™»å½•å‡­è¯ï¼Œä»…ä»…æ˜¯â€œå†’ç”¨â€ã€‚\n\n* è·¨ç«™è¯·æ±‚å¯ä»¥ç”¨å„ç§æ–¹å¼ï¼šå›¾ç‰‡URLã€è¶…é“¾æ¥ã€CORSã€Formæäº¤ç­‰ç­‰ã€‚éƒ¨åˆ†è¯·æ±‚æ–¹å¼å¯ä»¥ç›´æ¥åµŒå…¥åœ¨ç¬¬ä¸‰æ–¹è®ºå›ã€æ–‡ç« ä¸­ï¼Œéš¾ä»¥è¿›è¡Œè¿½è¸ªã€‚\n\nCSRF å¤§å¤šå‘ç”Ÿåœ¨å¤–åŸŸæ¥è¿›è¡Œæ”»å‡»ï¼Œä½†æ˜¯å¦‚æœä¸»è¦å¯ä»¥è¢«æ½œå…¥ä¸Šé¢çš„ä¸‰ç§æ”»å‡»ç±»å‹ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥åœ¨æœ¬åŸŸè¿›è¡Œæ”»å‡»ï¼Œä¸”æ›´åŠ éš¾ä»¥é˜²å¾¡ã€‚\n\n## é˜²å¾¡\n\n- é¦–å…ˆå‘ç”Ÿåœ¨æœ¬åŸŸçš„æ”»å‡»ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥å¯¹æœ¬åŸŸçš„ç±»ä¼¼è¯„è®ºåŒºç­‰å¯ä»¥åµŒå…¥è¯·æ±‚å’Œé“¾æ¥çš„åœ°æ–¹è¿›è¡Œå¤„ç†ï¼Œé‡‡å–ç¦æ­¢å¤–é“¾æˆ–æç¤ºç­‰æ“ä½œã€‚\n\n- å¦‚æœæ”»å‡»å‘ç”Ÿåœ¨å¤–åŸŸï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ä»ä¸¤ä¸ªè§’åº¦æ¥æ€è€ƒé˜²å¾¡\n\n    * æ”»å‡»å‘ç”Ÿåœ¨å¤–åŸŸ\n\n        * åŒæºæ£€æµ‹\n\n            * Origin Header\n\n            * Referer Header\n\n        * Samesite Cookie\n\n    * æ”»å‡»è€…ä¸èƒ½è·å– cookie ï¼Œåªèƒ½å†’ç”¨\n\n        * CSRF Token\n\n        * åŒé‡CookieéªŒè¯\n\nå‚è€ƒèµ„æ–™ï¼š\n\n[ å‰ç«¯å®‰å…¨ç³»åˆ—ä¹‹äºŒï¼šå¦‚ä½•é˜²æ­¢CSRFæ”»å‡»ï¼Ÿ](https://segmentfault.com/a/1190000016659945)",
      "data": {
        "title": "å‰ç«¯å®‰å…¨ï¼ˆäºŒï¼‰CSRF é˜²å¾¡",
        "date": "2018-11-10 14:20:19",
        "tags": [
          "blog"
        ],
        "published": true,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "2018-11-10-csrf"
    },
    {
      "content": "\n\nä»Šå¤©å†™è¿™ä¹ˆä¸€ç¯‡æ–‡ç« ï¼Œå®Œå…¨æ˜¯å› ä¸ºè‡ªå·±å‰äº›æ—¥å­ç¢°åˆ°çš„ web å®‰å…¨é—®é¢˜ï¼Œè‡ªå·±æœ‰äº†äº›è®¸ç»å†ï¼Œæ‰€ä»¥å‡†å¤‡å†™ä¸‹æ¥ã€‚ç½‘ä¸Šæœ‰å¾ˆå¤šä¼˜ç§€çš„è®²è¿° web å®‰å…¨çš„æ–‡ç« ï¼Œå…¶ä¸­å°¤ä¸ºæ¨è[ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ](https://segmentfault.com/u/meituanjishutuandui)å†™çš„ç³»åˆ—æ–‡ç« ã€‚\n\nå½“ç„¶ï¼Œç½‘ä¸Šå·²æœ‰çš„ä¸œè¥¿å†é‡å†™ä¸€éæ¯«æ— æ„ä¹‰ï¼Œæ‰€ä»¥æˆ‘è®°å½•çš„ï¼Œåªæ˜¯åœ¨æˆ‘çœ‹æ¥éœ€è¦å†åº¦æç‚¼å’Œæ³¨æ„çš„åœ°æ–¹ã€‚\n\n## ä»€ä¹ˆ æ˜¯ XSS \n\n> Cross-Site Scriptingï¼ˆè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰ç®€ç§° XSSï¼Œæ˜¯ä¸€ç§ä»£ç æ³¨å…¥æ”»å‡»ã€‚æ”»å‡»è€…é€šè¿‡åœ¨ç›®æ ‡ç½‘ç«™ä¸Šæ³¨å…¥æ¶æ„è„šæœ¬ï¼Œä½¿ä¹‹åœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸Šè¿è¡Œã€‚åˆ©ç”¨è¿™äº›æ¶æ„è„šæœ¬ï¼Œæ”»å‡»è€…å¯è·å–ç”¨æˆ·çš„æ•æ„Ÿä¿¡æ¯å¦‚ Cookieã€SessionID ç­‰ï¼Œè¿›è€Œå±å®³æ•°æ®å®‰å…¨ã€‚\n\n## XSS çš„ç§ç±»\n\n|ç±»å‹|å­˜å‚¨åŒº|æ’å…¥ç‚¹|\n|---|---|---|\n|å­˜å‚¨å‹ XSS |åç«¯æ•°æ®åº“ |HTML|\n|åå°„å‹ XSS |URL    |HTML|\n|DOMå‹ XSS |åç«¯æ•°æ®åº“/å‰ç«¯å­˜å‚¨/URL    |å‰ç«¯ JavaScript|\n\n## XSS æ”»å‡»è¦ç´ \n\n* æ”»å‡»è€…æäº¤æ¶æ„ä»£ç \n\n* æµè§ˆå™¨æ‰§è¡Œæ¶æ„ä»£ç \n\n## XSS é˜²å¾¡\n\næˆ‘ä»¬å¯ä»¥ä» XSS æ”»å‡»è¦ç´ å’Œä»£ç å±‚é¢ä¸¤ä¸ªæ–¹é¢æ¥è€ƒè™‘é˜²å¾¡\n\n* ä»æ”»å‡»è¦ç´ é˜²å¾¡\n\n    * æ”»å‡»è€…æäº¤æ¶æ„ä»£ç \n\n    æ€è·¯ï¼šè¿™é‡Œèƒ½å¤Ÿä½¿ç”¨çš„æ–¹æ³•ï¼Œå°±æ˜¯`è¾“å…¥è¿‡æ»¤`ã€‚\n\n    æ–¹æ³•ï¼šä½†åœ¨è¿™é‡Œåšçš„è¯æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå‰ç«¯åšè¿‡æ»¤å¯ä»¥ç»•è¿‡ï¼Œåç«¯åšè¿‡æ»¤åˆæ— æ³•é¢„æµ‹å‰ç«¯å¦‚ä½•å±•ç°ï¼Œå½“ä½œ HTML è¿›è¡Œå±•ç¤ºå½“ç„¶æ²¡æœ‰é—®é¢˜ï¼Œä½†å¦‚æœå½“ä½œæ–‡æœ¬çš„è¯ï¼Œå°±ä¼šå‡ºç°ä¹±ç ã€‚\n\n    ä¹±ç é—®é¢˜å€’æ˜¯å¯ä»¥è§£å†³ï¼Œåœ¨å‰ç«¯ï¼Œåˆ©ç”¨åè½¬ä¹‰é‡æ–°å¤„ç†ã€‚\n\n    é‚£å¯ä»¥ç›´æ¥ä¸ä»æäº¤æ¶æ„ä»£ç è§’åº¦è¿›è¡Œé˜²å¾¡å—ï¼Ÿæ—¢ä¸ä½¿ç”¨è¾“å…¥è¿‡æ»¤ï¼Ÿ\n\n    * æµè§ˆå™¨æ‰§è¡Œæ¶æ„ä»£ç \n\n        ä»ä¸¤ä¸ªæ€è·¯æ¥è§£å†³ï¼š\n\n        * é˜²æ­¢ HTML ä¸­å‡ºç°æ³¨å…¥\n\n        * é˜²æ­¢ JavaScript æ‰§è¡Œæ—¶ï¼Œæ‰§è¡Œæ¶æ„ä»£ç \n\n        æ–¹æ³•ï¼š\n        \n        * åç«¯æ¨¡ç‰ˆæ¸²æŸ“æ”¹æˆçº¯å‰ç«¯ HTML æ¸²æŸ“ï¼ŒæŠŠä»£ç å’Œä¸šåŠ¡æ•°æ®åˆ†éš”å¼€ï¼Œæˆ‘ä»¬æ˜ç¡®çš„åœ¨æ’å…¥æ•°æ®é˜¶æ®µé€‰æ‹© HTML æ’å…¥æˆ–è€…æ–‡æœ¬æ’å…¥ã€‚ä½†è¿™æ ·è¿˜æ˜¯å­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼Œä¸€ä¸ªæ˜¯é¦–å±åŠ è½½é—®é¢˜ï¼Œä¸€ä¸ªæ˜¯ DOM XSS é¡»å•ç‹¬è§£å†³ã€‚\n\n        * HTML è½¬ä¹‰ï¼Œè¯´åˆ°åº•ï¼Œè¿˜æ˜¯è¿›è¡Œè¾“å…¥è¿‡æ»¤ã€‚\n\n    > ç”±æ­¤å¯ä»¥å¾—å‡ºï¼Œåœ¨ä¸èƒ½æ”¹å˜åç«¯æ¸²æŸ“çš„å‰æä¸‹ï¼Œè¾“å…¥è¿‡æ»¤æ˜¯æ— æ³•é¿å…çš„ã€‚å¦‚æœæ”¹ä¸ºå‰ç«¯æ¸²æŸ“ï¼Œåªéœ€å…³å¿ƒ DOM XSS å°±å¥½äº†ã€‚è‡³äº DOM XSSï¼Œåœ¨ä¸€äº›æœ¬åœ°å­˜å‚¨çš„åœºæ™¯ä¸‹ï¼Œè¿‡æ»¤è½¬ä¹‰ä¹Ÿæ— æ³•é¿å…ã€‚\n\n* ä»ä»£ç å±‚é¢è€ƒè™‘é˜²å¾¡\n\n    æˆ‘ä»¬å¯ä»¥ä»ä»£ç å±‚é¢æ¥é¢„å‘å’Œè­¦æƒ• XSS æ”»å‡»ã€‚\n\n    æˆ‘ä»¬éœ€è¦çŸ¥é“ XSS æ”»å‡»çš„æ¥æºã€‚\n\n    ç”±ä¸Šé¢çš„ XSS ç§ç±»å¯çŸ¥ï¼Œé€”å¾„å¤§æ¦‚æœ‰ä»¥ä¸‹è¿™äº›ã€‚\n\n    * ç”¨æˆ·çš„ UGC ä¿¡æ¯\n\n    * ç¬¬ä¸‰æ–¹çš„é“¾æ¥\n\n    * URL å‚æ•°\n\n    * POST å‚æ•°\n\n    * Referer ï¼ˆå¯èƒ½æ¥è‡ªä¸å¯ä¿¡çš„æ¥æºï¼‰\n\n    * Cookie ï¼ˆå¯èƒ½æ¥è‡ªå…¶ä»–å­åŸŸæ³¨å…¥ï¼‰\n\n    * HTML å±æ€§ï¼ˆhrefï¼Œsrcï¼Œstyleçš„background-image:urlå’Œexpression(...)ï¼‰\n\n    * onloadã€onerrorã€onclickã€locationã€onmouseover ç­‰äº‹ä»¶\n\n    > ä»£ç å±‚é¢è€ƒè™‘é˜²å¾¡æ˜¯è¦æ±‚å¼€å‘è€…åœ¨é‡åˆ°ä¸Šè¿°æƒ…å†µè¶³å¤Ÿçš„è­¦è§‰ï¼Œè€ƒè™‘æ­¤å¤„æ˜¯å¦ä¼šå‡ºç° XSS æ”»å‡»ï¼Œå¦‚æœä¼šå‡ºç°ï¼Œé‚£ä¹ˆè§£å†³æ–¹æ¡ˆè¿˜æ˜¯`æ”»å‡»è¦ç´ é˜²å¾¡`çš„è§£å†³æ–¹æ¡ˆã€‚\n\n* å…¶ä»–é˜²å¾¡\n\n    è¿™é‡Œåˆ—ä¸¾ä¸€äº›å…¶ä»–çš„é˜²å¾¡æ‰‹æ®µï¼Œå½“ç„¶ï¼Œè¿™äº›æ‰‹æ®µå¯èƒ½æ— æ³•åœ¨æ‰€æœ‰æƒ…å†µä¸‹è§£å†³é—®é¢˜ã€‚\n\n    * CSP\n\n    * è¾“å…¥å†…å®¹é•¿åº¦æ§åˆ¶\n\n    * HTTP-only Cookie\n\n    * éªŒè¯ç \n\n`å½“ç„¶ï¼Œä¸Šé¢æ‰€æœ‰çš„è€ƒè™‘åªæ˜¯å‡ºè‡ªå‰åç«¯æ•°æ®é€šä¿¡å®‰å…¨çš„å‰æä¸‹ï¼Œä½†æ˜¯ HTTPS ä¹Ÿä¸ä¸€å®šä¸‡æ— ä¸€å¤±`\n\n> æ—¶é—´å·²ç»æ¥åˆ°äº†ä¸‹åŠåœºï¼Œå‰©ä¸‹çš„åªæœ‰æ®‹é…·çš„ç™½åˆƒæˆ˜ã€‚\n\n\n\n\n",
      "data": {
        "title": "å‰ç«¯å®‰å…¨ï¼ˆä¸€ï¼‰XSS é˜²å¾¡",
        "date": "2018-11-07 14:14:36",
        "tags": [
          "blog"
        ],
        "published": true,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "2018-11-7-xss"
    },
    {
      "content": "\nåš Web é¡µé¢çš„ç§»åŠ¨ç«¯å¼€å‘çš„æ—¶å€™ï¼Œéœ€è¦å¯¹ç§»åŠ¨ç«¯è®¾å¤‡çš„å°ºå¯¸ï¼Œåˆ†è¾¨ç‡ï¼Œå±å¹•ç§ç±»è¿˜æœ‰å¦‚ä½•æœ€å¤§ç¨‹åº¦è¿˜åŸè®¾è®¡æ•ˆæœæœ‰æ¸…æ™°çš„è®¤è¯†ã€‚è¿™äº›çŸ¥è¯†ç½‘ä¸Šä¹Ÿæœ‰ï¼Œä½†å¤§å¤šéƒ½æœ‰äº›é”™è¯¯ï¼Œæ‰€ä»¥è‡ªå·±è®°\nå½•ä¸‹æ¥ï¼Œç•™ä½œå‚è€ƒä¸åˆ†äº«ã€‚\n\n## ä¸€èˆ¬æˆ‘ä»¬ä¼šé‡åˆ°è¿™å‡ ä¸ªé—®é¢˜ï¼š\n\n* chrome device æ¨¡å¼ä¸‹çš„æ•°å€¼çš„å•ä½\n* &lt;meta name='viewport' content='width=device-widthï¼Œinitial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=yes'> çš„ä½œç”¨\n* æ‰‹æœºåƒç´ å’Œ visual viewport çš„å…³ç³»\n\næˆ‘ä»¬éœ€è¦æ¸…æ¥šæœ‰å…³åƒç´ çš„å‡ ä¸ªæ¦‚å¿µï¼š\n\n* åˆ†è¾¨ç‡\n* è®¾å¤‡åƒç´ \n* è®¾å¤‡ç‹¬ç«‹åƒç´ \n* css åƒç´ \n* PPI\n* DPR\n\n### åˆ†è¾¨ç‡\n\næ³›æŒ‡é‡æµ‹æˆ–æ˜¾ç¤ºç³»ç»Ÿå¯¹ç»†èŠ‚çš„åˆ†è¾¨èƒ½åŠ›ï¼Œåˆ†è¾¨ç‡è¶Šé«˜è¶Šèƒ½è¡¨ç°å‡ºæ›´å¤šçš„ç»†èŠ‚ï¼Œä½†ç›¸å¯¹çš„ï¼Œå› ä¸ºè®°å½•çš„ä¿¡æ¯æ›´å¤šï¼Œæ–‡ä»¶ä¹Ÿå°±ä¼šè¶Šå¤§ã€‚\n\n![](http://121.42.215.169/blog_images/pixel.PNG)\n\n1920\\*1080ï¼ˆæ¨èï¼‰æ„å‘³ç€è¿™ä¸ªç”µè„‘åœ¨æ¨ªå‘ä¸Šè®¾ç½®äº† 1920 ä¸ªåƒç´ ï¼Œçºµå‘ä¸Šè®¾ç½®äº† 1080 ä¸ªåƒç´ ï¼Œå½“ç„¶ç”µè„‘ä¸Šçš„åˆ†è¾¨ç‡æ˜¯å¯ä»¥è°ƒèŠ‚çš„ï¼Œä½†åªæ˜¯æœ‰æ•ˆåƒç´ ä¸ªæ•°å‡å°‘äº†ã€‚\n\n### è®¾å¤‡åƒç´ \n\nè®¾å¤‡åƒç´ å³ physic pixelï¼Œå°±æ˜¯è®¾å¤‡çš„åƒç´ å¤§å°ã€‚æ¯”å¦‚ iPhone 6 Plus çš„ç‰©ç†åˆ†è¾¨ç‡ä¸º 1080\\*1920\n\n### è®¾å¤‡ç‹¬ç«‹åƒç´ \n\nä¹Ÿå«å¯†åº¦æ— å…³åƒç´ ï¼Œä»£è¡¨ç€å¯ä»¥ç”±ç¨‹åºä½¿ç”¨å¹¶æ§åˆ¶çš„è™šæ‹Ÿåƒç´ ï¼Œè®¾å¤‡è™šæ‹Ÿåƒç´ å’Œè®¾å¤‡åƒç´ ä¹‹é—´å­˜åœ¨ç€ä¸€å®šçš„å¯¹åº”å…³ç³»ã€‚è¿™ä¸ªåœ¨åé¢ä¼šè®²åˆ°ã€‚\n\n### css åƒç´ \n\nå‰ç«¯å·¥ç¨‹å¸ˆåœ¨ç¼–å†™ç½‘é¡µæ—¶ç”¨åˆ°çš„ css åƒç´ å•ä½ï¼Œæ˜¯æŠ½è±¡çš„ï¼Œä¸æ˜¯å®é™…å­˜åœ¨çš„ã€‚\n\n### PPI\n\n![](http://121.42.215.169/blog_images/ppi.png)\n\n### DPR\n\nå³device pixel route ï¼Œåœ¨åŒä¸€æ–¹å‘ä¸Šçš„è®¾å¤‡åƒç´ ä¸è®¾å¤‡ç‹¬ç«‹åƒç´ çš„æ¯”å€¼ã€‚å®ƒä¹Ÿæœ‰ä¸€ä¸ªåˆ«åå«åšscaleï¼Œåœ¨iPhoneé‡Œé¢çš„ scale æœ‰1x,2x,3xè€ŒAndroidé‡Œé¢å°±å¤šäº†ã€‚\næˆ‘ä»¬è¦çŸ¥é“åœ¨æ‰‹æœºç§»åŠ¨ç«¯çš„å‡ ä¸ªæ¦‚å¿µï¼š\n\n* visual viewport\n* layout viewport\n* ideal viewport\n\n### visual viewport\n\nè™šæ‹Ÿè§†å£ã€‚å®ƒæ˜¯æ‰‹æœºçš„é¡µé¢ç»˜åˆ¶åŒºï¼Œå¤§å°ä¸ä¸€ï¼Œä»¥è®¾å¤‡ç‹¬ç«‹åƒç´ ä¸ºå•ä½ã€‚\nè®¡ç®—æ–¹æ³•ï¼šdocument.documentElement.clientWidthï¼Œdocument.body.clientWidth(IE)\n\n### layout viewport\n\nå¸ƒå±€è§†å£ã€‚å®ƒæ˜¯æ‰‹æœºéœ€è¦å±•ç¤ºçš„é¡µé¢æ€»åŒºåŸŸã€‚å®ƒåœ¨ä¸åŒçš„æµè§ˆå™¨ä¸­ï¼Œå¤§å°ä¹Ÿæ˜¯ä¸åŒçš„\n   \n    Safari iPhone:980px\n    Opera:850px\n    Android Webkit:800px\n    IE:974px\nè®¡ç®—æ–¹æ³•ï¼šwindow.innerWidth\n\n### ideal viewport\n\nç†æƒ³è§†å£ã€‚ä¸€èˆ¬å½“æˆ‘ä»¬ä½¿ç”¨ &lt;meta name='viewport'  content='width=device-width'> æ—¶å¯ä»¥å¾—åˆ°ã€‚\n\n![](http://121.42.215.169/blog_images/visualviewport.jpg) ![](http://121.42.215.169/blog_images/layoutviewport.jpg)\n\n**å¦‚æœæˆ‘ä»¬æŠŠ viewport å½“åšæ‰“å¼€çš„é«˜å¾·åœ°å›¾ï¼Œé‚£ä¹ˆ visual viewportå°±æ˜¯æ‰“å¼€æ—¶æ˜¾ç¤ºçš„å±€éƒ¨åœ°å›¾ï¼Œlayout viewportå°±æ˜¯ç¼©å°åœ°å›¾åæ˜¾ç¤ºçš„æ€»åœ°å›¾ï¼Œ ideal viewport å°±æ˜¯æˆ‘ä»¬å°†æ€»åœ°å›¾çš„å®½åº¦\nå˜ä¸ºäº† visual viewport çš„å®½åº¦ã€‚**\n\næœ‰äº†è¿™äº›åŸºç¡€åï¼Œå†æ¥è§£å†³ä¸Šé¢çš„é—®é¢˜\n\n### é‚£æˆ‘ä»¬å¹³æ—¶ chrome ä¸‹çš„ device æ¨¡å¼ï¼Œå®ƒæ˜¯ä»€ä¹ˆåƒç´ å‘¢ï¼Ÿ\n\n![](http://121.42.215.169/blog_images/device.PNG)\n\nåˆ©ç”¨ä¸Šé¢è®¡ç®—visual viewport å’Œ layout viewport çš„æ–¹æ³•ï¼Œæˆ‘ä»¬è®¡ç®—å‡º device æ¨¡å¼çš„åƒç´ ä¸ visual viewportçš„åƒç´ ä¸€è‡´ï¼Œæ˜¯è®¾å¤‡ç‹¬ç«‹åƒç´ ï¼Œåœ¨æ•°å€¼ä¸Šç­‰äº css åƒç´ ã€‚\n\n![](http://121.42.215.169/blog_images/test.PNG)\n\n### ä¸Šé¢è®²è¿‡çš„ &lt;meta name='viewport' content='width=device-width'>ï¼Œå®ƒåœ¨å¸¸è§çš„å“åº”å¼é¡µé¢ä¸­åˆ°åº•èµ·ä»€ä¹ˆä½œç”¨ï¼Ÿ\n\nmeta viewport æœ€æ—©æ˜¯ç”±è‹¹æœå…¬å¸æå‡ºçš„ï¼Œåè¢« MSN å¼•ä¸ºè§„èŒƒï¼Œå…¶ä¸­:\n\n    width=device-width:è¡¨ç¤ºå®½åº¦æ˜¯è®¾å¤‡å±å¹•çš„å®½åº¦\n    initial-scale:è¡¨ç¤ºåˆå§‹çš„ç¼©æ”¾æ¯”ä¾‹\n    minimum-scale:è¡¨ç¤ºæœ€å°çš„ç¼©æ”¾æ¯”ä¾‹\n    maximum-scale:è¡¨ç¤ºæœ€å¤§çš„ç¼©æ”¾æ¯”ä¾‹\n    user-scalable:è¡¨ç¤ºç”¨æˆ·æ˜¯å¦å¯ä»¥è°ƒæ•´ç¼©æ”¾æ¯”ä¾‹\n    \nç”¨ä¸¤ä¸ª demo å¯ä»¥å¾ˆæ¸…æ¥šçš„è¯´æ˜é—®é¢˜\n\n[æŸ¥çœ‹ç¤ºä¾‹](https://googlesamples.github.io/web-fundamentals/fundamentals/design-and-ui/responsive/vp-no.html) [æŸ¥çœ‹ç¤ºä¾‹](https://googlesamples.github.io/web-fundamentals/fundamentals/design-and-ui/responsive/vp.html)\n\nå½“ç„¶ï¼Œå¦‚æœä½ ä½¿ç”¨è¿‡å®½çš„cssç»å¯¹å®½åº¦æˆ–è€…è¾ƒå¤§çš„ç»å¯¹å®šä½å€¼ï¼Œé‚£ä¹ˆ width=device-width æ˜¯ä¸ä¼šèµ·ä½œç”¨çš„ï¼Œå»ºè®®ä½¿ç”¨ç›¸å¯¹å®½åº¦å€¼ï¼Œä¾‹å¦‚ width:100%\n\n### æ‰‹æœºåƒç´ å’Œ visual viewport çš„å…³ç³»\n\nè¿™é‡Œçš„visual viewport ä¹Ÿå°±æ˜¯æ‰‹æœºæ•´ä¸ªå±å¹•å¯æ˜¾ç¤ºå†…å®¹çš„å¤šå°‘\nè¦ç†è§£ä¸¤è€…çš„å…³ç³»ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¸€å¼ è¡¨æ ¼\n\n| è®¾å¤‡ | iPhone 3Gs | 4(s) | 5c | 6 | 6+ |\n| --- | --- | --- | --- | --- | --- |\n| è®¾å¤‡åˆ†è¾¨ç‡ | 320\\*480 | 640\\*960 | 640\\*1136 | 750\\*1334 | 1080\\*1920 |\n| å¯¹è§’çº¿(inh) | 3.5 | 3.5 | 4 | 4.7 | 5.5 |\n| visual viewport | 320\\*480 | 320\\*480 | 320\\*568 | 375\\*667 | 414\\*736 |\n| scale | @1x | @2x | @2x | @2x | @3x |\n| PPI | 163 | 326 | 326 | 326 | 401 |\n\næˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥å¾ˆæ˜æ˜¾çš„å…¬å¼ç—•è¿¹,è®¾å¤‡åˆ†è¾¨ç‡ï¼Œé€»è¾‘åƒç´ ï¼ˆå³ visual viewportï¼‰ä¸ scaleï¼Œå½“ç„¶ä¸‰è€…ä¹‹é—´å¹¶æ²¡æœ‰æ˜æ˜¾çš„ä»å±å…³ç³»ï¼Œè€Œæ˜¯ç›¸äº’å½±å“ã€‚\nè¿™é‡Œè¿˜æœ‰å‡ ä¸ªé—®é¢˜éœ€è¦æ³¨æ„:\n\n* æ˜ å°„\n\nä»ä¸Šé¢çš„è¡¨æ ¼å¯ä»¥çœ‹å‡ºiPhone 6 plusçš„é€»è¾‘åƒç´ æ˜¯414\\*736ï¼Œä½†å¦‚æœæ‰‹æœºè®¾è®¡è€…ä¸è®¾è®¡ä¸ºè¿™ä¸ªå°ºå¯¸ï¼Œä½†ç‰©ç†åˆ†è¾¨ç‡ï¼ˆè®¾å¤‡åˆ†è¾¨ç‡ï¼‰å’Œscale ä¸å˜å‘¢ï¼Œé‚£ä¹ˆæ‰‹æœºå°±ä¸å¾—ä¸æŠŠé€»è¾‘åƒç´ ä¸æ˜¯\n414\\*736çš„å…ƒç´ å¼ºè¡Œæ”¾å¤§æˆ–ç¼©å°åˆ°å±å¹•ä¸Šï¼Œè¿™å°±æ˜¯æ˜ å°„ã€‚\n\n* ç•Œé¢ UI å…ƒç´ çš„ç‰©ç†å¤§å°\n\næˆ‘ä»¬é¦–å…ˆæ¸…æ¥šä¸€ä¸ªæ¦‚å¿µï¼Œå½“é€»è¾‘åƒç´ ä¸€å®šæ—¶ï¼Œå®ƒåœ¨ä¸€è¡Œå¯æ˜¾ç¤ºçš„å†…å®¹æ˜¯æœ‰é™çš„ï¼Œæ¯”å¦‚å¦‚æœå­—ä½“å¤§å°ä¸€å®šï¼ŒiPhone 6 ä¸€è¡Œåªèƒ½æ˜¾ç¤ºç¡®å®šçš„å­—æ•°ã€‚\né‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªå‡è®¾ï¼Œå½“layout viewport ä¸€å®šæ—¶ï¼Œwidth=100%ï¼Œè¿™ä¸€è¡Œæ˜¾ç¤ºçš„å…ƒç´ ï¼Œæ¯”å¦‚å­—ä½“å’ŒæŒ‰é”®ï¼Œæ˜¯ä¼šå› ä¸ºé€»è¾‘åƒç´ çš„å¢åŠ è€Œå¢åŠ ï¼Œä½†æ‰‹æœºå±å¹•çš„ç‰©ç†å¤§å°æ˜¯ä¸å˜çš„ï¼Œè¿™å°±\nä¼šå¯¼è‡´æ˜ å°„è€Œå­—ä½“ä¸æŒ‰é’®å˜å°ï¼Œæ›´éš¾é˜…è¯»å’Œç‚¹å‡»ã€‚\n\n* retina æ˜¾ç¤ºå±\n\nè®²åˆ°è¿™é‡Œï¼Œå°±åˆæœ‰ä¸€ä¸ªåè¯ä¸å¾—ä¸è®²ï¼Œé‚£å°±æ˜¯ retina è§†ç½‘è†œæ˜¾ç¤ºå±ã€‚å› ä¸ºå®ƒå¾ˆå®¹æ˜“äº§ç”Ÿ scaleï¼Œæ‰€ä»¥æ›´å®¹æ˜“ä¸ scale æ··æ·†ï¼Œè€Œå½±å“æˆ‘ä»¬å¯¹ä¸Šè¿°é—®é¢˜çš„åˆ¤æ–­ã€‚\nretina è§†ç½‘è†œå±å¹•æ˜¯ Apple å…¬å¸åœ¨ iPhone4 çš„æ—¶å€™æ¨å‡ºçš„ä¸€ç§æ˜¾ç¤ºå±ï¼Œå› ä¸ºæœ‰ç€äººè‚‰çœ¼æ— æ³•åˆ†è¾¨çš„åƒç´ ç‚¹ï¼Œæ‰€ä»¥ç”»é¢æ˜¾ç¤ºç›¸å½“ç»†è…»ï¼Œä¸éš¾çŒœå‡ºï¼Œè¦åœ¨ä¸ä»¥å‰ç›¸å·®ä¸å¤§çš„å±å¹•ä¸Šå¾—åˆ°è¿™\næ ·çš„æ•ˆæœï¼Œé‚£ä¹ˆå¯¹äºåˆ†è¾¨ç‡çš„è¦æ±‚æ˜¯ç›¸å½“é«˜çš„ï¼Œå³åœ¨æ‰‹æœºä¸Šï¼Œå¿…é¡»æœ‰å¤§äº 300 çš„ PPI æ‰å¯ä»¥åšåˆ°ã€‚\nretina å±å¹•çš„åˆ¤æ–­æ ‡å‡†æ˜¯åœ¨ç¬¬ä¸‰ä»£ iPad å¤§ä¼šä¸Šæå‡ºçš„\n\n![](http://121.42.215.169/blog_images/retina.jpg)\n\nä¸ºä»€ä¹ˆè¦å«åš retina æ˜¾ç¤ºå±ï¼Œæˆ‘æ›´å€¾å‘äºè¿™æ˜¯ä¸€ç§å™±å¤´ï¼Œäººä»¬èµç¾ Apple åˆ¶é€ çš„ retina æ˜¾ç¤ºå±ï¼Œä¸å…¶è¯´æ˜¯å› ä¸ºç»™äº†å¤§ä¼—ä¸€ç§æ›´åŠ å¥½çš„ç”¨æˆ·ä½“éªŒï¼ˆè¶…é«˜çš„åˆ†è¾¨ç‡ï¼Œä¸è¿‡å…¶å®æœ‰å¥½å‡ å®¶\néŸ©å›½ä¸æ—¥æœ¬çš„å‚å®¶æ—©å·²ç ”å‘äº†å‡ºæ¥ï¼‰ï¼Œä¸å¦‚è¯´ Apple æè‡´çš„å‚ç›´äº§å“åˆ¶é€ è®©å®ƒè¿›å…¥å¤§ä¼—ç”Ÿæ´»æ›´è´´åˆ‡ä¸€äº›ã€‚ \n\n[å‚è€ƒèµ„æ–™](https://www.yuque.com/qqqqqcy/original)\n",
      "data": {
        "title": "å‰ç«¯å·¥ç¨‹å¸ˆåœ¨ç§»åŠ¨ç«¯å¼€å‘ä¸­é‡åˆ°çš„åƒç´ é—®é¢˜",
        "date": "2016-10-27 18:12:25",
        "tags": [
          "blog"
        ],
        "published": true,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "2016-10-27-px"
    },
    {
      "content": "\n\næˆªæ­¢ä»Šå¤©ä¸ºæ­¢ï¼Œå‡¡æ˜¯æˆ‘é‡åˆ°çš„éƒ¨ç½²åšå®¢çš„é—®é¢˜ï¼Œæ— è®ºæ˜¯ Jekyll è¿˜æ˜¯ Hexo æ–¹é¢çš„ï¼Œéƒ½ä¸€ä¸€æœ‰äº†ç­”æ¡ˆï¼Œæƒ³ç€ï¼Œå†™ä¸€ç¯‡åšå®¢ï¼Œå½“åšæ€»ç»“ ã€‚\n\n### éƒ¨ç½²å‰æ\n\nåœ¨ Github ä¸Šé¢ç”³è¯·ä¸€ä¸ªä»“åº“ï¼Œä»“åº“çš„åè¯å¿…é¡»æ˜¯ username.github.io\n\n* Jekyll éƒ¨ç½²æ–¹æ¡ˆ\n\n        Jekyll æ˜¯ä¸€ä¸ªç®€å•çš„åšå®¢å½¢æ€çš„é™æ€ç«™ç‚¹ç”Ÿäº§æœºå™¨ã€‚ å®ƒæœ‰ä¸€ä¸ªæ¨¡ç‰ˆç›®å½•ï¼Œå…¶ä¸­åŒ…å«åŸå§‹æ–‡æœ¬æ ¼å¼çš„æ–‡æ¡£ï¼Œé€šè¿‡ä¸€ä¸ªè½¬æ¢å™¨ï¼ˆå¦‚Markdownï¼‰\n        å’Œæˆ‘ä»¬çš„ Liquid æ¸²æŸ“å™¨è½¬åŒ–æˆä¸€ä¸ªå®Œæ•´çš„å¯å‘å¸ƒçš„é™æ€ç½‘ç«™ï¼Œä½ å¯ä»¥å‘å¸ƒåœ¨ä»»ä½•ä½ å–œçˆ±çš„æœåŠ¡å™¨ä¸Šã€‚\nè¿™ä¸ªå¼•æ“åœ¨ github çš„æœåŠ¡å™¨ä¸Šå°±æœ‰ï¼Œæ‰€æœ‰æˆ‘ä»¬è¦åšçš„ä»…ä»…æ˜¯å°†è‡ªå·±çš„æ–‡ä»¶æŒ‰ç…§ jekyll å¼•æ“å¯ä»¥æ¸²æŸ“çš„ç›®å½•ç»“æ„ push ä¸Š github å°±å¯ä»¥äº†\n    \n    * Jekyll çš„ç›®å½•ç»“æ„\n    \n            .   \n            |--_config.yml>  \n            |--_drafts  \n                   |--articles1.textile \n                |--articles2.md\n            |--_includes\n                |--footer.html\n                |--header.html\n            |--_layouts\n                |--default.html\n                |--post.html\n            |--_posts\n                |--2014-06-17-articles1.textile\n                |--2014-06-17-articles1.md\n            |--_site\n            |--index.html\n            |--other files\n    \n    \n    ç½‘ä¸Šå…³äº jekyll ç›®å½•ç»“æ„çš„è®²è§£æ–‡ç« æœ‰å¾ˆå¤šï¼Œæˆ‘å°±ä¸åœ¨è¿™é‡Œèµ˜è¿°äº†ï¼Œæ–‡æœ«ä¼šæœ‰å‚è€ƒèµ„æ–™ã€‚\n    \n    * Jekyll è§£ææµç¨‹\n            \n        * é¦–å…ˆä¼šåŠ è½½_postsåŠæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ç« ï¼Œå°†å…¶å‚æ•°å’Œæ–‡ç« å†…å®¹ç»„ç»‡ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œæ‰€æœ‰çš„æ–‡ç« çš„å†…å®¹ã€å‚æ•°éƒ½åœ¨site.postså¯¹è±¡ï¼ˆå…¶ä»–æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ç« ä¸ä¼šæ”¾å…¥site.postsä¸­ï¼‰ã€‚\n        * å…¶æ¬¡åŠ è½½_layoutsæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ¨¡æ¿ã€‚\n        * å†æ¬¡åŠ è½½_includesæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰éœ€è¦è¢«å¼•å…¥çš„å†…å®¹ã€‚\n        * æœ€åæ ¹æ®æ¯ä¸€ç¯‡éœ€è¦ç¼–è¯‘çš„æ–‡ç« é€‰æ‹©çš„å…¶å‚æ•°å®šä¹‰çš„æ¨¡æ¿æ¥åˆ›å»ºä¸€ä¸ªæ¨¡æ¿ï¼Œå¹¶å°†å½“å‰æ–‡ç« çš„å†…å®¹ã€å‚æ•°ç­‰è¿›è¡Œæ‰©å±•åæ”¾åœ¨pageå¯¹è±¡ã€contentå¯¹è±¡ä¸­ï¼Œç„¶åè¿›è¡Œæ¨¡æ¿çš„ç¼–è¯‘ï¼Œç”Ÿæˆhtmlæ–‡ä»¶ï¼Œå¹¶æŒ‰ç…§ä¸€å®šè§„åˆ™æ”¾åœ¨_siteæ–‡ä»¶å¤¹ä¸‹ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨åˆ›å»ºä¸€ç¯‡æ–‡ç« æ—¶ï¼Œå…¶å®æ‰€æœ‰æ–‡ç« çš„å†…å®¹éƒ½å·²ç»è¢«è¯»å–å‡ºæ¥äº†ï¼Œè¿™ä¹Ÿä¸ºæ–‡ç« ç›¸äº’ä¹‹é—´çš„å…³è”æä¾›äº†å¯èƒ½ã€‚\n         \n        \n        æ­£æ˜¯ç”±äº jekyll ä¼šåœ¨æ¸²æŸ“ä¸€ç¯‡æ–‡ç« æ—¶å°†å…¶ä»–æ–‡ç« ä¹Ÿä¸€å¹¶åŠ è½½ï¼Œæ‰€ä»¥ jekyll åªé€‚åˆæ­å»ºä¸­å°å‹åšå®¢ã€‚ \n        \n        * ç”±äº Github Pages å®Œç¾æ”¯æŒ Jekyll ï¼Œæ‰€ä»¥ä½ åªéœ€è¦å®‰ç…§ Jekyll çš„æ–‡ä»¶ç›®å½•ç»“æ„ï¼Œæ‰˜ç®¡åœ¨ Github ä¸­å³å¯ï¼Œä¸éœ€è¦åœ¨æœ¬æœºå®‰è£… Jekyll ï¼Œåªéœ€è¦å…³æ³¨äº Githubï¼Œå¯ä»¥å€Ÿé‰´å¤§å¸ˆä»¬è®¾è®¡çš„ Jekyll æ¨¡æ¿ï¼Œç„¶å push æˆ– pull ä½ çš„æ–‡ç« å³å¯ã€‚\n            * æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”åˆå§‹åŒ–ä»“åº“ã€‚\n            * git clone ä½ çš„ username.github.io ä»“åº“\n            * æ‰¾ä¸€ä¸ªå¤§å¸ˆçš„[æ¨¡æ¿](https://github.com/jekyll/jekyll/wiki)ï¼Œç„¶åæ”¾è¿›è‡ªå·±çš„æœ¬åœ°æ–‡ä»¶å¤¹\n            * æ›´æ”¹å¤§å¸ˆçš„é…ç½®ï¼Œpush åˆ° Github ä¸­\n            \n        * è®¿é—® username.github.io\n        * å…³äºè¯„è®º\n            è¯„è®ºæˆ‘ä½¿ç”¨çš„æ˜¯ Disqus ï¼Œä½ åªéœ€è¦æ³¨å†Œä¸€ä¸ªè´¦å·ï¼Œç„¶åæŠŠæ’ä»¶ä»£ç å¤åˆ¶åˆ°è‡ªå·±çš„ _layouts é‡Œçš„æ¨¡æ¿ä¸­å°±å¯ä»¥äº†ï¼Œä¸è¿‡è¿™é‡Œè¦æ³¨æ„å¸ƒå±€ï¼Œå»ºè®®ä½¿ç”¨ [footer å¸ƒå±€](https://sfmonkey.github.io/blog/2016/07/footer.html)ä¸­çš„æ¨æ‹‰é€€å¸ƒå±€\n    \n    * Hexo éƒ¨ç½²æ–¹æ¡ˆ\n    \n            Hexo æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ã€‚ Hexo ä½¿ç”¨Markdownï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ï¼‰è§£ææ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚\n        \n        * å‡†å¤‡ç¯å¢ƒ\n            * Nodejs\n                \n                * Windows\n                    * å‰å¾€[å®˜ç½‘](https://nodejs.org/en/)ä¸‹è½½å®‰è£…\n                * ubantu\n                    * sudo apt-get install nodejs\n        \n        * å®‰è£… Hexo\n        \n            åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹å¹¶åˆå§‹åŒ–å®ƒï¼Œä¸‹é¢çš„ä¸€äº›å‘½ä»¤ä¸æ¸…æ¥šçš„ï¼Œæ–‡æœ«æœ‰ç›¸å…³èµ„æ–™ï¼Œæ³¨æ„ npm çš„ä½¿ç”¨ä½ç½®ï¼Œä¸€å®šè¦æ˜¯ä½ åˆ›å»ºçš„æ–‡ä»¶å¤¹ï¼Œnodejs çš„å®‰è£…æºå¾ˆé‡è¦ï¼Œå¦åˆ™å¯èƒ½å‡ºç°é”™è¯¯ã€‚\n            \n            *  npm install hexo-cli -g\n                \n                å¯èƒ½ä½ ä¼šçœ‹åˆ°ä¸€ä¸ªWARNï¼Œä½†æ˜¯ä¸ç”¨æ‹…å¿ƒï¼Œè¿™ä¸ä¼šå½±å“ä½ çš„æ­£å¸¸ä½¿ç”¨ã€‚\n           \n            *  npm install hexo --save\n            \n                ç„¶åä½ ä¼šçœ‹åˆ°å‘½ä»¤è¡Œçª—å£åˆ·äº†ä¸€å¤§å †ç™½å­—ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€çœ‹Hexoæ˜¯ä¸æ˜¯å·²ç»å®‰è£…å¥½äº†\n                \n            *  hexo -v        \n            *  hexo init\n                \n                åˆå§‹åŒ–\n            *  npm install\n            \n                å®‰è£…æ‰€éœ€ç»„ä»¶\n            *  hexo g\n            *  hexo s\n                åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€http://localhost:4000/ï¼Œæœ¬åœ° Hexo æ­å»ºæˆåŠŸ\n            \n            *  é…ç½® Deployment\n                \n                    git config --global user.name \"yourname\"\n                    git config --global user.email \"youremail\"\n            *   åŒæ ·åœ¨_config.ymlæ–‡ä»¶ä¸­ï¼Œæ‰¾åˆ°Deploymentï¼Œç„¶åæŒ‰ç…§å¦‚ä¸‹ä¿®æ”¹\n            \n                    deploy:\n                      type: git\n                      repo: git@github.com:yourname/yourname.github.io.git\n                      branch: master\n            *  npm install hexo-deployer-git --save\n                å¦‚æœä½¿ç”¨gitæ–¹å¼è¿›è¡Œéƒ¨ç½²ï¼Œæ‰§è¡Œnpm install hexo-deployer-git --saveæ¥å®‰è£…æ‰€éœ€çš„æ’ä»¶\n            \n            *  Hexo d\n            *  hexo d -g\n                \n                éƒ¨ç½²åšå®¢\n            *  username.github.io\n    \n    å…³äºæ›´æ”¹åŸŸåç­‰ä¸åœ¨è¿™é‡Œè¯´äº†ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šï¼Œæ–‡æœ«æˆ‘ä¼šé™„ä¸Šèµ„æ–™ã€‚\n    \n    \n    \n    \n    \n    è¡¥å……: å‰å¤©éƒ¨ç½²çš„æ—¶å€™çªç„¶å‡ºç°é—®é¢˜ï¼Œç”±äº Github æ²¡æœ‰å‘æ¥é‚®ä»¶æé†’ï¼Œè€Œæˆ‘çš„æ–‡ç« åˆåªå‡ºç°åœ¨ Github ä¸Šè€Œæœªå‡ºç°åœ¨åšå®¢ä¸Šï¼Œå¯¼è‡´æˆ‘ä»¥ä¸ºæ˜¯æ—¶åŒºé—®é¢˜é€ æˆçš„ future æœªå‘å¸ƒï¼Œå…¶å®ä¸ç„¶ï¼Œé—®é¢˜å‡ºç°åœ¨äº†ç¼–ç é—®é¢˜ä¸Šï¼Œç”±äº Github ä¸çŸ¥ä¸ºä½•æœªå‘é”™è¯¯é‚®ä»¶ï¼Œæ‰€ä»¥å¥½ä¹…éƒ½æ²¡æ‰¾åˆ°é—®é¢˜æ‰€åœ¨ã€‚ \n    \n### ç›¸å…³èµ„æ–™: \n[Git+GitHub+Markdown+Jekyll=Perfect Personal Blog](http://www.devtalking.com/articles/git-gitHub-markdown-jekyll/)\n\n[å¦‚ä½•æ­å»ºä¸€ä¸ªç‹¬ç«‹åšå®¢â€”â€”ç®€æ˜Github Pagesä¸Hexoæ•™ç¨‹](http://www.jianshu.com/p/05289a4bc8b2)\n\n[å²ä¸Šæœ€è¯¦ç»†çš„Hexoåšå®¢æ­å»ºå›¾æ–‡æ•™ç¨‹](https://xuanwo.org/2015/03/26/hexo-intor/)\n\n[æ–‡æ¡£ Hexo](https://hexo.io/zh-cn/docs/)\n          ",
      "data": {
        "title": "github pages éƒ¨ç½²æ€»ç»“",
        "date": "2016-07-25 16:30:23",
        "tags": [
          "blog"
        ],
        "published": true,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "2016-7-25-githubpages"
    }
  ],
  "tags": [
    {
      "index": 7,
      "name": "Babel",
      "slug": "PcrNP95Kt",
      "used": true
    },
    {
      "index": 6,
      "name": "Vue",
      "slug": "V8_eyJVRg",
      "used": true
    },
    {
      "index": 5,
      "name": "React",
      "slug": "t1GPgLh46",
      "used": true
    },
    {
      "index": -1,
      "name": "component",
      "slug": "sJxDYj1YY",
      "used": true
    },
    {
      "index": -1,
      "name": "Essay",
      "slug": "yldW1tuxF",
      "used": true
    },
    {
      "index": -1,
      "name": "webpack",
      "slug": "fq56-p2wF",
      "used": true
    },
    {
      "name": "blog",
      "slug": "blog",
      "used": true
    },
    {
      "name": "HveNotes",
      "slug": "hvenotes",
      "used": true
    }
  ],
  "menus": [
    {
      "link": "/",
      "name": "é¦–é¡µ",
      "openType": "Internal"
    },
    {
      "link": "/archives",
      "name": "å½’æ¡£",
      "openType": "Internal"
    },
    {
      "link": "/tags",
      "name": "æ ‡ç­¾",
      "openType": "Internal"
    },
    {
      "link": "/post/about",
      "name": "å…³äº",
      "openType": "Internal"
    }
  ]
}